<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>RTCé©±åŠ¨äº†è§£ğŸƒ</title>
    <url>/Linux-Lover/RTC%E9%A9%B1%E5%8A%A8/</url>
    <content><![CDATA[<p>RTC è®¾å¤‡é©±åŠ¨æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å­—ç¬¦è®¾å¤‡é©±åŠ¨</p>
<p> rtc_device ç»“æ„ä½“</p>
<p> rtc_class_ops ç»“æ„ä½“</p>
<p>rtc_dev_ioctl() å‡½æ•°å°±ä¼šæ‰§è¡Œï¼Œæ“ä½œ rtc_class_ops ä¸­çš„ read_timeã€set_time ç­‰å‡½æ•°æ¥å¯¹å…·ä½“ RTC è®¾å¤‡çš„è¯»å†™æ“ä½œã€‚</p>
<p>snvs_rtc_ops æ“ä½œé›†</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">struct rtc_device *rtc_device_register(const char *name,</span><br><span class="line">                  struct device *dev,</span><br><span class="line">                  const struct rtc_class_ops *ops,</span><br><span class="line">                  struct module *owner)</span><br><span class="line">                  </span><br><span class="line">struct rtc_device *rtc_device_register(const char *name,</span><br><span class="line">                      struct device *dev,</span><br><span class="line">                      const struct rtc_class_ops *ops,</span><br><span class="line">                      struct module *owner)</span><br></pre></td></tr></table></figure>
<p> platform_get_resource å‡½æ•°ä»è®¾å¤‡æ ‘ä¸­è·å–åˆ° RTC å¤–è®¾å¯„å­˜å™¨åŸºåœ°å€</p>
<p> å‡½æ•° devm_ioremap_resource å®Œæˆå†…å­˜æ˜ å°„ï¼Œå¾—åˆ° RTC å¤–è®¾å¯„å­˜å™¨ç‰©ç†åŸº<br>åœ°å€å¯¹åº”çš„è™šæ‹Ÿåœ°å€ã€‚</p>
<p>snvs-rtc.c æ–‡ä»¶ä¼šé‡‡ç”¨ regmap æœºåˆ¶æ¥è¯»å†™RTC åº•å±‚ç¡¬ä»¶å¯„å­˜å™¨ã€‚<br>è¿™é‡Œä½¿ç”¨ devm_regmap_init_mmio å‡½æ•°å°† RTC çš„ç¡¬ä»¶å¯„å­˜å™¨è½¬åŒ–ä¸ºregmap å½¢å¼ï¼Œè¿™æ · regmap æœºåˆ¶çš„ regmap_writeã€regmap_read ç­‰ API å‡½æ•°æ‰èƒ½æ“ä½œå¯„å­˜å™¨ã€‚<br>devm_rtc_device_register å‡½æ•°å‘ç³»ç»Ÿæ³¨å†Œ rtc_devcie</p>
<p>è°ƒç”¨ rtc_read_lp_counter è·å– RTC è®¡æ•°å€¼ï¼Œè¿™ä¸ªæ—¶é—´å€¼æ˜¯ç§’æ•°</p>
<p>è°ƒç”¨ rtc_time_to_tm å‡½æ•°å°†è·å–åˆ°çš„ç§’æ•°è½¬æ¢ä¸ºæ—¶é—´å€¼</p>
<p> rtc_read_lp_counter å‡½æ•°ï¼Œæ­¤å‡½æ•°ç”¨äºè¯»å– RTC è®¡æ•°å€¼</p>
<p>æµ‹è¯•</p>
<p>è®¾ç½®å½“å‰æ—¶é—´ä¸º 2019 å¹´ 8 æœˆ 31 æ—¥ 18:13:00<br>date -s â€œ2019-08-31 18:13:00â€</p>
<p>æ­¤æ—¶é—´è¿˜æ²¡æœ‰å†™å…¥åˆ°I.MX6U å†…éƒ¨ RTC é‡Œé¢æˆ–å…¶ä»–çš„ RTC èŠ¯ç‰‡é‡Œé¢<br>hwclock -w  //å°†å½“å‰ç³»ç»Ÿæ—¶é—´å†™å…¥åˆ° RTC é‡Œé¢</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>Framebufferé©±åŠ¨</title>
    <url>/Linux-Lover/ramebuffer-%E9%A9%B1%E5%8A%A8%E7%9A%84%E7%BC%96%E5%86%99%E6%B5%81%E7%A8%8B/</url>
    <content><![CDATA[<p>Framebuffer æŠ½è±¡ä¸ºä¸€ä¸ªå«åš fb_info çš„ç»“æ„ä½“ï¼Œfb_info ç»“æ„ä½“åŒ…å«äº† Framebuffer è®¾å¤‡çš„å®Œæ•´å±æ€§å’Œæ“ä½œé›†åˆï¼Œå› æ­¤æ¯ä¸€ä¸ª Framebuffer è®¾å¤‡éƒ½å¿…é¡»æœ‰ä¸€ä¸ª fb_info</p>
<p>å†…æ ¸å†…å­˜åˆ†é…å‡½æ•°<br>å‡½æ•°devm_kzallocï¼ˆï¼‰å’Œkzallocï¼ˆï¼‰ä¸€æ ·éƒ½æ˜¯å†…æ ¸å†…å­˜åˆ†é…å‡½æ•°ï¼Œä½†æ˜¯devm_kzallocï¼ˆï¼‰æ˜¯è·Ÿè®¾å¤‡æœ‰å…³çš„ï¼Œè‡ªåŠ¨é‡Šæ”¾ã€‚å½“å†…å­˜ä¸åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°devm_kfreeï¼ˆï¼‰é‡Šæ”¾ã€‚<br>è€Œkzallocï¼ˆï¼‰åˆ™éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ä½¿ç”¨kfreeï¼ˆï¼‰ï¼Œå®ç°äº†kmalloc()+memset()çš„åŠŸèƒ½</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>#pragma pack</title>
    <url>/C-C-Lover/ragma-pack/</url>
    <content><![CDATA[<p>#pragma pack(push)ä¿å­˜å¯¹é½çŠ¶æ€</p>
<p>#pram pack(4)è®¾å®š4å­—èŠ‚</p>
<p>voif func();</p>
<p>#pragma pack(pop)//æ¢å¤å¯¹é½</p>
<p>æ³¨æ„ï¼šfrom dalao  ï¼ï¼ï¼</p>
<p>c51 é»˜è®¤æŒ‰ç…§1å­—èŠ‚å¯¹å…¶ï¼Œæ²¡æœ‰å­˜åœ¨å­—èŠ‚å¯¹é½é—®é¢˜.<br>keilå·¥ç¨‹ç¼–è¯‘ä¸æŠ¥é”™ï¼Œè¯­å¥æ— æ•ˆã€‚</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸­æ–­(æ­£æ—­)</title>
    <url>/Linux-Lover/Linux%E4%B8%AD%E6%96%AD-%E6%AD%A3%E6%97%AD/</url>
    <content><![CDATA[<p>ä¸­æ–­</p>
<p>Linuxä¸ç”¨FIQï¼Œåªç”¨åˆ°äº†IRQ</p>
<p>ä¸­æ–­æœåŠ¡æœ‰æ²¡æœ‰å‚æ•°ä¸»è¦æ˜¯çœ‹ä¸­æ–­å‘ç”Ÿåœ¨è£¸æœºä¸Šè¿˜æ˜¯å®æ—¶ç³»ç»Ÿä¸­</p>
<p>linuxä¸­æ–­æµç¨‹</p>
<p>Linuxä¸ç”¨FIQï¼Œåªç”¨åˆ°äº†IRQ</p>
<p>linuxçš„ä¸­æ–­å¤„ç†éƒ½æ˜¯åœ¨SVCæ¨¡å¼ä¸‹å¤„ç†çš„ã€‚</p>
<p>å½“å‘ç”Ÿä¸­æ–­çš„æ—¶å€™ï¼Œä»£ç è¿è¡Œåœ¨å†…æ ¸ç©ºé—´</p>
<p>IRQæ‰§è¡Œçš„æ—¶å€™å¾ˆå¿«</p>
<p>åœ¨IRQå›åˆ°SVCæ¨¡å¼æ—¶å€™ R0å­˜ç€irqnumber</p>
<p>åœ¨SVCæ¨¡å¼çš„å†…æ ¸æ ˆä¸Šä¿å­˜ä¸­æ–­æ—¶å€™æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„å¯„å­˜å™¨çŠ¶æ€ R1-R12 ã€‚ R0ä¿å­˜åœ¨IRQé‚£è¾¹çš„å†…æ ¸æ ˆã€‚</p>
<p>éšåä¼šå†æ¬åˆ°SVCçš„å†…æ ¸æ ˆä¸Š</p>
<p>æ€»ç»“åˆ†ä¸º7ç‚¹ï¼š</p>
<p>Linuxå¯¹ä¸­æ–­çš„æ‰©å±•ï¼šç¡¬ä»¶ä¸­æ–­ï¼Œè½¯ä»¶ä¸­æ–­</p>
<p>ä¸­æ–­å¤„ç†åŸåˆ™1ï¼šä¸èƒ½åµŒå¥—</p>
<p>ä¸­æ–­å¤„ç†åŸåˆ™2ï¼šè¶Šå¿«è¶Šå¥½</p>
<p>è¦å¤„ç†çš„äº‹æƒ…å®åœ¨å¤ªå¤šï¼šæ‹†åˆ†ä¸ºï¼šä¸ŠåŠéƒ¨ï¼Œä¸‹åŠéƒ¨</p>
<p>ä¸‹åŠéƒ¨çš„äº‹æƒ…è€—æ—¶ä¸æ˜¯å¤ªé•¿ï¼štasklet</p>
<p>ä¸‹åŠéƒ¨è¦åšçš„äº‹æƒ…å¤ªå¤šå¹¶ä¸”å¾ˆå¤æ‚ï¼šå·¥ä½œé˜Ÿåˆ—</p>
<p>æ–°æŠ€æœ¯ï¼šthreaded irq</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼Œä¸ä½¿ç”¨ç¬¬ä¸‰ä¸ªå˜é‡</title>
    <url>/C-C-Lover/%E4%BA%A4%E6%8D%A2%E4%B8%A4%E4%B8%AA%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC%EF%BC%8C%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<p>äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼Œä¸ä½¿ç”¨ç¬¬ä¸‰ä¸ªå˜é‡ã€‚å³a=3,b=5,äº¤æ¢ä¹‹åa=5,b=3;</p>
<p>ç­”æ¡ˆï¼šæœ‰ä¸¤ç§è§£æ³•, ä¸€ç§ç”¨ç®—æœ¯ç®—æ³•, ä¸€ç§ç”¨^(å¼‚æˆ–) </p>
<p>a = a + b; </p>
<p>b = a - b;</p>
<p> a = a - b;    //æº¢å‡ºé—®é¢˜</p>
<p>or</p>
<p> a = a^b;// åªèƒ½å¯¹int,char..</p>
<p> b = a^b; </p>
<p>a = a^b;</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Qtç¼–è¯‘æŠ¥é”™</title>
    <url>/Linux-Lover/Qt%E7%BC%96%E8%AF%91%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<p>æŠ¥é”™make: Nothing to be done for â€˜firstâ€™</p>
<p>å¯æ‰§è¡Œç¨‹åºå·²ç»å­˜åœ¨ã€‚</p>
<p>/usr/bin/ld: main.oï¼šæ™®é€šELFé‡å®šä½ï¼ˆM: 40ï¼‰</p>
<p>make cc ä¿®æ”¹</p>
<img src="/Linux-Lover/Qt%E7%BC%96%E8%AF%91%E6%8A%A5%E9%94%99/1.JPG" class>

]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Qtåº”ç”¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦ä¸²å¤§å°</title>
    <url>/C-C-Lover/%E7%AC%A6%E4%B8%B2%E5%A4%A7%E5%B0%8F/</url>
    <content><![CDATA[<p>å­—ç¬¦ä¸²â€\\â€A100\â€\â€çš„é•¿åº¦æ˜¯å¤šå°‘ï¼Ÿ8ä¸ªé•¿åº¦</p>
<p> \ è¦ç”¨ \ è¡¨ç¤º</p>
<p>â€˜â€™ è¦ç”¨ &quot; è¡¨ç¤º</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>å †å’Œæ ˆ</title>
    <url>/C-C-Lover/%E5%A0%86%E5%92%8C%E6%A0%88/</url>
    <content><![CDATA[<p><strong>å †å’Œæ ˆçš„åˆ†åˆ«ï¼Œä¼˜ç¼ºç‚¹ï¼Œå †çš„å¤§å°æ˜¯å¤šå°‘ï¼Œæ ˆçš„å¤§å°æ˜¯å¤šå°‘ï¼Ÿ</strong></p>
<p><strong>æ ˆåŒºï¼ˆstackï¼‰</strong></p>
<p>ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆ<br>æ ˆï¼šæ ˆæ˜¯å‘ä½åœ°å€æ‰©å±•çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€å—è¿ç»­çš„å†…å­˜çš„åŒºåŸŸã€‚<br>æ ˆé¡¶çš„åœ°å€å’Œæ ˆçš„æœ€å¤§å®¹é‡æ˜¯ç³»ç»Ÿé¢„å…ˆè§„å®šå¥½çš„ï¼Œæ ˆçš„å¤§å°æ˜¯2Mï¼ˆä¹Ÿæœ‰çš„è¯´æ˜¯1Mï¼Œæ€»ä¹‹æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å°±ç¡®å®šçš„å¸¸æ•° ) ,å¦‚æœç”³è¯·çš„ç©ºé—´è¶…è¿‡æ ˆçš„å‰©ä½™ç©ºé—´æ—¶ï¼Œå°†æç¤ºoverflowã€‚å› æ­¤ï¼Œèƒ½ä»æ ˆè·å¾—çš„ç©ºé—´è¾ƒå°ã€‚</p>
<p>ä¼˜ç‚¹ï¼š<br>1.é«˜é€Ÿï¼Œåœ¨æ ˆä¸Šåˆ†é…å†…å­˜æ˜¯éå¸¸å¿«çš„ã€‚<br>2.ç®€å•ï¼Œæ ˆå¯¹è±¡æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½ æ°¸è¿œä¸å¯èƒ½å‘ç”Ÿå†…å­˜æ³„éœ²ã€‚<br>å› ä¸ºä»–æ€»æ˜¯åœ¨è¶…å‡ºä»–çš„ä½œç”¨åŸŸæ—¶è¢«è‡ªåŠ¨é”€æ¯äº†ã€‚<br>ç¼ºç‚¹ï¼šæ ˆå¯¹è±¡ä¸¥æ ¼çš„å®šä¹‰äº†ç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯å…¶ä¸»è¦çš„ç¼ºç‚¹ã€‚</p>
<p><strong>å †åŒºï¼ˆheapï¼‰</strong></p>
<p>ä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ã€‚æ³¨æ„å®ƒä¸æ•°æ®ç»“æ„ä¸­çš„å †æ˜¯ä¸¤å›äº‹ï¼Œåˆ†é…æ–¹å¼å€’æ˜¯ç±»ä¼¼äºé“¾è¡¨ã€‚<br>å †ï¼šä¸€èˆ¬æ˜¯åœ¨å †çš„å¤´éƒ¨ç”¨ä¸€ä¸ªå­—èŠ‚å­˜æ”¾å †çš„å¤§å°ã€‚å †ä¸­çš„å…·ä½“å†…å®¹æœ‰ç¨‹åºå‘˜å®‰æ’ã€‚<br>å †ï¼šå †æ˜¯å‘é«˜åœ°å€æ‰©å±•çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸è¿ç»­çš„å†…å­˜åŒºåŸŸã€‚<br>è¿™æ˜¯ç”±äºç³»ç»Ÿæ˜¯ç”¨é“¾è¡¨æ¥å­˜å‚¨çš„ç©ºé—²å†…å­˜åœ°å€çš„ï¼Œ<br>è‡ªç„¶æ˜¯ä¸è¿ç»­çš„ï¼Œè€Œé“¾è¡¨çš„éå†æ–¹å‘æ˜¯ç”±ä½åœ°å€å‘é«˜åœ°å€ã€‚<br>å †çš„å¤§å°å—é™äºè®¡ç®—æœºç³»ç»Ÿä¸­æœ‰æ•ˆçš„è™šæ‹Ÿå†…å­˜ã€‚ç”±æ­¤å¯è§ï¼Œå †è·å¾—çš„ç©ºé—´æ¯”è¾ƒçµæ´»ï¼Œä¹Ÿæ¯”è¾ƒå¤§ã€‚</p>
<p>ä¼˜ç‚¹ï¼šå¯ä»¥è‡ªå·±æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚<br>ç¼ºç‚¹ï¼šéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨é‡Šæ”¾ï¼Œå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚</p>
<p>è½¬è½½ï¼šç½‘ç»œ</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>å‚è€ƒçº¦æŸ</title>
    <url>/MySql-Lover/%E8%80%83%E7%BA%A6%E6%9D%9F/</url>
    <content><![CDATA[<p>6ã€å‡è®¾æœ‰ä¸‹é¢ä¸¤ä¸ªå…³ç³»æ¨¡å¼:<br>èŒå·¥(èŒå·¥å·,å§“å,å¹´é¾„,èŒåŠ¡,å·¥èµ„,éƒ¨é—¨å·),å…¶ä¸­èŒå·¥å·ä¸ºä¸»ç ;<br>éƒ¨é—¨(éƒ¨é—¨å·,åç§°,ç»ç†å,ç”µè¯),å…¶ä¸­éƒ¨é—¨å·ä¸ºä¸»ç ã€‚<br>ç”¨SQLè¯­è¨€å®šä¹‰è¿™ä¸¤ä¸ªå…³ç³»æ¨¡å¼,è¦æ±‚åœ¨æ¨¡å¼ä¸­å®Œæˆä»¥ä¸‹å®Œæ•´æ€§çº¦æŸæ¡ä»¶çš„å®šä¹‰:<br>(1)å®šä¹‰æ¯ä¸ªæ¨¡å¼çš„ä¸»ç ;<br>(2)å®šä¹‰å‚ç…§å®Œæ•´æ€§;<br>(3)å®šä¹‰èŒå·¥å¹´é¾„ä¸å¾—è¶…è¿‡60å²ï¼›</p>
<p>CREATE TABLE èŒå·¥<br>(<br>èŒå·¥å· CHAR(5) PRIMARY KEY,<br>å§“å CHAR(8) NOT NULL,<br>å¹´é¾„ SMALLINT,<br>èŒåŠ¡ CHAR(10),<br>å·¥èµ„ DECIMAL (7,2 ),<br>éƒ¨é—¨å· CHAR(5)<br>);</p>
<p>CREATE TABLE éƒ¨é—¨<br>(<br>éƒ¨é—¨å· CHAR(5)PRIMARY KEY,<br>åç§° CHAR(20),<br>ç»ç†å CHAR(8)NOT NULL,<br>ç”µè¯ CHAR(8)<br>);</p>
<p>ALTER TABLE èŒå·¥<br>ADD CONSTRAINT C1 CHECK(å¹´é¾„ &lt; 60);</p>
<p>ALTER TABLE èŒå·¥<br>ADD CONSTRAINT C2 FOREIGN KEY (éƒ¨é—¨å·) REFERENCES éƒ¨é—¨(éƒ¨é—¨å·);/<em>å‚è€ƒå®Œæ•´æ€§çº¦æŸ</em>/</p>
<p>select * from èŒå·¥;<br>select * from éƒ¨é—¨;</p>
<p>è¡¨çº§çº¦æŸä¸åˆ—çº§çº¦æŸï¼Ÿè¡¨çº§ç”¨äºè”åˆçº¦æŸã€‚</p>
]]></content>
      <categories>
        <category>MySql Lover</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>INPUTå­ç³»ç»Ÿ</title>
    <url>/Linux-Lover/NPUT%E5%AD%90%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<p><strong>INPUTå­ç³»ç»Ÿ</strong></p>
<p>   ç®¡ç†è¾“å…¥çš„å­ç³»ç»Ÿ<br>   input å­ç³»ç»Ÿåˆ†ä¸º input é©±åŠ¨å±‚ã€input æ ¸å¿ƒå±‚ã€input äº‹ä»¶å¤„ç†å±‚ï¼Œæœ€ç»ˆç»™ç”¨æˆ·ç©ºé—´æä¾›å¯è®¿é—®çš„è®¾å¤‡èŠ‚ç‚¹.</p>
<p>   input å­ç³»ç»Ÿçš„æ‰€æœ‰è®¾å¤‡ä¸»è®¾å¤‡å·éƒ½ä¸º 13ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ input å­ç³»ç»Ÿå¤„ç†è¾“å…¥è®¾å¤‡çš„æ—¶å€™å°±ä¸éœ€è¦å»æ³¨å†Œå­—ç¬¦è®¾å¤‡äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å‘ç³»ç»Ÿæ³¨å†Œä¸€ä¸ª<code>input_device</code> å³å¯</p>
<p>   input_dev ç»“æ„ä½“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct input_dev &#123;</span><br><span class="line"> const char *name;</span><br><span class="line"> const char *phys;</span><br><span class="line"> const char *uniq;</span><br><span class="line"> struct input_id id;</span><br><span class="line"></span><br><span class="line"> unsigned long propbit[BITS_TO_LONGS(INPUT_PROP_CNT)];</span><br><span class="line"></span><br><span class="line"> unsigned long evbit[BITS_TO_LONGS(EV_CNT)]; /* äº‹ä»¶ç±»å‹çš„ä½å›¾ */</span><br><span class="line"> unsigned long keybit[BITS_TO_LONGS(KEY_CNT)]; /* æŒ‰é”®å€¼çš„ä½å›¾ */</span><br><span class="line"> unsigned long relbit[BITS_TO_LONGS(REL_CNT)]; /* ç›¸å¯¹åæ ‡çš„ä½å›¾ */</span><br><span class="line"> unsigned long absbit[BITS_TO_LONGS(ABS_CNT)]; /* ç»å¯¹åæ ‡çš„ä½å›¾ */</span><br><span class="line"> unsigned long mscbit[BITS_TO_LONGS(MSC_CNT)]; /* æ‚é¡¹äº‹ä»¶çš„ä½å›¾ */</span><br><span class="line"> unsigned long ledbit[BITS_TO_LONGS(LED_CNT)]; /*LED ç›¸å…³çš„ä½å›¾ */</span><br><span class="line"> unsigned long sndbit[BITS_TO_LONGS(SND_CNT)];/* sound æœ‰å…³çš„ä½å›¾ */</span><br><span class="line"> unsigned long ffbit[BITS_TO_LONGS(FF_CNT)]; /* å‹åŠ›åé¦ˆçš„ä½å›¾ */</span><br><span class="line"> unsigned long swbit[BITS_TO_LONGS(SW_CNT)]; /*å¼€å…³çŠ¶æ€çš„ä½å›¾ */</span><br><span class="line">......</span><br><span class="line"> bool devres_managed;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œevbit()è¾“å…¥äº‹ä»¶ç±»å‹</p>
<p>#define EV_SYN 0x00 /* åŒæ­¥äº‹ä»¶ <em>/<br>#define EV_KEY 0x01 /</em> æŒ‰é”®äº‹ä»¶ <em>/<br>#define EV_REL 0x02 /</em> ç›¸å¯¹åæ ‡äº‹ä»¶ <em>/<br>#define EV_ABS 0x03 /</em> ç»å¯¹åæ ‡äº‹ä»¶ <em>/<br>#define EV_MSC 0x04 /</em> æ‚é¡¹(å…¶ä»–)äº‹ä»¶ <em>/<br>#define EV_SW 0x05 /</em> å¼€å…³äº‹ä»¶ <em>/<br>#define EV_LED 0x11 /</em> LED <em>/<br>#define EV_SND 0x12 /</em> sound(å£°éŸ³) <em>/<br>#define EV_REP 0x14 /</em> é‡å¤äº‹ä»¶ <em>/<br>#define EV_FF 0x15 /</em> å‹åŠ›äº‹ä»¶ <em>/<br>#define EV_PWR 0x16 /</em> ç”µæºäº‹ä»¶ <em>/<br>#define EV_FF_STATUS 0x17 /</em> å‹åŠ›çŠ¶æ€äº‹ä»¶ */</p>
<p>æŒ‰é”®è¿æŒ‰ï¼šEV_KEY ã€EV_REPã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">1ã€ç”³è¯·ä¸€ä¸ª input_dev ç»“æ„ä½“</span><br><span class="line">struct input_dev *input_allocate_device(void)</span><br><span class="line">æ³¨é”€</span><br><span class="line">void input_free_device(struct input_dev *dev)</span><br><span class="line"></span><br><span class="line">int input_register_device(struct input_dev *dev)</span><br><span class="line">void input_unregister_device(struct input_dev *dev)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;*********ç¬¬ä¸€ç§è®¾ç½®äº‹ä»¶å’Œäº‹ä»¶å€¼çš„æ–¹æ³•***********&#x2F;</span><br><span class="line"> __set_bit(EV_KEY, inputdev-&gt;evbit); &#x2F;* è®¾ç½®äº§ç”ŸæŒ‰é”®äº‹ä»¶ *&#x2F;</span><br><span class="line"> __set_bit(EV_REP, inputdev-&gt;evbit); &#x2F;* é‡å¤äº‹ä»¶ *&#x2F;</span><br><span class="line"> __set_bit(KEY_0, inputdev-&gt;keybit); &#x2F;*è®¾ç½®äº§ç”Ÿå“ªäº›æŒ‰é”®å€¼ *&#x2F;</span><br><span class="line"> &#x2F;************************************************&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;*********ç¬¬äºŒç§è®¾ç½®äº‹ä»¶å’Œäº‹ä»¶å€¼çš„æ–¹æ³•***********&#x2F;</span><br><span class="line"> keyinputdev.inputdev-&gt;evbit[0] &#x3D; BIT_MASK(EV_KEY) |</span><br><span class="line">BIT_MASK(EV_REP);</span><br><span class="line"> keyinputdev.inputdev-&gt;keybit[BIT_WORD(KEY_0)] |&#x3D;</span><br><span class="line">BIT_MASK(KEY_0);</span><br><span class="line"> &#x2F;************************************************&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;*********ç¬¬ä¸‰ç§è®¾ç½®äº‹ä»¶å’Œäº‹ä»¶å€¼çš„æ–¹æ³•***********&#x2F; keyinputdev.inputdev-&gt;evbit[0] &#x3D; BIT_MASK(EV_KEY) |</span><br><span class="line">BIT_MASK(EV_REP);</span><br><span class="line">input_set_capability(keyinputdev.inputdev, EV_KEY, KEY_0);</span><br><span class="line">&#x2F;************************************************&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2ã€ä¸ŠæŠ¥è¾“å…¥äº‹ä»¶</span><br><span class="line">ä½†æ˜¯å…·ä½“æ˜¯ä»€ä¹ˆæ ·çš„è¾“å…¥å€¼ Linux å†…æ ¸æ˜¯ä¸çŸ¥é“çš„.,æˆ‘ä»¬éœ€è¦è·å–åˆ°å…·ä½“</span><br><span class="line">çš„è¾“å…¥å€¼ï¼Œæˆ–è€…è¯´æ˜¯è¾“å…¥äº‹ä»¶ï¼Œç„¶åå°†è¾“å…¥äº‹ä»¶ä¸ŠæŠ¥ç»™ Linux å†…æ ¸</span><br><span class="line"></span><br><span class="line">void input_event(struct input_dev *dev,</span><br><span class="line">            unsigned int type,</span><br><span class="line">            unsigned int code,</span><br><span class="line"> Â  Â  Â  Â  Â  Â int value)</span><br><span class="line">å…¶ä»–å‡½æ•°éƒ½æ˜¯åŸºäºä¸Šé¢çš„å‡½æ•°è€Œæ¥ã€‚</span><br><span class="line"></span><br><span class="line">void input_report_rel(struct input_dev *dev, unsigned int code, int value)</span><br><span class="line">void input_report_abs(struct input_dev *dev, unsigned int code, int value)</span><br><span class="line">void input_report_ff_status(struct input_dev *dev, unsigned int code, int value)</span><br><span class="line">void input_report_switch(struct input_dev *dev, unsigned int code, int value)</span><br><span class="line">void input_mt_sync(struct input_dev *dev) </span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">input_sync å‡½æ•°æ¥å‘Šè¯‰ Linux å†…æ ¸ input å­ç³»ç»Ÿä¸ŠæŠ¥ç»“æŸ</span><br><span class="line"></span><br><span class="line">void input_sync(struct input_dev *dev)&#x2F;* åŒæ­¥äº‹ä»¶ *&#x2F;</span><br><span class="line"></span><br><span class="line">3ã€input_event  ç»“æ„ä½“</span><br><span class="line"></span><br><span class="line">struct input_event &#123;</span><br><span class="line"> struct timeval time; Â  &#x2F;*äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´*&#x2F;</span><br><span class="line"> __u16 type;          &#x2F;*äº‹ä»¶ç±»å‹*&#x2F;</span><br><span class="line"> __u16 code;			&#x2F;*äº‹ä»¶ç *&#x2F;</span><br><span class="line"> __s32 value;			&#x2F;*å€¼*&#x2F;</span><br><span class="line"> &#125;;</span><br><span class="line">æ‰€æœ‰çš„è¾“å…¥è®¾å¤‡æœ€ç»ˆéƒ½æ˜¯æŒ‰ç…§ input_event ç»“æ„ä½“å‘ˆç°ç»™ç”¨æˆ·çš„ï¼Œç”¨æˆ·åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ input_event æ¥è·å–åˆ°å…·ä½“çš„è¾“å…¥äº‹ä»¶æˆ–ç›¸å…³çš„å€¼</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">é©±åŠ¨å±‚</span><br><span class="line">#if  0</span><br><span class="line">    &#x2F;*  åˆå§‹åŒ– input_dev ï¼Œè®¾ ç½®äº§ç”Ÿå“ªäº›äº‹ä»¶ *&#x2F;</span><br><span class="line">        __set_bit(EV_KEY, keyinputdev.inputdev-&gt;evbit); &#x2F;* æŒ‰é”®äº‹ä»¶ *&#x2F;</span><br><span class="line">        __set_bit(EV_REP, keyinputdev.inputdev-&gt;evbit); &#x2F;*  é‡å¤äº‹ä»¶ *&#x2F;</span><br><span class="line"></span><br><span class="line">        &#x2F;*  åˆå§‹åŒ– input_dev ï¼Œè®¾ç½®äº§ç”Ÿå“ªäº›æŒ‰é”® *&#x2F;</span><br><span class="line">        __set_bit(KEY_0, keyinputdev.inputdev-&gt;keybit);</span><br><span class="line">        ret &#x3D; input_register_device(keyinputdev.inputdev);</span><br><span class="line">  #endif</span><br><span class="line"></span><br><span class="line">    #if  0</span><br><span class="line">        keyinputdev.inputdev-&gt;evbit[0] &#x3D; BIT_MASK(EV_KEY)|BIT_MASK(EV_REP);</span><br><span class="line"></span><br><span class="line">        keyinputdev.inputdev-&gt;keybit[BIT_WORD(KEY_0)] |&#x3D;BIT_MASK(KEY_0);</span><br><span class="line">                            </span><br><span class="line"></span><br><span class="line">    #endif</span><br><span class="line"></span><br><span class="line">    keyinputdev.inputdev-&gt;evbit[0] &#x3D; BIT_MASK(EV_KEY) |BIT_MASK(EV_REP);</span><br><span class="line"></span><br><span class="line">    input_set_capability(keyinputdev.inputdev, EV_KEY, KEY_0);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"> Â  Â åº”ç”¨å±‚</span><br><span class="line">    </span><br><span class="line">    &#x2F;* å®šä¹‰ä¸€ä¸ª input_event å˜é‡ï¼Œå­˜æ”¾è¾“å…¥äº‹ä»¶ä¿¡æ¯ *&#x2F;</span><br><span class="line"> static struct input_event inputevent;</span><br></pre></td></tr></table></figure>











]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>MISCé©±åŠ¨å®éªŒ</title>
    <url>/Linux-Lover/SC%E9%A9%B1%E5%8A%A8%E5%AE%9E%E9%AA%8C/</url>
    <content><![CDATA[<p>MISC é©±åŠ¨ä¹Ÿå«åšæ‚é¡¹é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬æ¿å­ä¸Šçš„æŸäº›å¤–è®¾æ— æ³•è¿›è¡Œåˆ†ç±»çš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ MISC é©±åŠ¨ã€‚<br>æ‰€æœ‰çš„ MISC è®¾å¤‡é©±åŠ¨çš„ä¸»è®¾å¤‡å·éƒ½ä¸º<code>10</code>ï¼Œä¸åŒçš„è®¾å¤‡ä½¿ç”¨ä¸åŒçš„ä»è®¾å¤‡å·ã€‚</p>
<p>miscdevice ç»“æ„ä½“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct miscdevice &#123;</span><br><span class="line">     int minor; /* å­è®¾å¤‡å· */</span><br><span class="line">     const char *name; /* è®¾å¤‡åå­— */</span><br><span class="line">     const struct file_operations *fops; /* è®¾å¤‡æ“ä½œé›† */</span><br><span class="line">     struct list_head list;</span><br><span class="line">     struct device *parent;</span><br><span class="line">     struct device *this_device;</span><br><span class="line">     const struct attribute_group **groups;</span><br><span class="line">     const char *nodename;</span><br><span class="line">     umode_t mode;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<p>minor è¡¨ç¤ºå­è®¾å¤‡å·ï¼ŒMISC è®¾å¤‡çš„ä¸»è®¾å¤‡å·ä¸º 10ï¼Œè¿™ä¸ªæ˜¯å›ºå®šçš„ï¼Œéœ€è¦ç”¨æˆ·æŒ‡å®šå­è®¾å¤‡å·ï¼ŒLinux ç³»ç»Ÿå·²ç»é¢„å®šä¹‰äº†ä¸€äº› MISC è®¾å¤‡çš„å­è®¾å¤‡å·ï¼Œè¿™äº›é¢„å®šä¹‰çš„å­è®¾å¤‡å·å®šä¹‰ã€‚</p>
<p>int misc_register(struct miscdevice * misc);<br>int misc_deregister(struct miscdevice *misc);</p>
<p>ls /dev/miscbeep -l    æŸ¥çœ‹ä¸»æ¬¡è®¾å¤‡å·</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾å¤‡æ ‘è‡ªå¸¦driver</title>
    <url>/Linux-Lover/%E5%A4%87%E6%A0%91%E8%87%AA%E5%B8%A6driver/</url>
    <content><![CDATA[<p>æ‰“å¼€ RED è¿™ä¸ª LED<br>echo 1 &gt; /sys/class/leds/red/brightness //æ‰“å¼€ LED0<br>å…³é—­ RED è¿™ä¸ª LED<br>echo 0 &gt; /sys/class/leds/red/brightness //å…³é—­ LED0</p>
<p>linux,default-trigger = â€œheartbeatâ€; //ç³»ç»Ÿé—ªçƒ</p>
<p>//å¼€æœºè‡ªé—ªçƒ<br>linux,default-trigger = â€œheartbeatâ€;<br>default-state = â€œonâ€;</p>
<p>å‡½æ•°äº†è§£ï¼š</p>
<p>count = device_get_child_node_count(dev);å‡½æ•°ç»Ÿè®¡å­èŠ‚ç‚¹æ•°é‡</p>
<p>device_for_each_child_node(dev, child) //éå†</p>
<p>led.gpiod = devm_get_gpiod_from_child(dev, NULL, child);</p>
<p>fwnode_property_read_stringï¼ˆï¼‰ï¼›</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>gdbä¸gdbserver</title>
    <url>/Linux-Lover/gdb%E4%B8%8Egdbserver/</url>
    <content><![CDATA[<p><strong>GDBç§»æ¤</strong></p>
<p>arm-linux-gnueabihf-gcc å°±è‡ªå¸¦äº†ä¸»æœºä½¿ç”¨çš„ arm-linux-gnueabihf-gdb å’Œå¼€å‘æ¿æ‰€ä½¿ç”¨çš„ gdbserverã€‚</p>
<p>arm-linux-gnueabihf-gcc gdbtest.c -o gdbtest -g //ç¼–è¯‘æµ‹è¯•ç¨‹åºï¼Œæ³¨æ„-g é€‰é¡¹<br>arm-linux-gnueabihf-gdb gdbtest<br>target remote 192.168.0.50:2001 //è¿æ¥åˆ°å¼€å‘æ¿ä¸Š</p>
<p>gdbserver 192.168.0.128ï¼š2001 gdbtest //å¼€å‘æ¿è¿æ¥ä¸»æœº</p>
<p>å‘½ä»¤ï¼š</p>
<p>l å‘½ä»¤(list)ç”¨äºåˆ—å‡ºæ‰€æœ‰ç¨‹åºæºç <br>b å‘½ä»¤(break)ç”¨äºè®¾ç½®æ–­ç‚¹<br>c å‘½ä»¤ç”¨äºè¿è¡Œåˆ°æ–­ç‚¹å‡ºï¼Œè¾“å…¥ c å‘½ä»¤ç¨‹åºå°±ä¼šè¿è¡Œ<br>s å‘½ä»¤(step)æ˜¯å•æ­¥è¿è¡Œæ‰§è¡Œï¼Œæ­¤å‡½æ•°ä¼šè¿›å…¥åˆ°å‡½æ•°é‡Œé¢ã€‚<br>n å‘½ä»¤(next)ä¹Ÿæ˜¯å•æ­¥è¿è¡Œï¼Œä½†æ˜¯ n å‘½ä»¤ä¸ä¼šè¿›å…¥åˆ°å‡½æ•°é‡Œé¢ã€‚<br>p å‘½ä»¤(print)ç”¨äºæ‰“å°æŸä¸ªå˜é‡å€¼ã€‚<br>q å‘½ä»¤(quit)ç”¨äºé€€å‡ºè°ƒè¯•ï¼Œå¼€å‘æ¿ä¸Šçš„ gdbserver ä¹Ÿä¼šåœæ­¢ã€‚</p>
<p>æŸ¥çœ‹æ–­ç‚¹ï¼š</p>
<p>info break ;</p>
<p> VSCode+gdbserver  å›¾å½¢åŒ–è°ƒè¯•</p>
<p> .vscodeæ–‡ä»¶launch.json æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    // ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ </span><br><span class="line">    // æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚</span><br><span class="line">    // æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387</span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">    <span class="string">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"gdbtest"</span>,</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">            <span class="string">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="string">"program"</span>: <span class="string">"<span class="variable">$&#123;workspaceFolder&#125;</span>/gdbtest"</span>,</span><br><span class="line">            <span class="string">"args"</span>: [],</span><br><span class="line">            <span class="string">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">"cwd"</span>: <span class="string">"<span class="variable">$&#123;workspaceFolder&#125;</span>"</span>,</span><br><span class="line">            <span class="string">"environment"</span>: [],</span><br><span class="line">            <span class="string">"externalConsole"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">            <span class="string">"setupCommands"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"description"</span>: <span class="string">"ä¸º gdb å¯ç”¨æ•´é½æ‰“å°"</span>,</span><br><span class="line">                    <span class="string">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                    <span class="string">"ignoreFailures"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">            <span class="string">"miDebuggerPath"</span>: <span class="string">"/usr/local/arm/gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-gdb"</span>,</span><br><span class="line">            <span class="string">"miDebuggerServerAddress"</span>: <span class="string">"192.168.0.50:2001"</span></span><br><span class="line">       </span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>platformæ¡†æ¶</title>
    <url>/Linux-Lover/platform-%E4%BB%A3%E7%A0%81%E5%B0%8F%E8%AE%A1/</url>
    <content><![CDATA[<p>æ— è®¾å¤‡æ ‘platform</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//devic.c</span><br><span class="line"><span class="comment">#include &lt;linux/module.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/init.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/kernel.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/fs.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/slab.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/gpio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/uaccess.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/io.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/cdev.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/errno.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/cdev.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/semaphore.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/irq.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/wait.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/poll.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/fcntl.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/platform_device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/mach/map.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/uaccess.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/io.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define LEDDEV_CNT 1 /* è®¾å¤‡å·é•¿åº¦ */</span></span><br><span class="line"><span class="comment">#define LEDDEV_NAME "platled" /* è®¾å¤‡åå­— */</span></span><br><span class="line"><span class="comment">#define LEDOFF 0</span></span><br><span class="line"><span class="comment">#define LEDON 1</span></span><br><span class="line"></span><br><span class="line">static void __iomem *IMX6U_CCM_CCGR1;</span><br><span class="line">static void __iomem *SW_MUX_GPIO1_IO03;</span><br><span class="line">static void __iomem *SW_PAD_GPIO1_IO03;</span><br><span class="line">static void __iomem *GPIO1_DR;</span><br><span class="line">static void __iomem *GPIO1_GDIR;</span><br><span class="line"></span><br><span class="line">/*è®¾å¤‡ç»“æ„ä½“*/</span><br><span class="line">struct leddev_dev&#123;</span><br><span class="line">    dev_t devid;</span><br><span class="line">    struct cdev cdev;</span><br><span class="line">    struct class *class;</span><br><span class="line">    struct device *device;</span><br><span class="line">    int  major;</span><br><span class="line">    int minor;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct leddev_dev leddev ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*LED æ‰“å¼€å…³é—­*/</span><br><span class="line">static void led_switch(u8 sta)</span><br><span class="line">&#123;</span><br><span class="line">    u32 val = 0;</span><br><span class="line">    <span class="keyword">if</span>(sta == LEDOFF)</span><br><span class="line">    &#123;</span><br><span class="line">            val = readl(GPIO1_DR);  /*æ‰“å¼€ç¯*/</span><br><span class="line">            val &amp;= ~(1 &lt;&lt; 3 ) ;</span><br><span class="line">            writel(val,GPIO1_DR);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (sta == LEDON)</span><br><span class="line">    &#123; </span><br><span class="line">            val = readl(GPIO1_DR);  /*æ‰“å¼€ç¯*/</span><br><span class="line">            val |= (1 &lt;&lt; 3 ) ;</span><br><span class="line">            writel(val,GPIO1_DR);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int led_open(struct inode *inode,</span><br><span class="line">                     struct file *filp)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    filp-&gt;private_data = &amp;leddev ;</span><br><span class="line">    //printk(<span class="string">"chrdevbase open!\r\n"</span>);</span><br><span class="line">     <span class="built_in">return</span> 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static ssize_t led_write(struct file *filp, const char __user *buf,</span><br><span class="line">size_t cnt, loff_t *offt)</span><br><span class="line"> &#123;</span><br><span class="line"></span><br><span class="line"> int retvalue;</span><br><span class="line"> unsigned char databuf[1];</span><br><span class="line"> unsigned char ledstat;</span><br><span class="line"></span><br><span class="line"> retvalue = copy_from_user(databuf, buf, cnt);</span><br><span class="line"><span class="keyword">if</span>(retvalue &lt; 0) &#123;</span><br><span class="line"> <span class="built_in">return</span> -EFAULT;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> ledstat = databuf[0]; /* è·å–çŠ¶æ€å€¼ */</span><br><span class="line"><span class="keyword">if</span>(ledstat == LEDON) &#123;</span><br><span class="line"> led_switch(LEDON); /* æ‰“å¼€ LED ç¯ */</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(ledstat == LEDOFF) &#123;</span><br><span class="line"> led_switch(LEDOFF); /* å…³é—­ LED ç¯ */</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">return</span> 0;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">static struct file_operations led_fops = &#123;</span><br><span class="line">            .owner = THIS_MODULE,</span><br><span class="line">            .open = led_open,</span><br><span class="line">            .write = led_write,</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static int led_probe(struct platform_device *dev)</span><br><span class="line">&#123;</span><br><span class="line">    int i = 0;</span><br><span class="line">    int ressize[5];</span><br><span class="line">    u32 val = 0;</span><br><span class="line">    struct resource *ledsource[5];</span><br><span class="line"></span><br><span class="line">    printk(<span class="string">"led driver and device has matched!\r\n"</span>);</span><br><span class="line"></span><br><span class="line">    /*è·å–èµ„æº*/</span><br><span class="line">    <span class="keyword">for</span>(i = 0; i &lt; 5 ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ledsource[i] =  platform_get_resource(dev,IORESOURCE_MEM,i);</span><br><span class="line">        <span class="keyword">if</span> (!ledsource[i]) &#123;</span><br><span class="line">                dev_err(&amp;dev-&gt;dev, <span class="string">"No MEM resource for always on\r\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="built_in">return</span> -ENXIO;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        ressize[i] = resource_size(ledsource[i]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">        IMX6U_CCM_CCGR1  = ioremap(ledsource[0]-&gt;start, ressize[0]);</span><br><span class="line">        SW_MUX_GPIO1_IO03 = ioremap(ledsource[1]-&gt;start, ressize[1]);</span><br><span class="line">        SW_PAD_GPIO1_IO03 = ioremap(ledsource[2]-&gt;start, ressize[2]);</span><br><span class="line">        GPIO1_DR = ioremap(ledsource[3]-&gt;start, ressize[3]);</span><br><span class="line">        GPIO1_GDIR = ioremap(ledsource[4]-&gt;start, ressize[4]);</span><br><span class="line">    val = readl(IMX6U_CCM_CCGR1);</span><br><span class="line">    val &amp;= ~(3 &lt;&lt; 26); /* æ¸…é™¤ä»¥å‰çš„è®¾ç½®  */</span><br><span class="line">    val |= (3 &lt;&lt; 26); /* è®¾ç½®æ–°å€¼ */</span><br><span class="line">    writel(val, IMX6U_CCM_CCGR1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        writel(5, SW_MUX_GPIO1_IO03);</span><br><span class="line">        writel(0x10B0, SW_PAD_GPIO1_IO03);</span><br><span class="line"></span><br><span class="line">        val = readl(GPIO1_GDIR);</span><br><span class="line">        val &amp;= ~(1 &lt;&lt; 3); </span><br><span class="line">        val |= (1 &lt;&lt; 3);</span><br><span class="line">        writel(val, GPIO1_GDIR);</span><br><span class="line"></span><br><span class="line">        val = readl(GPIO1_DR);</span><br><span class="line">        val |= (1 &lt;&lt; 3) ;</span><br><span class="line">        writel(val, GPIO1_DR);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> /* æ³¨å†Œå­—ç¬¦è®¾å¤‡é©±åŠ¨ */</span><br><span class="line">/*1ã€åˆ›å»ºè®¾å¤‡å· */</span><br><span class="line"> <span class="keyword">if</span> (leddev.major) &#123; /* å®šä¹‰äº†è®¾å¤‡å· */</span><br><span class="line"> leddev.devid = MKDEV(leddev.major, 0);</span><br><span class="line"> register_chrdev_region(leddev.devid, LEDDEV_CNT,LEDDEV_NAME);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123; /* æ²¡æœ‰å®šä¹‰è®¾å¤‡å· */</span><br><span class="line"> alloc_chrdev_region(&amp;leddev.devid, 0, LEDDEV_CNT,</span><br><span class="line">LEDDEV_NAME);</span><br><span class="line"> leddev.major = MAJOR(leddev.devid);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> /* 2ã€åˆå§‹åŒ– cdev */</span><br><span class="line"> leddev.cdev.owner = THIS_MODULE;</span><br><span class="line"> cdev_init(&amp;leddev.cdev, &amp;led_fops);</span><br><span class="line"></span><br><span class="line"> /* 3ã€æ·»åŠ ä¸€ä¸ª cdev */</span><br><span class="line"> cdev_add(&amp;leddev.cdev, leddev.devid, LEDDEV_CNT);</span><br><span class="line"> /* 4ã€åˆ›å»ºç±» */</span><br><span class="line"> leddev.class = class_create(THIS_MODULE, LEDDEV_NAME);</span><br><span class="line"> <span class="keyword">if</span> (IS_ERR(leddev.class)) &#123;</span><br><span class="line"> <span class="built_in">return</span> PTR_ERR(leddev.class);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> /* 5ã€åˆ›å»ºè®¾å¤‡ */</span><br><span class="line"> leddev.device = device_create(leddev.class, NULL, leddev.devid,</span><br><span class="line">NULL, LEDDEV_NAME);</span><br><span class="line"> <span class="keyword">if</span> (IS_ERR(leddev.device)) &#123;</span><br><span class="line"> <span class="built_in">return</span> PTR_ERR(leddev.device);</span><br><span class="line"> &#125;</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int led_remove(struct platform_device *dev)</span><br><span class="line">&#123;</span><br><span class="line">    iounmap(IMX6U_CCM_CCGR1);</span><br><span class="line">    iounmap(SW_MUX_GPIO1_IO03);</span><br><span class="line">    iounmap(SW_PAD_GPIO1_IO03);</span><br><span class="line">    iounmap(GPIO1_DR);</span><br><span class="line">    iounmap(GPIO1_GDIR);</span><br><span class="line"></span><br><span class="line">    cdev_del(&amp;leddev.cdev);</span><br><span class="line">    unregister_chrdev_region(leddev.devid, LEDDEV_CNT);</span><br><span class="line">    device_destroy(leddev.class, leddev.devid);</span><br><span class="line">    class_destroy(leddev.class);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">static struct platform_driver led_driver = &#123;</span><br><span class="line">    .driver = &#123;</span><br><span class="line">        .name = <span class="string">"imx6ul-led"</span>, /* é©±åŠ¨åå­—ï¼Œç”¨äºå’Œè®¾å¤‡åŒ¹é… */</span><br><span class="line">        &#125;,</span><br><span class="line">        .probe = led_probe,</span><br><span class="line">        .remove = led_remove,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static int __init leddriver_init(void)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">return</span> platform_driver_register(&amp;led_driver);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> static void __exit leddriver_exit(void)</span><br><span class="line"> &#123;</span><br><span class="line"> platform_driver_unregister(&amp;led_driver);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">/*æ³¨å†Œé©±åŠ¨å‡½æ•°*/</span><br><span class="line">module_init(leddriver_init);</span><br><span class="line">module_exit(leddriver_exit);</span><br><span class="line"></span><br><span class="line">MODULE_LICENSE(<span class="string">"GPL"</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">"ming"</span>);</span><br><span class="line"></span><br><span class="line">//driver.c</span><br><span class="line"><span class="comment">#include &lt;linux/module.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/init.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/kernel.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/fs.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/slab.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/gpio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/uaccess.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/io.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/cdev.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/errno.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/cdev.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/semaphore.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/irq.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/wait.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/poll.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/fcntl.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/platform_device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/mach/map.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/uaccess.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/io.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define LEDDEV_CNT 1 /* è®¾å¤‡å·é•¿åº¦ */</span></span><br><span class="line"><span class="comment">#define LEDDEV_NAME "platled" /* è®¾å¤‡åå­— */</span></span><br><span class="line"><span class="comment">#define LEDOFF 0</span></span><br><span class="line"><span class="comment">#define LEDON 1</span></span><br><span class="line"></span><br><span class="line">static void __iomem *IMX6U_CCM_CCGR1;</span><br><span class="line">static void __iomem *SW_MUX_GPIO1_IO03;</span><br><span class="line">static void __iomem *SW_PAD_GPIO1_IO03;</span><br><span class="line">static void __iomem *GPIO1_DR;</span><br><span class="line">static void __iomem *GPIO1_GDIR;</span><br><span class="line"></span><br><span class="line">/*è®¾å¤‡ç»“æ„ä½“*/</span><br><span class="line">struct leddev_dev&#123;</span><br><span class="line">    dev_t devid;</span><br><span class="line">    struct cdev cdev;</span><br><span class="line">    struct class *class;</span><br><span class="line">    struct device *device;</span><br><span class="line">    int  major;</span><br><span class="line">    int minor;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct leddev_dev leddev ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*LED æ‰“å¼€å…³é—­*/</span><br><span class="line">static void led_switch(u8 sta)</span><br><span class="line">&#123;</span><br><span class="line">    u32 val = 0;</span><br><span class="line">    <span class="keyword">if</span>(sta == LEDOFF)</span><br><span class="line">    &#123;</span><br><span class="line">            val = readl(GPIO1_DR);  /*æ‰“å¼€ç¯*/</span><br><span class="line">            val &amp;= ~(1 &lt;&lt; 3 ) ;</span><br><span class="line">            writel(val,GPIO1_DR);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (sta == LEDON)</span><br><span class="line">    &#123; </span><br><span class="line">            val = readl(GPIO1_DR);  /*æ‰“å¼€ç¯*/</span><br><span class="line">            val |= (1 &lt;&lt; 3 ) ;</span><br><span class="line">            writel(val,GPIO1_DR);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int led_open(struct inode *inode,</span><br><span class="line">                     struct file *filp)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    filp-&gt;private_data = &amp;leddev ;</span><br><span class="line">    //printk(<span class="string">"chrdevbase open!\r\n"</span>);</span><br><span class="line">     <span class="built_in">return</span> 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static ssize_t led_write(struct file *filp, const char __user *buf,</span><br><span class="line">size_t cnt, loff_t *offt)</span><br><span class="line"> &#123;</span><br><span class="line"></span><br><span class="line"> int retvalue;</span><br><span class="line"> unsigned char databuf[1];</span><br><span class="line"> unsigned char ledstat;</span><br><span class="line"></span><br><span class="line"> retvalue = copy_from_user(databuf, buf, cnt);</span><br><span class="line"><span class="keyword">if</span>(retvalue &lt; 0) &#123;</span><br><span class="line"> <span class="built_in">return</span> -EFAULT;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> ledstat = databuf[0]; /* è·å–çŠ¶æ€å€¼ */</span><br><span class="line"><span class="keyword">if</span>(ledstat == LEDON) &#123;</span><br><span class="line"> led_switch(LEDON); /* æ‰“å¼€ LED ç¯ */</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(ledstat == LEDOFF) &#123;</span><br><span class="line"> led_switch(LEDOFF); /* å…³é—­ LED ç¯ */</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">return</span> 0;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">static struct file_operations led_fops = &#123;</span><br><span class="line">            .owner = THIS_MODULE,</span><br><span class="line">            .open = led_open,</span><br><span class="line">            .write = led_write,</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">static int led_probe(struct platform_device *dev)</span><br><span class="line">&#123;</span><br><span class="line">    int i = 0;</span><br><span class="line">    int ressize[5];</span><br><span class="line">    u32 val = 0;</span><br><span class="line">    struct resource *ledsource[5];</span><br><span class="line"></span><br><span class="line">    printk(<span class="string">"led driver and device has matched!\r\n"</span>);</span><br><span class="line"></span><br><span class="line">    /*è·å–èµ„æº*/</span><br><span class="line">    <span class="keyword">for</span>(i = 0; i &lt; 5 ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ledsource[i] =  platform_get_resource(dev,IORESOURCE_MEM,i);</span><br><span class="line">        <span class="keyword">if</span> (!ledsource[i]) &#123;</span><br><span class="line">                dev_err(&amp;dev-&gt;dev, <span class="string">"No MEM resource for always on\r\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="built_in">return</span> -ENXIO;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        ressize[i] = resource_size(ledsource[i]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">        IMX6U_CCM_CCGR1  = ioremap(ledsource[0]-&gt;start, ressize[0]);</span><br><span class="line">        SW_MUX_GPIO1_IO03 = ioremap(ledsource[1]-&gt;start, ressize[1]);</span><br><span class="line">        SW_PAD_GPIO1_IO03 = ioremap(ledsource[2]-&gt;start, ressize[2]);</span><br><span class="line">        GPIO1_DR = ioremap(ledsource[3]-&gt;start, ressize[3]);</span><br><span class="line">        GPIO1_GDIR = ioremap(ledsource[4]-&gt;start, ressize[4]);</span><br><span class="line">    val = readl(IMX6U_CCM_CCGR1);</span><br><span class="line">    val &amp;= ~(3 &lt;&lt; 26); /* æ¸…é™¤ä»¥å‰çš„è®¾ç½®  */</span><br><span class="line">    val |= (3 &lt;&lt; 26); /* è®¾ç½®æ–°å€¼ */</span><br><span class="line">    writel(val, IMX6U_CCM_CCGR1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        writel(5, SW_MUX_GPIO1_IO03);</span><br><span class="line">        writel(0x10B0, SW_PAD_GPIO1_IO03);</span><br><span class="line"></span><br><span class="line">        val = readl(GPIO1_GDIR);</span><br><span class="line">        val &amp;= ~(1 &lt;&lt; 3); </span><br><span class="line">        val |= (1 &lt;&lt; 3);</span><br><span class="line">        writel(val, GPIO1_GDIR);</span><br><span class="line"></span><br><span class="line">        val = readl(GPIO1_DR);</span><br><span class="line">        val |= (1 &lt;&lt; 3) ;</span><br><span class="line">        writel(val, GPIO1_DR);</span><br><span class="line"></span><br><span class="line"> /* æ³¨å†Œå­—ç¬¦è®¾å¤‡é©±åŠ¨ */</span><br><span class="line">/*1ã€åˆ›å»ºè®¾å¤‡å· */</span><br><span class="line"> <span class="keyword">if</span> (leddev.major) &#123; /* å®šä¹‰äº†è®¾å¤‡å· */</span><br><span class="line"> leddev.devid = MKDEV(leddev.major, 0);</span><br><span class="line"> register_chrdev_region(leddev.devid, LEDDEV_CNT,LEDDEV_NAME);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123; /* æ²¡æœ‰å®šä¹‰è®¾å¤‡å· */</span><br><span class="line"> alloc_chrdev_region(&amp;leddev.devid, 0, LEDDEV_CNT,</span><br><span class="line">LEDDEV_NAME);</span><br><span class="line"> leddev.major = MAJOR(leddev.devid);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> /* 2ã€åˆå§‹åŒ– cdev */</span><br><span class="line"> leddev.cdev.owner = THIS_MODULE;</span><br><span class="line"> cdev_init(&amp;leddev.cdev, &amp;led_fops);</span><br><span class="line"></span><br><span class="line"> /* 3ã€æ·»åŠ ä¸€ä¸ª cdev */</span><br><span class="line"> cdev_add(&amp;leddev.cdev, leddev.devid, LEDDEV_CNT);</span><br><span class="line"> /* 4ã€åˆ›å»ºç±» */</span><br><span class="line"> leddev.class = class_create(THIS_MODULE, LEDDEV_NAME);</span><br><span class="line"> <span class="keyword">if</span> (IS_ERR(leddev.class)) &#123;</span><br><span class="line"> <span class="built_in">return</span> PTR_ERR(leddev.class);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> /* 5ã€åˆ›å»ºè®¾å¤‡ */</span><br><span class="line"> leddev.device = device_create(leddev.class, NULL, leddev.devid,</span><br><span class="line">NULL, LEDDEV_NAME);</span><br><span class="line"> <span class="keyword">if</span> (IS_ERR(leddev.device)) &#123;</span><br><span class="line"> <span class="built_in">return</span> PTR_ERR(leddev.device);</span><br><span class="line"> &#125;</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int led_remove(struct platform_device *dev)</span><br><span class="line">&#123;</span><br><span class="line">    iounmap(IMX6U_CCM_CCGR1);</span><br><span class="line">    iounmap(SW_MUX_GPIO1_IO03);</span><br><span class="line">    iounmap(SW_PAD_GPIO1_IO03);</span><br><span class="line">    iounmap(GPIO1_DR);</span><br><span class="line">    iounmap(GPIO1_GDIR);</span><br><span class="line"></span><br><span class="line">    cdev_del(&amp;leddev.cdev);</span><br><span class="line">    unregister_chrdev_region(leddev.devid, LEDDEV_CNT);</span><br><span class="line">    device_destroy(leddev.class, leddev.devid);</span><br><span class="line">    class_destroy(leddev.class);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">static struct platform_driver led_driver = &#123;</span><br><span class="line">    .driver = &#123;</span><br><span class="line">        .name = <span class="string">"imx6ul-led"</span>, /* é©±åŠ¨åå­—ï¼Œç”¨äºå’Œè®¾å¤‡åŒ¹é… */</span><br><span class="line">        &#125;,</span><br><span class="line">        .probe = led_probe,</span><br><span class="line">        .remove = led_remove,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static int __init leddriver_init(void)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">return</span> platform_driver_register(&amp;led_driver);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> static void __exit leddriver_exit(void)</span><br><span class="line"> &#123;</span><br><span class="line"> platform_driver_unregister(&amp;led_driver);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">/*æ³¨å†Œé©±åŠ¨å‡½æ•°*/</span><br><span class="line">module_init(leddriver_init);</span><br><span class="line">module_exit(leddriver_exit);</span><br><span class="line"></span><br><span class="line">MODULE_LICENSE(<span class="string">"GPL"</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">"ming"</span>);</span><br></pre></td></tr></table></figure>


<p>è®¾å¤‡æ ‘ç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;linux/module.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/init.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/kernel.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/fs.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/slab.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/gpio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/uaccess.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/io.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/cdev.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/errno.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/cdev.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/semaphore.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/irq.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/wait.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/poll.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/fcntl.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/platform_device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/mach/map.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/uaccess.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/io.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#include &lt;linux/of_gpio.h&gt; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define LEDDEV_CNT 1 /* è®¾å¤‡å·é•¿åº¦ */</span></span><br><span class="line"><span class="comment">#define LEDDEV_NAME "dtsplatled" /* è®¾å¤‡åå­— */</span></span><br><span class="line"><span class="comment">#define LEDOFF 0</span></span><br><span class="line"><span class="comment">#define LEDON 1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*è®¾å¤‡ç»“æ„ä½“*/</span><br><span class="line">struct leddev_dev&#123;</span><br><span class="line">    dev_t devid;</span><br><span class="line">    struct cdev cdev;</span><br><span class="line">    struct class *class;</span><br><span class="line">    struct device *device;</span><br><span class="line">    struct device_node *node ;</span><br><span class="line">    int  major;</span><br><span class="line">    int minor;</span><br><span class="line">    int led0;  /* LED ç¯ GPIO æ ‡å· */</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct leddev_dev leddev ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*LED æ‰“å¼€å…³é—­*/</span><br><span class="line">static void led_switch(u8 sta)</span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">if</span>(sta == LEDON)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            gpio_set_value(leddev.led0,0);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (sta == LEDOFF)</span><br><span class="line">        &#123;</span><br><span class="line">            gpio_set_value(leddev.led0,1); </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int led_open(struct inode *inode,</span><br><span class="line">                     struct file *filp)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    filp-&gt;private_data = &amp;leddev ;</span><br><span class="line">    //printk(<span class="string">"chrdevbase open!\r\n"</span>);</span><br><span class="line">     <span class="built_in">return</span> 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static ssize_t led_write(struct file *filp, const char __user *buf,</span><br><span class="line">size_t cnt, loff_t *offt)</span><br><span class="line"> &#123;</span><br><span class="line"></span><br><span class="line"> int retvalue;</span><br><span class="line"> unsigned char databuf[1];</span><br><span class="line"> unsigned char ledstat;</span><br><span class="line"></span><br><span class="line"> retvalue = copy_from_user(databuf, buf, cnt);</span><br><span class="line"><span class="keyword">if</span>(retvalue &lt; 0) &#123;</span><br><span class="line"> <span class="built_in">return</span> -EFAULT;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> ledstat = databuf[0]; /* è·å–çŠ¶æ€å€¼ */</span><br><span class="line"><span class="keyword">if</span>(ledstat == LEDON) &#123;</span><br><span class="line"> led_switch(LEDON); /* æ‰“å¼€ LED ç¯ */</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(ledstat == LEDOFF) &#123;</span><br><span class="line"> led_switch(LEDOFF); /* å…³é—­ LED ç¯ */</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">return</span> 0;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">static struct file_operations led_fops = &#123;</span><br><span class="line">            .owner = THIS_MODULE,</span><br><span class="line">            .open = led_open,</span><br><span class="line">            .write = led_write,</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static int led_probe(struct platform_device *dev)</span><br><span class="line">&#123;</span><br><span class="line">    printk(<span class="string">"led driver and device has matched!\r\n"</span>);</span><br><span class="line"></span><br><span class="line">        /* æ³¨å†Œå­—ç¬¦è®¾å¤‡é©±åŠ¨ */</span><br><span class="line">        /*1ã€åˆ›å»ºè®¾å¤‡å· */</span><br><span class="line">        <span class="keyword">if</span> (leddev.major) &#123; /* å®šä¹‰äº†è®¾å¤‡å· */</span><br><span class="line">        leddev.devid = MKDEV(leddev.major, 0);</span><br><span class="line">        register_chrdev_region(leddev.devid, LEDDEV_CNT,LEDDEV_NAME);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; /* æ²¡æœ‰å®šä¹‰è®¾å¤‡å· */</span><br><span class="line">        alloc_chrdev_region(&amp;leddev.devid, 0, LEDDEV_CNT,</span><br><span class="line">        LEDDEV_NAME);</span><br><span class="line">        leddev.major = MAJOR(leddev.devid);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">        /* 2ã€åˆå§‹åŒ– cdev */</span><br><span class="line">        leddev.cdev.owner = THIS_MODULE;</span><br><span class="line">        cdev_init(&amp;leddev.cdev, &amp;led_fops);</span><br><span class="line"></span><br><span class="line">        /* 3ã€æ·»åŠ ä¸€ä¸ª cdev */</span><br><span class="line">        cdev_add(&amp;leddev.cdev, leddev.devid, LEDDEV_CNT);</span><br><span class="line">        /* 4ã€åˆ›å»ºç±» */</span><br><span class="line">        leddev.class = class_create(THIS_MODULE, LEDDEV_NAME);</span><br><span class="line">        <span class="keyword">if</span> (IS_ERR(leddev.class)) &#123;</span><br><span class="line">        <span class="built_in">return</span> PTR_ERR(leddev.class);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /* 5ã€åˆ›å»ºè®¾å¤‡ */</span><br><span class="line">        leddev.device = device_create(leddev.class, NULL, leddev.devid,</span><br><span class="line">        NULL, LEDDEV_NAME);</span><br><span class="line">        <span class="keyword">if</span> (IS_ERR(leddev.device)) &#123;</span><br><span class="line">        <span class="built_in">return</span> PTR_ERR(leddev.device);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /*åˆå§‹åŒ–IO*/</span><br><span class="line"></span><br><span class="line">        leddev.node = of_find_node_by_path(<span class="string">"/gpioled"</span>);</span><br><span class="line">        <span class="keyword">if</span> (leddev.node == NULL)&#123;</span><br><span class="line">            printk(<span class="string">"gpioled node nost find!\r\n"</span>);</span><br><span class="line">             <span class="built_in">return</span> -EINVAL;</span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        leddev.led0 = of_get_named_gpio(leddev.node,<span class="string">"led-gpios"</span>,0);</span><br><span class="line">        <span class="keyword">if</span> (leddev.led0 &lt; 0) &#123;</span><br><span class="line">        printk(<span class="string">"can't get led-gpio\r\n"</span>);</span><br><span class="line">        <span class="built_in">return</span> -EINVAL;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        gpio_request(leddev.led0, <span class="string">"led0"</span>);</span><br><span class="line"></span><br><span class="line">        gpio_direction_output(leddev.led0, 1); /*è®¾ç½®ä¸ºè¾“å‡ºï¼Œé»˜è®¤é«˜ç”µå¹³ */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int led_remove(struct platform_device *dev)</span><br><span class="line">&#123;</span><br><span class="line">    gpio_set_value(leddev.led0,1);</span><br><span class="line">    cdev_del(&amp;leddev.cdev);</span><br><span class="line">    unregister_chrdev_region(leddev.devid, LEDDEV_CNT);</span><br><span class="line">    device_destroy(leddev.class, leddev.devid);</span><br><span class="line">    class_destroy(leddev.class);</span><br><span class="line">    printk(<span class="string">"driver  release!\r\n"</span>);</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/* åŒ¹é…åˆ—è¡¨ */</span><br><span class="line">static const struct of_device_id  led_of_match[] =&#123;</span><br><span class="line">    &#123; .compatible = <span class="string">"ming,gpioled"</span> &#125;,</span><br><span class="line">    &#123; /* Sentinel */ &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/*é©±åŠ¨åŒ¹é…*/</span><br><span class="line">static struct platform_driver led_driver = &#123;</span><br><span class="line">    .driver = &#123;</span><br><span class="line">        .name = <span class="string">"imx6ul-led"</span>, /* é©±åŠ¨åå­—ï¼Œç”¨äºå’Œè®¾å¤‡åŒ¹é… */</span><br><span class="line">        .of_match_table = led_of_match,</span><br><span class="line">        &#125;,</span><br><span class="line">        .probe = led_probe,</span><br><span class="line">        .remove = led_remove,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static int __init leddriver_init(void)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">return</span> platform_driver_register(&amp;led_driver);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> static void __exit leddriver_exit(void)</span><br><span class="line"> &#123;</span><br><span class="line"> platform_driver_unregister(&amp;led_driver);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">/*æ³¨å†Œé©±åŠ¨å‡½æ•°*/</span><br><span class="line">module_init(leddriver_init);</span><br><span class="line">module_exit(leddriver_exit);</span><br><span class="line">MODULE_LICENSE(<span class="string">"GPL"</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">"ming"</span>);</span><br><span class="line">```</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¼ºæœä¸æ£€æµ‹</title>
    <url>/Circuit-Lover/%E4%BC%BA%E6%9C%8D%E4%B8%8E%E6%A3%80%E6%B5%8B/</url>
    <content><![CDATA[<p><strong>ä¼ºæœç³»ç»Ÿ</strong></p>
<p>ä¼ºæœç³»ç»Ÿï¼Œå³éšåŠ¨ç³»ç»Ÿï¼Œæ˜¯èƒ½å¤Ÿè·Ÿè¸ªè¾“å…¥æŒ‡ä»¤ä¿¡å·è¿›è¡ŒåŠ¨ä½œï¼Œä»è€Œè·å¾—ç²¾ç¡®ä½ç½®ã€é€Ÿåº¦æˆ–åŠ›è¾“å‡ºçš„è‡ªåŠ¨æ§åˆ¶ç³»ç»Ÿã€‚</p>
<p>è¿›ç»™ä¼ºæœç³»ç»Ÿï¼ˆ Feed Servo System ï¼‰çš„å®šä¹‰åŠç»„æˆ<br>å®šä¹‰ï¼šä»¥ç§»åŠ¨éƒ¨ä»¶çš„ä½ç½®å’Œé€Ÿåº¦ä½œä¸ºæ§åˆ¶é‡çš„è‡ªåŠ¨æ§åˆ¶ç³»ç»Ÿã€‚<br>ç»„æˆï¼šä½ç½®æ§åˆ¶å•å…ƒï¼›é€Ÿåº¦æ§åˆ¶å•å…ƒï¼›é©±åŠ¨å…ƒä»¶(ç”µæœº)ï¼›æ£€æµ‹ä¸åé¦ˆå•å…ƒï¼›æœºæ¢°æ‰§è¡Œéƒ¨ä»¶ã€‚</p>
<p>ä¼ºæœç³»ç»Ÿçš„åˆ†ç±»<br>ï¼ˆ1ï¼‰å¼€ç¯ä¼ºæœç³»ç»Ÿ<br>ï¼ˆ2ï¼‰é—­ç¯ä¼ºæœç³»ç»Ÿ<br>è„‰å†²ç¼–ç å™¨<br>ï¼ˆ3ï¼‰åŠé—­ç¯ä¼ºæœç³»ç»Ÿ<br>ä½ç½®æ£€æµ‹ä¼ æ„Ÿå™¨</p>
<p><strong>ä¸‰ä¸ªç¯</strong></p>
<p> åŠ›ç¯ï¼Œç”µæµåé¦ˆï¼Œå–æ ·ç”µé˜»<br> é€Ÿåº¦ç¯  é€Ÿåº¦åé¦ˆï¼›æµ‹é€Ÿå‘ç”µæœºï¼Œå…‰ç”µç¼–ç å™¨ï¼Œæ—‹è½¬å˜å‹å™¨ç­‰<br> ä½ç½®ç¯  ä½ç½®åé¦ˆï¼›å…‰ç”µç¼–ç å™¨ï¼Œæ—‹è½¬å˜å‹å™¨ï¼Œå…‰æ …ç­‰</p>
<p><strong>æ£€æµ‹å…ƒä»¶çš„åˆ†ç±»</strong></p>
<img src="/Circuit-Lover/%E4%BC%BA%E6%9C%8D%E4%B8%8E%E6%A3%80%E6%B5%8B/%E6%A3%80%E6%B5%8B%E8%A3%85%E7%BD%AE.jpg" class>


<p><strong>æ—‹è½¬å˜å‹å™¨ä¸æ„Ÿåº”åŒæ­¥å™¨</strong></p>
<p><strong>å…‰ç”µç¼–ç å™¨</strong></p>
<p><strong>å…‰æ …å°º</strong></p>
<p>è«å°”æ¡çº¹ç‰¹ç‚¹ï¼š<br>1.æ”¾å¤§ä½œç”¨<br>2.å¹³å‡æ•ˆåº”(è¯¯å·®å‡åŒ–)<br>3.ä¿¡æ¯å˜æ¢<br>4.å…‰å¼ºåˆ†å¸ƒè§„å¾‹</p>
<p>åŒæ­¥ã€å¼‚æ­¥ç”µæœºï¼š<br>å¼‚æ­¥ç”µåŠ¨æœºçš„è½¬é€Ÿæ—¶åˆ»è·Ÿéšè´Ÿè½½å¤§å°çš„å˜åŒ–è€Œå˜åŒ–ã€‚</p>
<p><strong>æ‰©å±•ï¼š</strong></p>
<p><strong>æ—¥ç³»é©±åŠ¨å™¨</strong></p>
<p>æ—¥ç³»ä¼ºæœå“ç‰Œä¼—å¤šï¼Œå…¶ä¸­æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„äº§å“ä¸»è¦æ˜¯<br> YASKAWA çš„ Î£ ï¼ˆ SIGMA ï¼‰â€”-å®‰å·ç”µæœº<br> Mitsubishi çš„ MELSERVO<br> Panasonic çš„ MINAS A</p>
<p>è¿™ä¸‰ä¸ªå¯é…ç½®æ•°å­—é‡è¾“å…¥è¾“å‡ºï¼š<br>MINAS A6ï¼š10 å…¥ / 6 å‡ºï¼›<br>Î£-7ï¼š 8 å…¥ / 7 å‡ºï¼›<br>MR-J4ï¼š3 å…¥ / 3 å‡ºï¼›</p>
<p>æ¨¡æ‹Ÿé‡è¾“å…¥è¾“å‡ºï¼š<br>MINAS A6ï¼š3 å…¥ / 2 å‡ºï¼›<br>Î£-7ï¼š 1 å…¥ / 2 å‡ºï¼›<br>MR-J4ï¼š1 å…¥ / 2 å‡ºï¼›</p>
<p><strong>æ¬§ç³»ä¼ºæœé©±åŠ¨</strong></p>
<p>æ¯”å¦‚æˆ‘ä»¬ç†ŸçŸ¥çš„ SINAMICS S210ã€HCS01ç­‰<br>ä»é©±åŠ¨å™¨å¤–å‹ä¸Šçœ‹ï¼Œå¤§éƒ¨åˆ†ä¸»æµçš„æ¬§ç³»ä¼ºæœé©±åŠ¨ï¼Œéƒ½ä¼šé‡‡ç”¨é«˜ã€æ·±ã€è–„çš„ä¹¦æœ¬å¼è®¾è®¡ï¼Œå¹¶ä¸”æ™®éæ”¯æŒæ— ç¼å¹¶åˆ—çš„å®‰è£…æ ·å¼ã€‚è¿™ä¸€ç‚¹å¯ä»¥ä»å‡ æ¬¾ç»å…¸çš„äº§å“å¾ˆæ˜æ˜¾çš„çœ‹å‡ºæ¥ã€‚</p>
]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
  </entry>
  <entry>
    <title>platform  è®¾å¤‡é©±åŠ¨</title>
    <url>/Linux-Lover/latform-%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/</url>
    <content><![CDATA[<p>é©±åŠ¨çš„åˆ†ç¦»ä¸åˆ†å±‚è¿™æ ·çš„è½¯ä»¶æ€è·¯</p>
<p>åˆ†ç¦»ï¼šä¸»æœºé©±åŠ¨å’Œè®¾å¤‡é©±åŠ¨åˆ†éš”å¼€æ¥ã€‚</p>
<p>åˆ†å±‚ï¼šinput å­ç³»ç»Ÿè´Ÿè´£ç®¡ç†æ‰€æœ‰è·Ÿè¾“å…¥æœ‰å…³çš„é©±åŠ¨ï¼ŒåŒ…æ‹¬é”®ç›˜ã€é¼ æ ‡ã€è§¦æ‘¸ç­‰ï¼Œæœ€åº•å±‚çš„å°±æ˜¯è®¾å¤‡åŸå§‹é©±åŠ¨ï¼Œè´Ÿè´£è·å–è¾“å…¥è®¾å¤‡çš„åŸå§‹å€¼ï¼Œè·å–åˆ°çš„è¾“å…¥äº‹ä»¶ä¸ŠæŠ¥ç»™ input æ ¸å¿ƒå±‚ã€‚input æ ¸å¿ƒå±‚ä¼šå¤„ç†å„ç§ IO æ¨¡å‹ï¼Œå¹¶ä¸”æä¾› file_operations æ“ä½œé›†åˆã€‚æˆ‘ä»¬åœ¨ç¼–å†™è¾“å…¥è®¾å¤‡é©±åŠ¨çš„æ—¶å€™åªéœ€è¦å¤„ç†å¥½è¾“å…¥äº‹ä»¶çš„ä¸ŠæŠ¥å³å¯ï¼Œè‡³äºå¦‚ä½•å¤„ç†è¿™äº›ä¸ŠæŠ¥çš„è¾“å…¥äº‹ä»¶é‚£æ˜¯ä¸Šå±‚å»è€ƒè™‘çš„ï¼Œæˆ‘ä»¬ä¸ç”¨ç®¡ã€‚</p>
<p>ä¸»æœºé©±åŠ¨-ã€‹APIå‡½æ•°æ¥å£-ã€‹è®¾å¤‡é©±åŠ¨</p>
<p>æ¯ä¸ªå¹³å°çš„ I2C æ§åˆ¶å™¨éƒ½æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£(ä¹Ÿå«åšä¸»æœºé©±åŠ¨)ï¼Œæ¯ä¸ªè®¾å¤‡çš„è¯ä¹Ÿåªæä¾›ä¸€ä¸ªé©±åŠ¨ç¨‹åº(è®¾å¤‡é©±åŠ¨)ã€‚</p>
<p><strong>platform  æ€»çº¿</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct bus_typeï¼ï¼ï¼</span><br><span class="line"></span><br><span class="line">static int platform_match(struct device *dev,</span><br><span class="line">struct device_driver *drv)</span><br><span class="line">åŒ¹é…æ–¹å¼</span><br><span class="line">1ã€<span class="keyword">if</span> (of_driver_match_device(dev, drv))</span><br><span class="line">æ¯ä¸ªè®¾å¤‡èŠ‚ç‚¹çš„ compatible å±æ€§ä¼šå’Œ of_match_table è¡¨ä¸­çš„æ‰€æœ‰æˆå‘˜æ¯”è¾ƒ,probe å‡½æ•°ï¼Œå½“é©±åŠ¨ä¸è®¾å¤‡åŒ¹é…æˆåŠŸä»¥å probe å‡½æ•°å°±ä¼šæ‰§è¡Œ</span><br><span class="line">2ã€<span class="keyword">if</span> (acpi_driver_match_device(dev, drv))</span><br><span class="line">ACPI åŒ¹é…æ–¹å¼ã€‚</span><br><span class="line">3ã€<span class="keyword">if</span> (pdrv-&gt;id_table)</span><br><span class="line">id_table åŒ¹é…ï¼Œæ¯ä¸ª platform_driver ç»“æ„ä½“æœ‰ä¸€ä¸ª id_table</span><br><span class="line">æˆå‘˜å˜é‡ï¼Œé¡¾åæ€ä¹‰ï¼Œä¿å­˜äº†å¾ˆå¤š id ä¿¡æ¯ã€‚è¿™äº› id ä¿¡æ¯å­˜æ”¾ç€è¿™ä¸ª platformd é©±åŠ¨æ‰€æ”¯æŒçš„é©±</span><br><span class="line">åŠ¨ç±»å‹ã€‚</span><br><span class="line">4ã€<span class="built_in">return</span> (strcmp(pdev-&gt;name, drv-&gt;name) == 0);</span><br><span class="line">ç›´æ¥æ¯”è¾ƒé©±åŠ¨å’Œè®¾å¤‡çš„ name å­—æ®µ</span><br></pre></td></tr></table></figure>
<p><strong>platform  é©±åŠ¨</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">include/linux/platform_device.h </span><br><span class="line"></span><br><span class="line">å®šä¹‰å¹¶åˆå§‹åŒ–å¥½ platform_driver ç»“æ„ä½“å˜é‡-&gt; å…¥å£æ³¨å†ŒLinux å†…æ ¸æ³¨å†Œä¸€ä¸ª platform é©±åŠ¨ï¼Œplatform_driver_register -&gt;å‡ºå£å¸è½½void platform_driver_unregister(struct platform_driver *drv)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">platform é©±åŠ¨è¿˜æ˜¯ä¼ ç»Ÿçš„å­—ç¬¦è®¾å¤‡é©±åŠ¨ã€å—è®¾å¤‡é©±åŠ¨æˆ–ç½‘ç»œè®¾å¤‡é©±åŠ¨ï¼Œç›®çš„æ˜¯ä¸ºäº†ä½¿ç”¨æ€»çº¿ã€é©±åŠ¨å’Œè®¾å¤‡è¿™ä¸ªé©±åŠ¨æ¨¡å‹æ¥å®ç°é©±åŠ¨çš„åˆ†ç¦»ä¸åˆ†å±‚ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>platform  è®¾å¤‡</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">include/linux/platform_device.h</span><br><span class="line">ä¸æ”¯æŒè®¾å¤‡æ ‘çš„ Linux ç‰ˆæœ¬ä¸­ä½¿ç”¨çš„</span><br><span class="line">int platform_device_register(struct platform_device *pdev</span><br><span class="line">void platform_device_unregister(struct platform_device *pdev)</span><br><span class="line"></span><br><span class="line">æ”¯æŒè®¾å¤‡æ•°ç‰ˆæœ¬ï¼Œä»è®¾å¤‡æ ‘ä¸­è¯»å–è®¾å¤‡ä¿¡æ¯ï¼Œç„¶åå°†å…¶ç»„ç»‡æˆ platform_device å½¢å¼</span><br></pre></td></tr></table></figure>
<p>ls /sys/bus/platform/ æ ¹æ–‡ä»¶ç³»ç»Ÿç›®å½•ä¸‹æŸ¥çœ‹deviceã€driver</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼‚æ­¥é€šçŸ¥</title>
    <url>/Linux-Lover/%E6%AD%A5%E9%80%9A%E7%9F%A5/</url>
    <content><![CDATA[<p><strong>å¤ä¹ ï¼šé˜»å¡IOä¸éé˜»å¡IO</strong></p>
<p>Linux åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡é˜»å¡æˆ–è€…éé˜»å¡è¿™ä¸¤ç§æ–¹å¼æ¥è®¿é—®é©±åŠ¨è®¾å¤‡ï¼Œé€šè¿‡é˜»å¡æ–¹å¼è®¿é—®çš„è¯åº”ç”¨ç¨‹åºä¼šå¤„äºä¼‘çœ æ€ï¼Œç­‰å¾…é©±åŠ¨è®¾å¤‡å¯ä»¥ä½¿ç”¨ï¼Œéé˜»å¡æ–¹å¼çš„è¯ä¼šé€šè¿‡ poll å‡½æ•°æ¥ä¸æ–­çš„è½®è¯¢ï¼ŒæŸ¥çœ‹é©±åŠ¨è®¾å¤‡æ–‡ä»¶æ˜¯å¦å¯ä»¥ä½¿ç”¨ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½éœ€è¦åº”ç”¨ç¨‹åºä¸»åŠ¨çš„å»æŸ¥è¯¢è®¾å¤‡çš„ä½¿ç”¨æƒ…å†µï¼Œå¦‚æœèƒ½æä¾›ä¸€ç§ç±»ä¼¼ä¸­æ–­çš„æœºåˆ¶ï¼Œå½“é©±åŠ¨ç¨‹åºå¯ä»¥è®¿é—®çš„æ—¶å€™ä¸»åŠ¨å‘Šè¯‰åº”ç”¨ç¨‹åºé‚£å°±æœ€å¥½äº†ã€‚</p>
<p>é©±åŠ¨ç¨‹åºèƒ½ä¸»åŠ¨å‘åº”ç”¨ç¨‹åºå‘å‡ºé€šçŸ¥ï¼ŒæŠ¥å‘Šè‡ªå·±å¯ä»¥è®¿é—®ï¼Œç„¶ååº”ç”¨ç¨‹åºåœ¨ä»é©±åŠ¨ç¨‹åºä¸­è¯»å–æˆ–å†™å…¥æ•°æ®ã€‚<br>å¼‚æ­¥é€šçŸ¥çš„æ ¸å¿ƒå°±æ˜¯ä¿¡å·ï¼Œåœ¨ arch/xtensa/include/uapi/asm/signal.h </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">34 <span class="comment">#define SIGHUP 1 /* ç»ˆç«¯æŒ‚èµ·æˆ–æ§åˆ¶è¿›ç¨‹ç»ˆæ­¢ */</span></span><br><span class="line">35 <span class="comment">#define SIGINT 2 /* ç»ˆç«¯ä¸­æ–­(Ctrl+C ç»„åˆé”®) */</span></span><br><span class="line">36 <span class="comment">#define SIGQUIT 3 /* ç»ˆç«¯é€€å‡º(Ctrl+\ç»„åˆé”®) */</span></span><br><span class="line">37 <span class="comment">#define SIGILL 4 /* éæ³•æŒ‡ä»¤ */</span></span><br><span class="line">38 <span class="comment">#define SIGTRAP 5 /* debug ä½¿ç”¨ï¼Œæœ‰æ–­ç‚¹æŒ‡ä»¤äº§ç”Ÿ  */</span></span><br><span class="line">39 <span class="comment">#define SIGABRT 6 /* ç”± abort(3)å‘å‡ºçš„é€€å‡ºæŒ‡ä»¤ */</span></span><br><span class="line">40 <span class="comment">#define SIGIOT 6 /* IOT æŒ‡ä»¤ */</span></span><br><span class="line">41 <span class="comment">#define SIGBUS 7 /* æ€»çº¿é”™è¯¯ */</span></span><br><span class="line">42 <span class="comment">#define SIGFPE 8 /* æµ®ç‚¹è¿ç®—é”™è¯¯ */</span></span><br><span class="line">43 <span class="comment">#define SIGKILL 9 /* æ€æ­»ã€ç»ˆæ­¢è¿›ç¨‹ */</span></span><br><span class="line">44 <span class="comment">#define SIGUSR1 10 /* ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å· 1 */</span></span><br><span class="line">45 <span class="comment">#define SIGSEGV 11 /* æ®µè¿ä¾‹(æ— æ•ˆçš„å†…å­˜æ®µ) */</span></span><br><span class="line">46 <span class="comment">#define SIGUSR2 12 /* ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å· 2 */</span></span><br><span class="line">47 <span class="comment">#define SIGPIPE 13 /* å‘éè¯»ç®¡é“å†™å…¥æ•°æ® */</span></span><br><span class="line">48 <span class="comment">#define SIGALRM 14 /* é—¹é’Ÿ */</span></span><br><span class="line">49 <span class="comment">#define SIGTERM 15 /* è½¯ä»¶ç»ˆæ­¢ */</span></span><br><span class="line">50 <span class="comment">#define SIGSTKFLT 16 /* æ ˆå¼‚å¸¸ */</span></span><br><span class="line">51 <span class="comment">#define SIGCHLD 17 /* å­è¿›ç¨‹ç»“æŸ */</span></span><br><span class="line">52 <span class="comment">#define SIGCONT 18 /* è¿›ç¨‹ç»§ç»­ */</span></span><br><span class="line">53 <span class="comment">#define SIGSTOP 19 /* åœæ­¢è¿›ç¨‹çš„æ‰§è¡Œï¼Œåªæ˜¯æš‚åœ */</span></span><br><span class="line">54 <span class="comment">#define SIGTSTP 20 /* åœæ­¢è¿›ç¨‹çš„è¿è¡Œ(Ctrl+Z ç»„åˆé”®) */</span></span><br><span class="line">55 <span class="comment">#define SIGTTIN 21 /* åå°è¿›ç¨‹éœ€è¦ä»ç»ˆç«¯è¯»å–æ•°æ®  */</span></span><br><span class="line">56 <span class="comment">#define SIGTTOU 22 /* åå°è¿›ç¨‹éœ€è¦å‘ç»ˆç«¯å†™æ•°æ® */</span></span><br><span class="line">57 <span class="comment">#define SIGURG 23 /* æœ‰"ç´§æ€¥"æ•°æ® */</span></span><br><span class="line">58 <span class="comment">#define SIGXCPU 24 /* è¶…è¿‡ CPU èµ„æºé™åˆ¶ */</span></span><br><span class="line">59 <span class="comment">#define SIGXFSZ 25 /* æ–‡ä»¶å¤§å°è¶…é¢ */</span></span><br><span class="line">60 <span class="comment">#define SIGVTALRM 26 /* è™šæ‹Ÿæ—¶é’Ÿä¿¡å· */</span></span><br><span class="line">61 <span class="comment">#define SIGPROF 27 /* æ—¶é’Ÿä¿¡å·æè¿° */</span></span><br><span class="line">62 <span class="comment">#define SIGWINCH 28 /* çª—å£å¤§å°æ”¹å˜ */</span></span><br><span class="line">63 <span class="comment">#define SIGIO 29 /* å¯ä»¥è¿›è¡Œè¾“å…¥/è¾“å‡ºæ“ä½œ */</span></span><br><span class="line">64 <span class="comment">#define SIGPOLL SIGIO</span></span><br><span class="line">65 /* <span class="comment">#define SIGLOS 29 */</span></span><br><span class="line">66 <span class="comment">#define SIGPWR 30 /* æ–­ç‚¹é‡å¯ */</span></span><br><span class="line">67 <span class="comment">#define SIGSYS 31 /* éæ³•çš„ç³»ç»Ÿè°ƒç”¨ */</span></span><br><span class="line">68 <span class="comment">#define SIGUNUSED 31 /* æœªä½¿ç”¨ä¿¡å· */</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¿¡å·</strong></p>
<p>1ã€ä¿¡å·å¤„ç†å‡½æ•°<br>sighandler_t signal(int signum, sighandler_t handler)<br>å‚æ•°ï¼šsignumï¼šè¦è®¾ç½®å¤„ç†å‡½æ•°çš„ä¿¡å·ã€handler ï¼šä¿¡å·çš„å¤„ç†å‡½æ•°</p>
<p>2ã€é©±åŠ¨ä¸­çš„ä¿¡å·å¤„ç†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¸»è¦ï¼šstruct fasync_struct *async_queue; /* å¼‚æ­¥ç›¸å…³ç»“æ„ä½“ */ </span><br><span class="line"></span><br><span class="line">æ¡†æ¶ï¼š</span><br><span class="line"> struct xxx_dev &#123;</span><br><span class="line"> ......</span><br><span class="line"> struct fasync_struct *async_queue; /* å¼‚æ­¥ç›¸å…³ç»“æ„ä½“ */</span><br><span class="line"> &#125;;</span><br><span class="line"> static int xxx_fasync(int fd, struct file *filp, int on)</span><br><span class="line"> &#123;</span><br><span class="line"> struct xxx_dev *dev = (xxx_dev)filp-&gt;private_data;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (fasync_helper(fd, filp, on, &amp;dev-&gt;async_queue) &lt; 0)</span><br><span class="line"> <span class="built_in">return</span> -EIO;</span><br><span class="line"> <span class="built_in">return</span> 0;</span><br><span class="line"> &#125;</span><br><span class="line">static struct file_operations xxx_ops = &#123;</span><br><span class="line"> ......</span><br><span class="line"> .fasync = xxx_fasync,</span><br><span class="line">......</span><br><span class="line"> &#125;;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> /*é‡Šæ”¾*/</span><br><span class="line"> static int xxx_release(struct inode *inode, struct file *filp)</span><br><span class="line">&#123;</span><br><span class="line"> <span class="built_in">return</span> xxx_fasync(-1, filp, 0); /*  åˆ é™¤å¼‚æ­¥é€šçŸ¥ */</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>3ã€kill_syncå‡½æ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1 ã€kill_fasync  å‡½æ•°</span><br><span class="line">å½“è®¾å¤‡å¯ä»¥è®¿é—®çš„æ—¶å€™ï¼Œé©±åŠ¨ç¨‹åºéœ€è¦å‘åº”ç”¨ç¨‹åºå‘å‡ºä¿¡å·ï¼Œç›¸å½“äºäº§ç”Ÿâ€œä¸­æ–­â€ã€‚kill_fasync</span><br><span class="line">å‡½æ•°è´Ÿè´£å‘é€æŒ‡å®šçš„ä¿¡å·ï¼Œkill_fasync å‡½æ•°åŸå‹å¦‚ä¸‹æ‰€ç¤ºï¼š</span><br><span class="line">void kill_fasync(struct fasync_struct **fp, int sig, int band)</span><br><span class="line">å‡½æ•°å‚æ•°å’Œè¿”å›å€¼å«ä¹‰å¦‚ä¸‹ï¼š</span><br><span class="line">fpï¼šè¦æ“ä½œçš„ fasync_structã€‚</span><br><span class="line">sig ï¼šè¦å‘é€çš„ä¿¡å·ã€‚</span><br><span class="line">band ï¼šå¯è¯»æ—¶è®¾ç½®ä¸º POLL_INï¼Œå¯å†™æ—¶è®¾ç½®ä¸º POLL_OUTã€‚</span><br><span class="line">è¿”å›å€¼ï¼šæ— ã€‚</span><br></pre></td></tr></table></figure>

<p>4ã€åº”ç”¨å±‚</p>
<p>1ã€æ³¨å†Œä¿¡å·å‡½æ•°-&gt;signal()<br>2ã€å°†è¿›ç¨‹å·å‘Šè¯‰ç»™å†…æ ¸-&gt; fcntl(fd, F_SETOWN, getpid())<br>3ã€å¼€å¯å¼‚æ­¥é€šçŸ¥<br>-&gt;&gt;flags = fcntl(fd, F_GETFL); /* è·å–å½“å‰çš„è¿›ç¨‹çŠ¶æ€<em>/<br>-&gt;&gt;fcntl(fd, F_SETFL, flags | FASYNC); /</em> å¼€å¯å½“å‰è¿›ç¨‹å¼‚æ­¥é€šçŸ¥åŠŸèƒ½ */</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>container_ofå‡½æ•°ğŸƒ</title>
    <url>/Linux-Lover/container-of%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<p>Container_ofåœ¨Linuxå†…æ ¸ä¸­æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å®.<br> é€šè¿‡ç»“æ„ä½“å˜é‡ä¸­æŸä¸ªæˆå‘˜çš„é¦–åœ°å€è¿›è€Œè·å¾—æ•´ä¸ªç»“æ„ä½“å˜é‡çš„é¦–åœ°å€ã€‚<br> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line">hanshucontainer_of(ptr, <span class="built_in">type</span>, member)Â </span><br><span class="line">ptr:è¡¨ç¤ºç»“æ„ä½“ä¸­memberçš„åœ°å€</span><br><span class="line"><span class="built_in">type</span>:è¡¨ç¤ºç»“æ„ä½“ç±»å‹</span><br><span class="line">member:è¡¨ç¤ºç»“æ„ä½“ä¸­çš„æˆå‘˜</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void key_work(struct work_struct *work)</span><br><span class="line">&#123;</span><br><span class="line">    printk(<span class="string">"work è°ƒç”¨å¤„ç†ä¸‹åŠåŒº\r\n"</span>);</span><br><span class="line">    struct imx6uirq_dev *dev = container_of(work,struct imx6uirq_dev,work);</span><br><span class="line">      </span><br><span class="line">    /*æ¶ˆé™¤æŠ–åŠ¨å¤„ç† 10ms*/</span><br><span class="line">    dev-&gt;timer.data = (unsigned long)dev; /*æŒ‡å®šè®¾å¤‡*/</span><br><span class="line">    mod_timer(&amp;dev-&gt;timer, jiffies + msecs_to_jiffies(10));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç»“æ„ä½“ä¸èƒ½å¼ºåˆ¶è½¬æ¢ç±»å‹ï¼Œä½†æ˜¯åœ°å€ï¼ˆæŒ‡é’ˆå¯ä»¥ï¼‰!!!!ğŸŒï¸</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>å‘é‡ï¼Œé“¾è¡¨ï¼Œé˜Ÿåˆ—ï¼Ÿ</title>
    <url>/C-C-Lover/%E9%87%8F%EF%BC%8C%E9%93%BE%E8%A1%A8%EF%BC%8C%E9%98%9F%E5%88%97%EF%BC%9F/</url>
    <content><![CDATA[<p><strong>å‘é‡ï¼Œé“¾è¡¨ï¼Œé˜Ÿåˆ—ï¼Ÿ</strong></p>
<p><strong>vector</strong></p>
<p>å­˜å‚¨ç‰¹ç‚¹ï¼šè¿ç»­å­˜å‚¨çš„å®¹å™¨ï¼ŒåŠ¨æ€æ•°ç»„ï¼Œåœ¨å †ä¸Šåˆ†é…ç©ºé—´<br>åº•å±‚å®ç°ï¼šæ•°ç»„<br>ä¸¤å€å®¹é‡å¢é•¿ï¼šç©ºé—´ä¸å¤Ÿ<br>æ’å…¥æ–¹å¼ï¼š<br>        ï¼ˆ1ï¼‰åœ¨æœ€åæ’å…¥ï¼ˆç©ºé—´å¤Ÿï¼‰ï¼šå¾ˆå¿«ï¼Œï¼ˆç©ºé—´ä¸å¤Ÿï¼‰éœ€è¦å†…å­˜ç”³è¯·å’Œé‡Šæ”¾ï¼Œä»¥åŠå¯¹ä¹‹å‰æ•°æ®è¿›è¡Œæ‹·è´ã€‚<br>        ï¼ˆ2ï¼‰åœ¨ä¸­é—´æ’å…¥ï¼ˆç©ºé—´å¤Ÿï¼‰ï¼šå†…å­˜æ‹·è´ï¼Œï¼ˆç©ºé—´ä¸å¤Ÿï¼‰éœ€è¦å†…å­˜ç”³è¯·å’Œé‡Šæ”¾ï¼Œä»¥åŠå¯¹ä¹‹å‰æ•°æ®è¿›è¡Œæ‹·è´ã€‚<br>ä½¿ç”¨åœºæ™¯ï¼šæ”¯æŒéšæœºè®¿é—®ï¼Œå¦‚æœéœ€è¦é«˜æ•ˆçš„éšå³è®¿é—®ï¼Œè€Œä¸åœ¨ä¹æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡</p>
<p><strong>List</strong></p>
<p>å­˜å‚¨ç‰¹ç‚¹ï¼šåŠ¨æ€é“¾è¡¨ï¼Œåœ¨å †ä¸Šåˆ†é…ç©ºé—´ï¼Œæ¯æ’å…¥ä¸€ä¸ªå…ƒæ•°éƒ½ä¼šåˆ†é…ç©ºé—´ï¼Œæ¯åˆ é™¤ä¸€ä¸ªå…ƒç´ éƒ½ä¼šé‡Šæ”¾ç©ºé—´ã€‚<br>åº•å±‚ï¼šåŒå‘é“¾è¡¨<br>æ’å…¥ç‰¹æ€§ï¼š<br>        æ’å…¥ï¼šå¾ˆå¿«ï¼Œä¸€èˆ¬æ˜¯å¸¸æ•°å¼€é”€<br>        åˆ é™¤ï¼šå¾ˆå¿«ï¼Œä¸€èˆ¬æ˜¯å¸¸æ•°å¼€é”€<br>é€‚ç”¨åœºæ™¯ï¼šlistæ‹¥æœ‰ä¸€æ®µä¸è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå¦‚æœéœ€è¦é«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤ï¼Œè€Œä¸å…³å¿ƒéšæœºè®¿é—®ï¼Œåˆ™åº”ä½¿ç”¨listã€‚<br>åŒºåˆ«ï¼švectoræ”¯æŒéšæœºè®¿é—®ï¼ˆæ•°ç»„ï¼‰ï¼Œlistä¸æ”¯æŒï¼ˆé“¾è¡¨ï¼‰ã€‚<br>    vectorä¸€æ¬¡æ€§åˆ†é…å¥½å†…å­˜ï¼Œä¸å¤Ÿæ—¶æ‰è¿›è¡Œ2å€æ‰©å®¹ï¼›listæ¯æ¬¡æ’å…¥æ–°èŠ‚ç‚¹éƒ½ä¼šè¿›è¡Œå†…å­˜ç”³è¯·ã€‚</p>
<p><strong>Deque</strong></p>
<p>å­˜å‚¨ç‰¹ç‚¹ï¼š dequeç›¸å¯¹vectorè¾ƒä¸ºæœ‰ä¼˜åŠ¿ã€‚<br>åº•å±‚ï¼š æ•°ç»„<br>æ’å…¥ç‰¹æ€§ï¼š<br>        dequeå¤´éƒ¨å’Œå°¾éƒ¨æ·»åŠ æˆ–ç§»é™¤å…ƒç´ éƒ½éå¸¸å¿«é€Ÿï¼Œå¯ä»¥éšæœºå­˜å–å…ƒç´ ï¼ˆæ”¯æŒç´¢å¼•å€¼ç›´æ¥å­˜å–ï¼Œ ç”¨[]æ“ä½œç¬¦æˆ–at()æ–¹æ³•ï¼Œè¿™ä¸ªç­‰ä¸‹ä¼šè¯¦è®²ï¼‰ã€‚<br>        ä¸­é—´insert()å‡½æ•°ã€‚iterator erase(iteratorpos);<br>é€‚ç”¨åœºæ™¯ï¼šæ”¯æŒéšæœºè®¿é—®å’Œå­˜å–ï¼Œæ”¯æŒä¸‹æ ‡è®¿é—®ï¼Œè€Œä¸”æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡é«˜çš„å®¹å™¨ã€‚</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜»å¡IOä¸éé˜»å¡IO</title>
    <url>/Linux-Lover/%E5%A1%9EIO%E4%B8%8E%E9%9D%9E%E9%98%BB%E5%A1%9EIO/</url>
    <content><![CDATA[<p><strong>é˜»å¡IOä¸éé˜»å¡IO</strong></p>
<p>å½“åº”ç”¨ç¨‹åºå¯¹è®¾å¤‡é©±åŠ¨è¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œå¦‚æœä¸èƒ½è·å–åˆ°è®¾å¤‡èµ„æºï¼Œé‚£ä¹ˆé˜»å¡å¼ IO å°±ä¼šå°†åº”ç”¨ç¨‹åºå¯¹åº”çš„çº¿ç¨‹æŒ‚èµ·ï¼Œç›´åˆ°è®¾å¤‡èµ„æºå¯ä»¥è·å–ä¸ºæ­¢ã€‚å¯¹äºéé˜»å¡ IOï¼Œåº”ç”¨ç¨‹åºå¯¹åº”çš„çº¿ç¨‹ä¸ä¼šæŒ‚èµ·ï¼Œå®ƒè¦ä¹ˆä¸€ç›´è½®è¯¢ç­‰å¾…ï¼Œç›´åˆ°è®¾å¤‡èµ„æºå¯ä»¥ä½¿ç”¨ï¼Œè¦ä¹ˆå°±ç›´æ¥æ”¾å¼ƒ.</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int fd;</span><br><span class="line">int data = 0;</span><br><span class="line">fd = open(<span class="string">"/dev/xxx_dev"</span>, O_RDWR); /* é˜»å¡æ–¹å¼æ‰“å¼€ */</span><br><span class="line">ret = <span class="built_in">read</span>(fd, &amp;data, sizeof(data)); /* è¯»å–æ•°æ® */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int fd;</span><br><span class="line">int data = 0;</span><br><span class="line">fd = open(<span class="string">"/dev/xxx_dev"</span>, O_RDWR | O_NONBLOCK);  /* éé˜»å¡æ–¹å¼æ‰“å¼€ */</span><br><span class="line">ret = <span class="built_in">read</span>(fd, &amp;data, sizeof(data)); /* è¯»å–æ•°æ® */</span><br></pre></td></tr></table></figure>
<p><strong>ç­‰å¾…é˜Ÿåˆ—å¤´ -&gt; é˜»å¡</strong></p>
<p>é˜»å¡è®¿é—®æœ€å¤§çš„å¥½å¤„å°±æ˜¯å½“è®¾å¤‡æ–‡ä»¶ä¸å¯æ“ä½œçš„æ—¶å€™è¿›ç¨‹å¯ä»¥è¿›å…¥ä¼‘çœ æ€ï¼Œè¿™æ ·å¯ä»¥å°†CPU èµ„æºè®©å‡ºæ¥ã€‚ä½†æ˜¯ï¼Œå½“è®¾å¤‡æ–‡ä»¶å¯ä»¥æ“ä½œçš„æ—¶å€™å°±å¿…é¡»å”¤é†’è¿›ç¨‹ï¼Œä¸€èˆ¬åœ¨ä¸­æ–­å‡½æ•°é‡Œé¢å®Œæˆå”¤é†’å·¥ä½œã€‚</p>
<p>1ã€ç­‰å¾…é˜Ÿåˆ—å¤´</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct __wait_queue_head &#123;</span><br><span class="line"> spinlock_t lock;</span><br><span class="line"> struct list_head task_list;</span><br><span class="line"> &#125;;</span><br><span class="line">typedef struct __wait_queue_head wait_queue_head_t;</span><br><span class="line">å®šä¹‰å¥½ç­‰å¾…é˜Ÿåˆ—å¤´ä»¥åéœ€è¦åˆå§‹åŒ– </span><br><span class="line">void init_waitqueue_head(wait_queue_head_t *q)</span><br></pre></td></tr></table></figure>
<p>2ã€ç­‰å¾…é˜Ÿåˆ—é¡¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct __wait_queue &#123;</span><br><span class="line">unsigned int flags;</span><br><span class="line">void *private;</span><br><span class="line">wait_queue_func_t func;</span><br><span class="line">struct list_head task_list;</span><br><span class="line">&#125;;</span><br><span class="line">typedef struct __wait_queue wait_queue_t;</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨å® DECLARE_WAITQUEUE å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—é¡¹ï¼Œå®çš„å†…å®¹å¦‚ä¸‹ï¼š</span><br><span class="line">DECLARE_WAITQUEUE(name, tsk);</span><br><span class="line">name ç­‰å¾…é˜Ÿåˆ—é¡¹çš„åå­—ï¼Œtsk ç­‰å¾…é˜Ÿåˆ—é¡¹æ‰€å±è¿›ç¨‹</span><br></pre></td></tr></table></figure>
<p>3ã€æ·»åŠ ç§»é™¤ç­‰å¾…é˜Ÿåˆ—å¤´</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">è®¾å¤‡ä¸å¯è®¿é—®ï¼Œåªæœ‰æ·»åŠ åˆ°ç­‰å¾…é˜Ÿåˆ—å¤´ä¸­ä»¥åè¿›ç¨‹æ‰èƒ½è¿›å…¥ä¼‘çœ æ€</span><br><span class="line">å¯ä»¥è®¿é—®ä»¥åå†å°†è¿›ç¨‹å¯¹åº”çš„ç­‰å¾…é˜Ÿåˆ—é¡¹ä»ç­‰å¾…é˜Ÿåˆ—å¤´ä¸­ç§»é™¤å³å¯ã€‚</span><br><span class="line"></span><br><span class="line">void add_wait_queue(wait_queue_head_t *q,wait_queue_t *<span class="built_in">wait</span>)</span><br><span class="line"></span><br><span class="line">void remove_wait_queue(wait_queue_head_t *q,</span><br><span class="line">wait_queue_t *<span class="built_in">wait</span>)</span><br></pre></td></tr></table></figure>

<p>4 ã€ç­‰å¾…å”¤é†’</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void wake_up(wait_queue_head_t *q)</span><br><span class="line">void wake_up_interruptible(wait_queue_head_t *q)</span><br></pre></td></tr></table></figure>

<p>5ã€ç­‰å¾…äº‹ä»¶å”¤é†’</p>
<img src="/Linux-Lover/%E5%A1%9EIO%E4%B8%8E%E9%9D%9E%E9%98%BB%E5%A1%9EIO/%E4%BA%8B%E4%BB%B6%E5%87%BD%E6%95%B0.jpg" class>

<p> å®éªŒå°ç»“ï¼šwait_event()ä¸èƒ½è¢«kill- 9 ,å»ºè®®ä½¿ç”¨wait_event_iterruptible()</p>
<p>wait_event(dev-&gt;r_wait,atomic_read(&amp;dev-&gt;releasekey));<br>wake_up(&amp;dev-&gt;r_wait);</p>
<p>-åˆ†å‰²çº¿-</p>
<p>wait_event_interruptible(dev-&gt;r_wait,atomic_read(&amp;dev-&gt;releasekey));<br>wake_up_interruptible(&amp;dev-&gt;r_wait);</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#if 0</span></span><br><span class="line">     wait_event(dev-&gt;r_wait,atomic_read(&amp;dev-&gt;releasekey));</span><br><span class="line"><span class="comment">#endif</span></span><br><span class="line"><span class="comment">#if 0</span></span><br><span class="line">    wait_event_interruptible(dev-&gt;r_wait,atomic_read(&amp;dev-&gt;releasekey));</span><br><span class="line"><span class="comment">#endif</span></span><br><span class="line">    DECLARE_WAITQUEUE(<span class="built_in">wait</span>, current); /*  å®šä¹‰ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ— */</span><br><span class="line">    add_wait_queue(&amp;dev-&gt;r_wait,&amp;<span class="built_in">wait</span>); /*åŠ å…¥é˜Ÿåˆ—*/</span><br><span class="line">        __set_current_state(TASK_INTERRUPTIBLE);/*è®¾ç½®ä¸ºå¯æ‰“æ–­*/</span><br><span class="line">        schedule();  /*åˆ‡æ¢*/</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(signal_pending(current))</span><br><span class="line">        &#123;</span><br><span class="line">            ret = -ERESTARTSYS;</span><br><span class="line">            goto  wait_error;</span><br><span class="line">        &#125;</span><br><span class="line">         __set_current_state(TASK_RUNNING); /*  è®¾ç½®ä»»åŠ¡ä¸ºè¿è¡Œæ€ */</span><br><span class="line">         remove_wait_queue(&amp;dev-&gt;r_wait, &amp;<span class="built_in">wait</span>); /*  å°†ç­‰å¾…é˜Ÿåˆ—ç§»é™¤ */</span><br><span class="line">    keyvalue = atomic_read(&amp;dev-&gt;keyvalue);</span><br><span class="line">    releasekey = atomic_read(&amp;dev-&gt;releasekey);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (releasekey)</span><br><span class="line">     &#123; /* æœ‰æŒ‰é”®æŒ‰ä¸‹ */</span><br><span class="line">        <span class="keyword">if</span> (keyvalue &amp; 0x80)  /*åˆ¤æ–­æœ‰æ•ˆ1000 0000 æ ‡å¿—ä½*/</span><br><span class="line">            &#123;</span><br><span class="line">            keyvalue &amp;= ~0x80;</span><br><span class="line">            ret = copy_to_user(buf, &amp;keyvalue, sizeof(keyvalue));</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">            goto data_error;</span><br><span class="line">            &#125;</span><br><span class="line">            atomic_set(&amp;dev-&gt;releasekey, 0);  /* æŒ‰ä¸‹æ ‡å¿—æ¸…é›¶ */</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="keyword">else</span> &#123;</span><br><span class="line">       goto data_error;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">wait_error:</span><br><span class="line">    __set_current_state(TASK_RUNNING); /*  è®¾ç½®ä»»åŠ¡ä¸ºè¿è¡Œæ€ */</span><br><span class="line">    remove_wait_queue(&amp;dev-&gt;r_wait, &amp;<span class="built_in">wait</span>); /*  å°†ç­‰å¾…é˜Ÿåˆ—ç§»é™¤ */</span><br><span class="line">    data_error:</span><br><span class="line">    <span class="built_in">return</span> -EINVAL;</span><br></pre></td></tr></table></figure>






<p><strong>è½®è¯¢ -&gt; éé˜»å¡</strong></p>
<p>åº”ç”¨ç¨‹åºé€šè¿‡ selectã€epoll æˆ– poll ä½¿ç”¨å‡½æ•°ï¼Œè®¾å¤‡é©±åŠ¨ç¨‹åºä¸­çš„ poll å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚</p>
<p>1ã€selectå‡½æ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int select(int nfds,</span><br><span class="line">        fd_set *readfds,</span><br><span class="line">        fd_set *writefds,</span><br><span class="line">        fd_set *exceptfds,</span><br><span class="line">        struct timeval *timeout)</span><br><span class="line"></span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">nfds ï¼šè¦æ“ä½œçš„æ–‡ä»¶æè¿°ç¬¦ä¸ªæ•°</span><br><span class="line">readfds ç”¨äºç›‘è§†æŒ‡å®šæè¿°ç¬¦é›†çš„è¯»å˜åŒ–</span><br><span class="line">writefs ç”¨äºç›‘è§†è¿™äº›æ–‡ä»¶æ˜¯å¦å¯ä»¥è¿›è¡Œå†™æ“</span><br><span class="line">exceptfds ç”¨äºç›‘è§†è¿™äº›æ–‡ä»¶çš„å¼‚å¸¸</span><br><span class="line">timeoutè¶…æ—¶æ—¶é—´</span><br><span class="line">å®šä¹‰ä¸€ä¸ª fd_set å˜é‡</span><br><span class="line">void FD_ZERO(fd_set *<span class="built_in">set</span>) Â  Â 	  å…¨éƒ¨æ¸…é›¶</span><br><span class="line">void FD_SET(int fd, fd_set *<span class="built_in">set</span>) Â  æŸä½åŠ 1</span><br><span class="line">void FD_CLR(int fd, fd_set *<span class="built_in">set</span>)	æŸä½æ¸…0</span><br><span class="line">int FD_ISSET(int fd, fd_set *<span class="built_in">set</span>)	æ˜¯å¦å¯ä»¥è¿›è¡Œæ“ä½œ</span><br><span class="line"></span><br><span class="line">selectæ¡†æ¶</span><br><span class="line">void main(void)</span><br><span class="line">&#123;</span><br><span class="line">  int ret, fd; /* è¦ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦ */</span><br><span class="line">  fd_set readfds; /* è¯»æ“ä½œæ–‡ä»¶æè¿°ç¬¦é›† */</span><br><span class="line">  struct timeval timeout; /* è¶…æ—¶ç»“æ„ä½“ */</span><br><span class="line"></span><br><span class="line">  fd = open(<span class="string">"dev_xxx"</span>, O_RDWR | O_NONBLOCK); </span><br><span class="line">  /* éé˜»å¡å¼è®¿é—® */</span><br><span class="line">   FD_ZERO(&amp;readfds); /* æ¸…é™¤ readfds */</span><br><span class="line">   FD_SET(fd, &amp;readfds);/* å°† fd æ·»åŠ åˆ° readfds é‡Œé¢ */</span><br><span class="line">   /* æ„é€ è¶…æ—¶æ—¶é—´ */</span><br><span class="line">   timeout.tv_sec = 0;</span><br><span class="line">   timeout.tv_usec = 500000; /* 500ms */</span><br><span class="line">   ret = select(fd + 1, &amp;readfds, NULL, NULL, &amp;timeout);</span><br><span class="line">   switch (ret) &#123;</span><br><span class="line">   <span class="keyword">case</span> 0: /* è¶…æ—¶ */</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"timeout!\r\n"</span>);</span><br><span class="line">   <span class="built_in">break</span>;</span><br><span class="line">   <span class="keyword">case</span> -1: /* é”™è¯¯ */</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"error!\r\n"</span>);</span><br><span class="line">   <span class="built_in">break</span>;</span><br><span class="line">   default: /* å¯ä»¥è¯»å–æ•°æ® */</span><br><span class="line">   <span class="keyword">if</span>(FD_ISSET(fd, &amp;readfds)) &#123; /* åˆ¤æ–­æ˜¯å¦ä¸º fd æ–‡ä»¶æè¿°ç¬¦ */</span><br><span class="line">   /* ä½¿ç”¨ <span class="built_in">read</span> å‡½æ•°è¯»å–æ•°æ® */</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>2 ã€pollå‡½æ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">åœ¨å•ä¸ªçº¿ç¨‹ä¸­ï¼Œselect å‡½æ•°èƒ½å¤Ÿç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡æœ‰æœ€å¤§çš„é™åˆ¶ï¼Œä¸€èˆ¬ä¸º 1024ï¼Œå¯ä»¥ä¿®æ”¹å†…æ ¸å°†ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡æ”¹å¤§ï¼Œä½†æ˜¯è¿™æ ·ä¼šé™ä½æ•ˆç‡ï¼è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨ poll å‡½æ•°ï¼Œ</span><br><span class="line">poll å‡½æ•°æœ¬è´¨ä¸Šå’Œ select æ²¡æœ‰å¤ªå¤§çš„å·®åˆ«ï¼Œä½†æ˜¯ poll å‡½æ•°æ²¡æœ‰æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚</span><br><span class="line">int poll(struct pollfd *fds,</span><br><span class="line">          nfds_t nfds,</span><br><span class="line">          int timeout)</span><br><span class="line">fdsè¦ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆä»¥åŠè¦ç›‘è§†çš„äº‹ä»¶    </span><br><span class="line">struct pollfd &#123;</span><br><span class="line">      int fd; /* æ–‡ä»¶æè¿°ç¬¦ */</span><br><span class="line">      short events; /* è¯·æ±‚çš„äº‹ä»¶ */</span><br><span class="line">      short revents; /* è¿”å›çš„äº‹ä»¶ */</span><br><span class="line">&#125;;          </span><br><span class="line">nfdsï¼špoll å‡½æ•°è¦ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡  </span><br><span class="line">timeout ï¼šè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸º msã€‚</span><br><span class="line">å¯ç›‘è§†çš„äº‹ä»¶ç±»å‹:</span><br><span class="line">    POLLIN æœ‰æ•°æ®å¯ä»¥è¯»å–ã€‚</span><br><span class="line">    POLLPRI æœ‰ç´§æ€¥çš„æ•°æ®éœ€è¦è¯»å–ã€‚</span><br><span class="line">    POLLOUT  å¯ä»¥å†™æ•°æ®ã€‚</span><br><span class="line">    POLLERR  æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦å‘ç”Ÿé”™è¯¯ã€‚</span><br><span class="line">    POLLHUP  æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦æŒ‚èµ·ã€‚</span><br><span class="line">    POLLNVAL æ— æ•ˆçš„è¯·æ±‚ã€‚</span><br><span class="line">    POLLRDNORM  ç­‰åŒäº POLLIN</span><br><span class="line">ä¾‹</span><br><span class="line"></span><br><span class="line">void main(void)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">int ret;</span><br><span class="line">int fd; /* è¦ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦ */</span><br><span class="line">struct pollfd fds;</span><br><span class="line">fd = open(filename, O_RDWR | O_NONBLOCK); /* éé˜»å¡å¼è®¿é—® */</span><br><span class="line"></span><br><span class="line">fds.fd = fd;</span><br><span class="line">fds.events = POLLIN; /* ç›‘è§†æ•°æ®æ˜¯å¦å¯ä»¥è¯»å–*/</span><br><span class="line"></span><br><span class="line">ret = poll(&amp;fds, 1, 500); /* è½®è¯¢æ–‡ä»¶æ˜¯å¦å¯æ“ä½œï¼Œè¶…æ—¶ 500ms */</span><br><span class="line"><span class="keyword">if</span> (ret) &#123; /* æ•°æ®æœ‰æ•ˆ */</span><br><span class="line"> ......</span><br><span class="line">/* è¯»å–æ•°æ® */</span><br><span class="line"> ......</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ret == 0) &#123; /* è¶…æ—¶ */</span><br><span class="line"> ......</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ret &lt; 0) &#123; /* é”™è¯¯ */</span><br><span class="line"> ......</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 ã€epoll  å‡½æ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¼ ç»Ÿçš„ selcet å’Œ poll å‡½æ•°éƒ½ä¼šéšç€æ‰€ç›‘å¬çš„ fd æ•°é‡çš„å¢åŠ ï¼Œå‡ºç°æ•ˆç‡ä½ä¸‹çš„é—®é¢˜ï¼Œè€Œä¸”poll å‡½æ•°æ¯æ¬¡å¿…é¡»éå†æ‰€æœ‰çš„æè¿°ç¬¦æ¥æ£€æŸ¥å°±ç»ªçš„æè¿°ç¬¦ï¼Œè¿™ä¸ªè¿‡ç¨‹å¾ˆæµªè´¹æ—¶é—´ã€‚ä¸ºæ­¤ï¼Œepollå› è¿è€Œç”Ÿï¼Œepoll å°±æ˜¯ä¸ºå¤„ç†å¤§å¹¶å‘è€Œå‡†å¤‡çš„ï¼Œä¸€èˆ¬å¸¸å¸¸åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ä½¿ç”¨ epoll å‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int epoll_create(int size)</span><br><span class="line"></span><br><span class="line">int epoll_ctl(int epfd,</span><br><span class="line">          int op,</span><br><span class="line">          int  fd,</span><br><span class="line">          struct epoll_event *event)</span><br><span class="line"></span><br><span class="line">nt epoll_wait(int epfd,</span><br><span class="line">          struct epoll_event *events,</span><br><span class="line">          int maxevents,</span><br><span class="line">          int timeout)</span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥è¯¢å®éªŒ</strong></p>
<p>``bash</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">__Linux  é©±åŠ¨ä¸‹çš„ poll__</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;bash</span><br><span class="line"></span><br><span class="line">unsigned int (*poll) (struct file *filp, struct poll_table_struct *wait)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void poll_wait(struct file * filp, wait_queue_head_t * wait_address, poll_table *p)</span><br><span class="line"></span><br><span class="line">å‚æ•° wait_address æ˜¯è¦æ·»åŠ åˆ° poll_table ä¸­çš„ç­‰å¾…é˜Ÿåˆ—å¤´ï¼Œå‚æ•° p å°±æ˜¯ poll_tableï¼Œå°±æ˜¯</span><br><span class="line">file_operations ä¸­ poll å‡½æ•°çš„ wait å‚æ•°</span><br></pre></td></tr></table></figure>
<p><strong>å®éªŒéƒ¨åˆ†</strong></p>
<p>1ã€é©±åŠ¨å±‚éƒ¨åˆ†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">static struct file_operations imx6uirq_fops = &#123;</span><br><span class="line">            .owner = THIS_MODULE,</span><br><span class="line">            .open = imx6uirq_open,</span><br><span class="line">            .<span class="built_in">read</span> = imx6uirq_read,</span><br><span class="line">            .poll = imx6uirq_poll,</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static unsigned int imx6uirq_poll(struct file *filp ,struct poll_table_struct *<span class="built_in">wait</span>)</span><br><span class="line">&#123;</span><br><span class="line">    int mask = 0;</span><br><span class="line">    struct  imx6uirq_dev *dev = filp -&gt;private_data;</span><br><span class="line"></span><br><span class="line">    poll_wait(filp,&amp;dev-&gt;r_wait,<span class="built_in">wait</span>);</span><br><span class="line">    /*è¿”å›åº”ç”¨å±‚æ˜¯å¦å¯è¯»*/</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(atomic_read(&amp;dev-&gt;releasekey))</span><br><span class="line">    &#123;</span><br><span class="line">        mask = POLL_IN | POLLRDNORM ;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> mask ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€åº”ç”¨å±‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/stat.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;fcntl.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;string.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/ioctl.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#include "poll.h"</span></span><br><span class="line"> <span class="comment">#include "sys/select.h"</span></span><br><span class="line"> <span class="comment">#include "sys/time.h"</span></span><br><span class="line"> <span class="comment">#include "linux/ioctl.h"</span></span><br><span class="line">/*</span><br><span class="line"> *argc:åº”ç”¨ç¨‹åºå‚æ•°ä¸ªæ•°</span><br><span class="line"> *argv[]:å…·ä½“çš„å‚æ•°å†…å®¹ï¼Œå­—ç¬¦ä¸²å½¢å¼ </span><br><span class="line"> *./ledAPP  &lt;filename&gt;  &lt;0:1&gt; 0è¡¨ç¤ºå…³ç¯ï¼Œ1è¡¨ç¤ºå¼€ç¯</span><br><span class="line"> * ./ledAPP /dev/dtsled 0    å…³ç¯</span><br><span class="line"> * ./ledAPP /dev/dtsled 1    å¼€ç¯</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*IOctrl å‘½ä»¤*/</span><br><span class="line"><span class="comment">#define CLOSE_CMD (_IO(0XEF, 0x1)) /* å…³é—­å®šæ—¶å™¨ */</span></span><br><span class="line"><span class="comment">#define OPEN_CMD (_IO(0XEF, 0x2)) /* æ‰“å¼€å®šæ—¶å™¨ */</span></span><br><span class="line"><span class="comment">#define SETPERIOD_CMD (_IO(0XEF, 0x3)) /* è®¾ç½®å®šæ—¶å™¨å‘¨æœŸå‘½ä»¤ */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    int fd;</span><br><span class="line">    int ret ;</span><br><span class="line">    char *filename;</span><br><span class="line"></span><br><span class="line">    /*select */</span><br><span class="line">    unsigned char data;</span><br><span class="line">    struct timeval timeout;</span><br><span class="line">    fd_set readfds;</span><br><span class="line">    /*poll*/</span><br><span class="line">    struct pollfd  fds;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(argc != 2)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Error Usage!\r\n"</span>);</span><br><span class="line">        <span class="built_in">return</span> -1;</span><br><span class="line">    &#125;</span><br><span class="line">    filename = argv[1];</span><br><span class="line">    fd = open(filename,O_RDWR|O_NONBLOCK);</span><br><span class="line">    <span class="keyword">if</span>(fd &lt; 0)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"file %s open failed!\r\n"</span>, argv[1]);</span><br><span class="line">         <span class="built_in">return</span> -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        fds.fd = fd ;</span><br><span class="line">        fds.events = POLLIN;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span> (1)</span><br><span class="line">    &#123;</span><br><span class="line">       ret = poll(&amp;fds,1,2000);/*äº‹ä»¶ã€æ•°é‡1ã€è¶…æ—¶2s*/</span><br><span class="line">        <span class="keyword">if</span>(ret)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(data)</span><br><span class="line">            &#123;</span><br><span class="line">                ret = <span class="built_in">read</span>(fd, &amp;data, sizeof(data));</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(ret &lt; 0)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"read error !!! \r\n"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"key value = %d \r\n"</span>,data);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ret == 0)</span><br><span class="line">        &#123;</span><br><span class="line">                   <span class="built_in">printf</span>(<span class="string">" time out!!!\r\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ret &lt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">                   <span class="built_in">printf</span>(<span class="string">"poll error\r\n"</span>);  </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#if 0</span></span><br><span class="line">    <span class="keyword">while</span>(1)</span><br><span class="line">    &#123;</span><br><span class="line">            FD_ZERO(&amp;readfds);</span><br><span class="line">            FD_SET(fd, &amp;readfds);</span><br><span class="line">            timeout.tv_sec = 0;</span><br><span class="line">            timeout.tv_usec = 5000000;</span><br><span class="line"></span><br><span class="line">        ret = select(fd+1,&amp;readfds,NULL,NULL,&amp;timeout);</span><br><span class="line">        switch (ret)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> 0:</span><br><span class="line">            /* ç”¨æˆ·è‡ªå®šä¹‰è¶…æ—¶å¤„ç† */</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"time out !!!\r\n"</span>);</span><br><span class="line">            <span class="built_in">break</span>;</span><br><span class="line">        <span class="keyword">case</span> -1:</span><br><span class="line">            /* ç”¨æˆ·é”™è¯¯ */</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"select error!!!\r\n"</span>);</span><br><span class="line"></span><br><span class="line">        default:</span><br><span class="line">            <span class="keyword">if</span>(FD_ISSET(fd, &amp;readfds))</span><br><span class="line">            &#123;</span><br><span class="line">                    ret = <span class="built_in">read</span>(fd, &amp;data, sizeof(data));</span><br><span class="line">            <span class="keyword">if</span>(ret &lt; 0)</span><br><span class="line">               &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"rwad error !!!"</span>);</span><br><span class="line">               &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">               <span class="keyword">if</span>(data)</span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="built_in">printf</span>(<span class="string">"key value = %d \r\n"</span>,data);</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">#endif</span></span><br><span class="line">    close(fd);</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>






















]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>çƒ­ç”µå¼ä¼ æ„Ÿå™¨</title>
    <url>/Circuit-Lover/%E7%83%AD%E7%94%B5%E5%BC%8F%E4%BC%A0%E6%84%9F%E5%99%A8/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>å‹ç”µå¼ä¼ æ„Ÿå™¨</title>
    <url>/Circuit-Lover/%E5%BC%8F%E4%BC%A0%E6%84%9F%E5%99%A8/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³ç³»æ•°æ®ç†è®ºğŸƒ</title>
    <url>/MySql-Lover/%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/</url>
    <content><![CDATA[<p><strong>å…³ç³»æ¨¡å¼ç”±äº”éƒ¨åˆ†ç»„æˆ</strong></p>
<p>å®ƒæ˜¯ä¸€ä¸ªäº”å…ƒç»„ï¼šR(U, D, DOM, F)<br>Rï¼š      å…³ç³»å<br>Uï¼š       ç»„æˆè¯¥å…³ç³»çš„å±æ€§åé›†åˆ<br>Dï¼š       å±æ€§ç»„Uä¸­å±æ€§æ‰€æ¥è‡ªçš„åŸŸ<br>DOMï¼š å±æ€§å‘åŸŸçš„æ˜ è±¡é›†åˆ<br>Fï¼š       å±æ€§é—´æ•°æ®çš„ä¾èµ–å…³ç³»é›†åˆ<br>ç®€åŒ–ä¸ºä¸€ä¸ªä¸‰å…ƒç»„ï¼šRï¼ˆU, Fï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">[ä¾‹1]å»ºç«‹ä¸€ä¸ªæè¿°å­¦æ ¡æ•™åŠ¡çš„æ•°æ®åº“ï¼š</span><br><span class="line">	å­¦ç”Ÿçš„å­¦å·ï¼ˆSnoï¼‰ã€æ‰€åœ¨ç³»ï¼ˆSdeptï¼‰</span><br><span class="line">	ç³»ä¸»ä»»å§“åï¼ˆMnameï¼‰ã€è¯¾ç¨‹åï¼ˆCnameï¼‰</span><br><span class="line">	æˆç»©ï¼ˆGradeï¼‰</span><br><span class="line"></span><br><span class="line">å•ä¸€çš„å…³ç³»æ¨¡å¼ ï¼š   Student &lt;Uã€F&gt;</span><br><span class="line">U ï¼ï½› Sno, Sdept, Mname, Cname, Grade ï½</span><br><span class="line">å±æ€§ç»„Uä¸Šçš„ä¸€ç»„å‡½æ•°ä¾èµ–Fï¼š</span><br><span class="line">    F ï¼ï½› Sno â†’ Sdept,  Sdept â†’ Mname, (Sno, Cname) â†’ Grade ï½</span><br><span class="line"></span><br><span class="line">å­˜åœ¨é—®é¢˜ï¼š</span><br><span class="line">æ•°æ®å†—ä½™å¤ªå¤§</span><br><span class="line">æ›´æ–°å¼‚å¸¸ï¼ˆUpdate Anomaliesï¼‰</span><br><span class="line">æ’å…¥å¼‚å¸¸ï¼ˆInsertion Anomaliesï¼‰</span><br><span class="line">åˆ é™¤å¼‚å¸¸ï¼ˆDeletion Anomalies</span><br></pre></td></tr></table></figure>
<p>æŠŠè¿™ä¸ªå•ä¸€æ¨¡å¼åˆ†æˆ3ä¸ªå…³ç³»æ¨¡å¼ï¼š<br>     Sï¼ˆSnoï¼ŒSdeptï¼ŒSno â†’ Sdeptï¼‰;<br>     SCï¼ˆSnoï¼ŒCnoï¼ŒGradeï¼Œï¼ˆSnoï¼ŒCnoï¼‰ â†’ Gradeï¼‰;<br>     DEPTï¼ˆSdeptï¼ŒMnameï¼ŒSdeptâ†’ Mnameï¼‰</p>
<p><strong>å‡½æ•°ä¾èµ–</strong></p>
<p>ä¾èµ–ï¼šYå‡½æ•°ä¾èµ–äºXâ€ï¼Œè®°ä½œXâ†’Yã€‚  </p>
<p>å¹³å‡¡å‡½æ•°ä¾èµ–ä¸éå¹³å‡¡å‡½æ•°ä¾èµ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">ä¾‹ï¼šåœ¨å…³ç³»SC(Sno, Cno, Grade)ä¸­ï¼Œ</span><br><span class="line">   éå¹³å‡¡å‡½æ•°ä¾èµ–ï¼š (Sno, Cno) â†’ Grade</span><br><span class="line">   å¹³å‡¡å‡½æ•°ä¾èµ–ï¼š     (Sno, Cno) â†’ Sno </span><br><span class="line">                                          (Sno, Cno) â†’ Cno</span><br></pre></td></tr></table></figure>
<p>å®Œå…¨å‡½æ•°ä¾èµ–ä¸éƒ¨åˆ†å‡½æ•°ä¾èµ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[ä¾‹1] ä¸­(Sno,Cno)â†’Gradeæ˜¯å®Œå…¨å‡½æ•°ä¾èµ–ï¼Œ</span><br><span class="line">   (Sno,Cno)â†’Sdeptæ˜¯éƒ¨åˆ†å‡½æ•°ä¾èµ–</span><br><span class="line">   å› ä¸ºSno â†’Sdeptæˆç«‹ï¼Œä¸”Snoæ˜¯ï¼ˆSnoï¼ŒCnoï¼‰çš„çœŸå­é›†</span><br></pre></td></tr></table></figure>

<p>ä¼ é€’å‡½æ•°ä¾èµ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¾‹: åœ¨å…³ç³»Std(Sno, Sdept, Mname)ä¸­ï¼Œæœ‰ï¼š</span><br><span class="line">	  Sno â†’ Sdeptï¼ŒSdept â†’ Mname</span><br><span class="line">      Mnameä¼ é€’å‡½æ•°ä¾èµ–äºSno</span><br></pre></td></tr></table></figure>

<p><strong>ç </strong></p>
<p>ä¸»å±æ€§ä¸éä¸»å±æ€§</p>
<p>æ•´ä¸ªå±æ€§ç»„æ˜¯ç ï¼Œç§°ä¸ºå…¨ç ï¼ˆAll-keyï¼‰ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[ä¾‹2]</span><br><span class="line">    å…³ç³»æ¨¡å¼S(Sno,Sdept,Sage)ï¼Œå•ä¸ªå±æ€§Snoæ˜¯ç ï¼Œ</span><br><span class="line">    SCï¼ˆSnoï¼ŒCnoï¼ŒGradeï¼‰ä¸­ï¼Œï¼ˆSnoï¼ŒCnoï¼‰æ˜¯ç </span><br><span class="line">[ä¾‹3]</span><br><span class="line">       å…³ç³»æ¨¡å¼Rï¼ˆPï¼ŒWï¼ŒAï¼‰</span><br><span class="line">       Pï¼šæ¼”å¥è€…     Wï¼šä½œå“    Aï¼šå¬ä¼—</span><br><span class="line">       ä¸€ä¸ªæ¼”å¥è€…å¯ä»¥æ¼”å¥å¤šä¸ªä½œå“</span><br><span class="line">       æŸä¸€ä½œå“å¯è¢«å¤šä¸ªæ¼”å¥è€…æ¼”å¥</span><br><span class="line">       å¬ä¼—å¯ä»¥æ¬£èµä¸åŒæ¼”å¥è€…çš„ä¸åŒä½œå“</span><br></pre></td></tr></table></figure>

<p><strong>èŒƒå¼</strong></p>
<p>ä¸€ä¸ªä½ä¸€çº§èŒƒå¼çš„å…³ç³»æ¨¡å¼ï¼Œé€šè¿‡æ¨¡å¼åˆ†è§£å¯ä»¥è½¬æ¢ä¸ºè‹¥å¹²ä¸ªé«˜ä¸€çº§èŒƒå¼çš„å…³ç³»æ¨¡å¼çš„é›†åˆï¼Œè¿™ç§è¿‡ç¨‹å°±å«è§„èŒƒåŒ– </p>
<p>1NF<br>å¦‚æœä¸€ä¸ªå…³ç³»æ¨¡å¼Rçš„æ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸å¯åˆ†çš„åŸºæœ¬æ•°æ®é¡¹ï¼Œåˆ™Râˆˆ1NF,ç¬¬ä¸€èŒƒå¼æ˜¯å¯¹å…³ç³»æ¨¡å¼çš„æœ€èµ·ç çš„è¦æ±‚ã€‚ä¸æ»¡è¶³ç¬¬ä¸€èŒƒå¼çš„æ•°æ®åº“æ¨¡å¼ä¸èƒ½ç§°ä¸ºå…³ç³»æ•°æ®åº“ä½†æ˜¯æ»¡è¶³ç¬¬ä¸€èŒƒå¼çš„å…³ç³»æ¨¡å¼å¹¶ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå¥½çš„å…³ç³»æ¨¡å¼.<br>åŸå› ï¼šéƒ¨åˆ†å‡½æ•°ä¾èµ–äºç </p>
<img src="/MySql-Lover/%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/1NF.jpg" class>

<p>2NF</p>
<p>æ¯ä¸€ä¸ªéä¸»å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äºç </p>
<img src="/MySql-Lover/%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/2NF.jpg" class>

<p>3NF<br>æ¶ˆé™¤ä¼ é€’å‡½æ•°ä¾èµ–</p>
<img src="/MySql-Lover/%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/3NF.jpg" class>

<p>BCNF<br>1ã€æ‰€æœ‰éä¸»å±æ€§å¯¹æ¯ä¸€ä¸ªç éƒ½æ˜¯å®Œå…¨å‡½æ•°ä¾èµ–<br>2ã€æ‰€æœ‰çš„ä¸»å±æ€§å¯¹æ¯ä¸€ä¸ªä¸åŒ…å«å®ƒçš„ç ï¼Œä¹Ÿæ˜¯å®Œå…¨å‡½æ•°ä¾èµ–<br>3ã€æ²¡æœ‰ä»»ä½•å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äºéç çš„ä»»ä½•ä¸€ç»„å±æ€§</p>
<img src="/MySql-Lover/%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/BCNF.jpg" class>

<p>å¤šå€¼ä¾èµ–</p>
<p>4NF</p>
<img src="/MySql-Lover/%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/%E5%B0%8F%E8%8A%82.jpg" class>

<p>å¹¶ä¸æ˜¯è§„èŒƒåŒ–ç¨‹åº¦è¶Šé«˜ï¼Œæ¨¡å¼å°±è¶Šå¥½</p>
]]></content>
      <categories>
        <category>MySql Lover</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>PowershellæŠ¥é”™ğŸŒ</title>
    <url>/Other-Lover/Powershell%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<p><strong>powershellä¸èƒ½æ‰§è¡Œè„šæœ¬</strong></p>
<img src="/Other-Lover/Powershell%E6%8A%A5%E9%94%99/%E6%8A%A5%E9%94%99.jpg" class title="æŠ¥é”™">



<img src="/Other-Lover/Powershell%E6%8A%A5%E9%94%99/shell.jpg" class title="ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€">]]></content>
      <categories>
        <category>Other Lover</category>
      </categories>
  </entry>
  <entry>
    <title>Linux å†…æ ¸ä¸­æ–­ï¼ˆè®¾å¤‡æ ‘ï¼‰ğŸŠ</title>
    <url>/Linux-Lover/inux-%E5%86%85%E6%A0%B8%E4%B8%AD%E6%96%AD%EF%BC%88%E8%AE%BE%E5%A4%87%E6%A0%91%EF%BC%89/</url>
    <content><![CDATA[<p><strong>è®¾å¤‡æ ‘ä¸­æ–­ä¿¡æ¯èŠ‚ç‚¹</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ç®€å•æ€»ç»“ä¸€ä¸‹ä¸ä¸­æ–­æœ‰å…³çš„è®¾å¤‡æ ‘å±æ€§ä¿¡æ¯ï¼š</span><br><span class="line">â‘ ã€interrupt-cellsï¼ŒæŒ‡å®šä¸­æ–­æºçš„ä¿¡æ¯ cells ä¸ªæ•°ã€‚</span><br><span class="line">â‘¡ã€interrupt-controllerï¼Œè¡¨ç¤ºå½“å‰èŠ‚ç‚¹ä¸ºä¸­æ–­æ§åˆ¶å™¨ã€‚</span><br><span class="line">â‘¢ã€interruptsï¼ŒæŒ‡å®šä¸­æ–­å·ï¼Œè§¦å‘æ–¹å¼ç­‰ã€‚</span><br><span class="line">â‘£ã€interrupt-parentï¼ŒæŒ‡å®šçˆ¶ä¸­æ–­ï¼Œä¹Ÿå°±æ˜¯ä¸­æ–­æ§åˆ¶å™¨ã€‚</span><br><span class="line"></span><br><span class="line"> è·å–ä¸­æ–­å·</span><br><span class="line">1ã€ä» interupts å±æ€§ä¸­æå–åˆ°å¯¹åº”çš„è®¾å¤‡å·</span><br><span class="line">unsigned int irq_of_parse_and_map(struct device_node *dev,int index)</span><br><span class="line"></span><br><span class="line">2ã€GPIO çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ gpio_to_irq å‡½æ•°æ¥è·å– gpio å¯¹åº”çš„ä¸­æ–­å·</span><br><span class="line"> int gpio_to_irq(unsigned int gpio)</span><br></pre></td></tr></table></figure>
<p><strong>GICæ§åˆ¶å™¨</strong></p>
<p>åœ¨DTSä¸­ï¼Œå¤–è®¾çš„interrupt typeæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯SPIï¼Œå¦å¤–ä¸€ç§æ˜¯PPIã€‚<br>SGIç”¨äºprocessorä¹‹é—´çš„é€šä¿¡ï¼Œå’Œå¤–è®¾æ— å…³ã€‚</p>
<p>ï¼ˆ1ï¼‰å¤–è®¾ä¸­æ–­ï¼ˆPeripheral interruptï¼‰ã€‚æ ¹æ®ç›®æ ‡CPUçš„ä¸åŒï¼Œå¤–è®¾çš„ä¸­æ–­å¯ä»¥åˆ†æˆPPIï¼ˆPrivate Peripheral Interruptï¼‰å’ŒSPIï¼ˆShared Peripheral Interruptï¼‰ã€‚PPIåªèƒ½åˆ†é…ç»™ä¸€ä¸ªç¡®å®šçš„processorï¼Œè€ŒSPIå¯ä»¥ç”±Distributorå°†ä¸­æ–­åˆ†é…ç»™ä¸€ç»„Processorä¸­çš„ä¸€ä¸ªè¿›è¡Œå¤„ç†ã€‚å¤–è®¾ç±»å‹çš„ä¸­æ–­ä¸€èˆ¬é€šè¿‡ä¸€ä¸ªinterrupt request lineçš„ç¡¬ä»¶ä¿¡å·çº¿è¿æ¥åˆ°ä¸­æ–­æ§åˆ¶å™¨ï¼Œå¯èƒ½æ˜¯ç”µå¹³è§¦å‘çš„ï¼ˆLevel-sensitiveï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯è¾¹ç¼˜è§¦å‘çš„ï¼ˆEdge-triggeredï¼‰ã€‚</p>
<p>ï¼ˆ2ï¼‰è½¯ä»¶è§¦å‘çš„ä¸­æ–­ï¼ˆSGIï¼ŒSoftware-generated interruptï¼‰ã€‚è½¯ä»¶å¯ä»¥é€šè¿‡å†™GICD_SGIRå¯„å­˜å™¨æ¥è§¦å‘ä¸€ä¸ªä¸­æ–­äº‹ä»¶ï¼Œè¿™æ ·çš„ä¸­æ–­ï¼Œå¯ä»¥ç”¨äºprocessorä¹‹é—´çš„é€šä¿¡ã€‚</p>
<p>å…·ä½“çš„IDåˆ†é…æƒ…å†µå¦‚ä¸‹ï¼š</p>
<p>ID0<del>ID15ç”¨äºSGIï¼ŒID16</del>ID31ç”¨äºPPIï¼ŒID32~ID1019ç”¨äºSPIã€‚<br>PPIç±»å‹çš„ä¸­æ–­ä¼šé€åˆ°æŒ‡å®šçš„processä¸Šï¼Œå’Œå…¶ä»–çš„processæ— å…³ã€‚<br>SGIæ˜¯é€šè¿‡å†™GICD_SGIRå¯„å­˜å™¨è€Œè§¦å‘çš„ä¸­æ–­ã€‚Distributoré€šè¿‡processor source IDã€ä¸­æ–­IDå’Œtarget processor IDæ¥å”¯ä¸€è¯†åˆ«ä¸€ä¸ªSGIã€‚</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>vscodeå¸¸è§é—®é¢˜</title>
    <url>/Other-Lover/scode%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p><strong>å¸¸ç”¨æ‰©å±•</strong></p>
<p>æˆ‘ä»¬éœ€è¦æŒ‰ç…§çš„æ’ä»¶æœ‰ä¸‹é¢å‡ ä¸ªï¼š<br>1)ã€C/C++ï¼Œè¿™ä¸ªè‚¯å®šæ˜¯å¿…é¡»çš„ã€‚<br>2)ã€C/C++ Snippetsï¼Œå³ C/C++é‡ç”¨ä»£ç å—ã€‚<br>3)ã€C/C++ Advanced Lint,å³ C/C++é™æ€æ£€æµ‹ ã€‚<br>4)ã€Code Runnerï¼Œå³ä»£ç è¿è¡Œã€‚<br>5)ã€Include AutoCompleteï¼Œå³è‡ªåŠ¨å¤´æ–‡ä»¶åŒ…å«ã€‚<br>6)ã€Rainbow Bracketsï¼Œå½©è™¹èŠ±æ‹¬å·ï¼Œæœ‰åŠ©äºé˜…è¯»ä»£ç ã€‚<br>7)ã€One Dark Proï¼ŒVSCode çš„ä¸»é¢˜ã€‚<br>8)ã€GBKtoUTF8ï¼Œå°† GBK è½¬æ¢ä¸º UTF8ã€‚<br>9)ã€ARMï¼Œå³æ”¯æŒ ARM æ±‡ç¼–è¯­æ³•é«˜äº®æ˜¾ç¤ºã€‚<br>10)ã€Chinese(Simplified)ï¼Œå³ä¸­æ–‡ç¯å¢ƒã€‚<br>11)ã€vscode-iconsï¼ŒVSCode å›¾æ ‡æ’ä»¶ï¼Œä¸»è¦æ˜¯èµ„æºç®¡ç†å™¨ä¸‹å„ä¸ªæ–‡ä»¶å¤¹çš„å›¾æ ‡ã€‚<br>12)ã€compareitï¼Œæ¯”è¾ƒæ’ä»¶ï¼Œå¯ä»¥ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚ã€‚<br>13)ã€DeviceTreeï¼Œè®¾å¤‡æ ‘è¯­æ³•æ’ä»¶ã€‚<br>14)ã€TabNineï¼Œä¸€æ¬¾ AI è‡ªåŠ¨è¡¥å…¨æ’ä»¶</p>
<p>15)ã€remote-sshè¿œç¨‹æ§åˆ¶</p>
<p><strong>è¿œç¨‹æ§åˆ¶ä¸èƒ½è·³è½¬å‘½ä»¤</strong></p>
<p>ä¿®æ”¹f12é”®ç»‘å®šçš„å‚æ•°<br>å°†editorHasDefinitionProvider &amp;&amp; editorTextFocus &amp;&amp;!isInEmbeddedEditor<br>æ”¹ä¸ºeditor.action.revealDefinition</p>
]]></content>
      <categories>
        <category>Other Lover</category>
      </categories>
  </entry>
  <entry>
    <title>hexo-admin</title>
    <url>/Other-Lover/hexo-admin/</url>
    <content><![CDATA[<p><strong>å®‰è£…npm install â€“save hexo-admin</strong></p>
<p><strong>æ‰“ä¸å¼€Cannot GET /admin</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¿®æ”¹.config</span></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"></span><br><span class="line">url: https://github.com/hsm0409/hsm0409.github.io/</span><br><span class="line">root: /</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Other Lover</category>
      </categories>
  </entry>
  <entry>
    <title>hexo+gitee</title>
    <url>/Other-Lover/xo-gitee/</url>
    <content><![CDATA[<p>githubç½‘é€Ÿä¸å¤Ÿå¿«ï¼Œæ¢æˆgiteesè¯•è¯•ï¼Ÿ</p>
<p><a href="https://gitee.com/hsm0409/hsm0409.git" target="_blank" rel="noopener">https://gitee.com/hsm0409/hsm0409.git</a><br>git remote add origin <a href="mailto:git@gitee.com">git@gitee.com</a>:hsm0409/hsm0409.git</p>
<p>å¦‚æœåŒæ—¶éƒ¨ç½²ï¼š</p>
<p>å…ˆå…³è”GitHubçš„è¿œç¨‹åº“ï¼š<br>git remote rm origin<br>git remote add github <a href="mailto:git@github.com">git@github.com</a>:hsm0409/hsm0409.github.io.git<br>æ¥ç€ï¼Œå†å…³è”Giteeçš„è¿œç¨‹åº“ï¼š<br>git remote add gitee <a href="mailto:git@gitee.com">git@gitee.com</a>:hsm0409/hsm0409.git</p>
<p><a href="mailto:ssh-Tgit@github.com">ssh-Tgit@github.com</a></p>
<p><a href="mailto:ssh-Tgit@gitee.com">ssh-Tgit@gitee.com</a></p>
<p>git push github master<br>å¦‚æœè¦æ¨é€åˆ°Giteeï¼Œä½¿ç”¨å‘½ä»¤ï¼š</p>
<p>git push gitee master</p>
<p>ä¸é”™çš„å‚è€ƒï¼š<a href="https://www.liaoxuefeng.com/wiki/896043488029600/1163625339727712" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/896043488029600/1163625339727712</a></p>
]]></content>
      <categories>
        <category>Other Lover</category>
      </categories>
  </entry>
  <entry>
    <title>hexo+github</title>
    <url>/Other-Lover/hexo-github/</url>
    <content><![CDATA[<p>æ¢ç”µè„‘æˆ–è€…æ¢ç³»ç»Ÿé‡æ–°éƒ¨ç½²hexo</p>
<p>ssh-keygen â€“t rsa -C â€œ<a href="mailto:1260925116@qq.com">1260925116@qq.com</a>   </p>
<p>git config â€“global user.name â€œhsm0409â€  </p>
<p>//æœ‰æ—¶å€™ç³»ç»Ÿæ²¡.ssh/id_rsa.pubï¼Œè¾“å…¥å‘½ä»¤ssh-keygen -o<br>//ç”Ÿæˆæ–°çš„å¯†é’¥</p>
<p>ssh -T <a href="mailto:git@github.com">git@github.com</a>      //sshå¯†é’¥</p>
<p>yes</p>
<p> git config â€“global user.email â€œ<a href="mailto:1260925116@qq.com">1260925116@qq.com</a>â€œ</p>
<p> git config â€“global user.name â€œhsm0409â€</p>
<p> å°±å¯ä»¥äº†ã€‚</p>
<p> //è¯¦ç»†å‚è€ƒ<a href="https://blog.annieyu.com/posts/207737771.html" target="_blank" rel="noopener">https://blog.annieyu.com/posts/207737771.html</a></p>
]]></content>
      <categories>
        <category>Other Lover</category>
      </categories>
  </entry>
  <entry>
    <title>ä½¿ç”¨PEç³»ç»Ÿé‡è£…win10QvQ</title>
    <url>/Other-Lover/%E7%94%A8PE%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A3%85win10QvQ/</url>
    <content><![CDATA[<p><strong>1ã€å·¥å…·ï¼šUç›˜+ç™½èœPEç³»ç»Ÿ</strong>   </p>
<p><strong>2ã€ç³»ç»Ÿï¼šwin10 è§£å‹æ”¾åœ¨Uç›˜ GHO ç›®å½•ä¸‹ã€‚</strong></p>
<p><strong>3ã€ç”µè„‘å…³æœºï¼Œå¼€æœºå¯åŠ¨æŒ‰ä½â€œescâ€,é€‰æ‹©è¿›å…¥Uç›˜ï¼Œè¿›å…¥PEç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå¤‡ä»½å¥½Cç›˜çš„èµ„æ–™åˆ°å…¶ä»–Uç›˜ä¸­ï¼Œç„¶åç‚¹å‡»Cç›˜ï¼Œè¿˜åŸåˆ†åŒºï¼Œé€‰æ‹©Uç›˜ä¸­GHOç›®å½•ä¸‹çš„é•œåƒæ–‡ä»¶.gho,ç‚¹å‡»ç¡®å®šå³å¯ã€‚</strong></p>
<p><strong>4ã€æ‹”å‡ºUç›˜ï¼Œé‡å¯ç”µè„‘ã€‚</strong></p>
<p>(DiskGenius æ•°æ®æ¢å¤è½¯ä»¶)</p>
]]></content>
      <categories>
        <category>Other Lover</category>
      </categories>
  </entry>
  <entry>
    <title>ç”µå®¹ä¼ æ„Ÿå™¨</title>
    <url>/Circuit-Lover/%E4%BC%A0%E6%84%9F%E5%99%A8/</url>
    <content><![CDATA[<p>ç”µå®¹å¼ä¼ æ„Ÿå™¨æ˜¯æŠŠè¢«æµ‹é‡çš„å˜åŒ–è½¬æ¢ä¸ºç”µå®¹é‡å˜åŒ–çš„ä¸€ç±»ä¼ æ„Ÿå™¨ã€‚å®è´¨ä¸Šæ˜¯ä¸€ä¸ªå…·æœ‰å¯å˜å‚æ•°çš„ç”µå®¹å™¨ã€‚æœ€å¸¸ç”¨çš„æ˜¯å¹³è¡Œæ¿ç”µå®¹ä¼ æ„Ÿå™¨å’Œåœ†æŸ±å½¢ç”µå®¹ä¼ æ„Ÿå™¨ã€‚å¯ç”¨æ¥æµ‹é‡å‹åŠ›ã€åŠ›ã€ä½ç§»ã€æŒ¯åŠ¨ã€æ¶²ä½ã€æˆä»½å«é‡ç­‰ã€‚</p>
<p>â‘ å˜æè·å‹ï¼ˆå˜é—´éš™å‹ï¼‰ï¼šæ”¹å˜ææ¿è·ç¦»d0 ã€‚<br>â‘¡å˜é¢ç§¯å‹ï¼šæ”¹å˜ææ¿ç›¸å¯¹é¢ç§¯S ã€‚<br>â‘¢å˜ä»‹ç”µå¸¸æ•°å‹ï¼šæ”¹å˜ä»‹ç”µå¸¸æ•°Îµã€‚</p>
]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå†…æ ¸ä¸­æ–­</title>
    <url>/Linux-Lover/Linux-%E4%B8%AD%E6%96%AD/</url>
    <content><![CDATA[<p>Linux å†…æ ¸ä¸­ä¹Ÿæä¾›äº†å¤§é‡çš„ä¸­æ–­ç›¸å…³çš„ API å‡½æ•°</p>
<p>1ã€çŸ¥é“ä¸­æ–­å·<br>2 ã€ç”³è¯·å‡½æ•°request_irq<br>3 ã€free_irq é‡Šæ”¾å‡½æ•°<br>4ã€request_irq å‡½æ•°ç”³è¯·ä¸­æ–­çš„æ—¶å€™éœ€è¦è®¾ç½®ä¸­æ–­å¤„ç†å‡½æ•°<br>5ã€ä¸­æ–­ä½¿èƒ½ä¸ç¦æ­¢å‡½æ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä½¿èƒ½æˆ–è€…ç¦æ­¢æŸä¸€ä¸ªä¸­æ–­</span><br><span class="line"></span><br><span class="line">void enable_irq(unsigned int irq)</span><br><span class="line">void disable_irq(unsigned int irq)-&gt;void disable_irq_nosync(unsigned int irq)</span><br><span class="line"></span><br><span class="line">ä½¿èƒ½æˆ–è€…ç¦æ­¢å½“å‰å¤„ç†å™¨ä¸­æ–­ç³»ç»Ÿ</span><br><span class="line">local_irq_enable()</span><br><span class="line">local_irq_disable()</span><br><span class="line">æ¨èï¼š</span><br><span class="line">local_irq_save(flags) </span><br><span class="line">local_irq_restore(flags)</span><br></pre></td></tr></table></figure>
<p><strong>ä¸ŠåŠéƒ¨ä¸ä¸‹åŠéƒ¨</strong></p>
<p>ä¸ŠåŠéƒ¨ï¼šä¸ŠåŠéƒ¨å°±æ˜¯ä¸­æ–­å¤„ç†å‡½æ•°ï¼Œé‚£äº›å¤„ç†è¿‡ç¨‹æ¯”è¾ƒå¿«ï¼Œä¸ä¼šå ç”¨å¾ˆé•¿æ—¶é—´çš„å¤„ç†å°±å¯<br>ä»¥æ”¾åœ¨ä¸ŠåŠéƒ¨å®Œæˆã€‚<br>ä¸‹åŠéƒ¨ï¼šå¦‚æœä¸­æ–­å¤„ç†è¿‡ç¨‹æ¯”è¾ƒè€—æ—¶ï¼Œé‚£ä¹ˆå°±å°†è¿™äº›æ¯”è¾ƒè€—æ—¶çš„ä»£ç æå‡ºæ¥ï¼Œäº¤ç»™ä¸‹åŠéƒ¨<br>å»æ‰§è¡Œï¼Œè¿™æ ·ä¸­æ–­å¤„ç†å‡½æ•°å°±ä¼šå¿«è¿›å¿«å‡º</p>
<p>å“ªäº›ä»£ç å±äºä¸‹åŠéƒ¨å¹¶æ²¡æœ‰æ˜ç¡®çš„è§„å®šï¼Œä¸€åˆ‡æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µå»åˆ¤æ–­?<br>æ­£ç‚¹åŸå­å‚è€ƒï¼š<br>â‘ ã€å¦‚æœè¦å¤„ç†çš„å†…å®¹ä¸å¸Œæœ›è¢«å…¶ä»–ä¸­æ–­æ‰“æ–­ï¼Œé‚£ä¹ˆå¯ä»¥æ”¾åˆ°ä¸ŠåŠéƒ¨ã€‚<br>â‘¡ã€å¦‚æœè¦å¤„ç†çš„ä»»åŠ¡å¯¹æ—¶é—´æ•æ„Ÿï¼Œå¯ä»¥æ”¾åˆ°ä¸ŠåŠéƒ¨ã€‚<br>â‘¢ã€å¦‚æœè¦å¤„ç†çš„ä»»åŠ¡ä¸ç¡¬ä»¶æœ‰å…³ï¼Œå¯ä»¥æ”¾åˆ°ä¸ŠåŠéƒ¨<br>â‘£ã€é™¤äº†ä¸Šè¿°ä¸‰ç‚¹ä»¥å¤–çš„å…¶ä»–ä»»åŠ¡ï¼Œä¼˜å…ˆè€ƒè™‘æ”¾åˆ°ä¸‹åŠéƒ¨ã€‚</p>
<p><strong>Linuxå†…æ ¸ä¸‹åŠéƒ¨ä¸­æ–­æœºåˆ¶</strong></p>
<p>buttom half -&gt;è½¯ä¸­æ–­å’Œ tasklet </p>
<p><strong>è½¯ä¸­æ–­</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ä»£ç  51.1.2.1 softirq_action ç»“æ„ä½“</span><br><span class="line">433 struct softirq_action</span><br><span class="line">434 &#123;</span><br><span class="line">435 void (*action)(struct softirq_action *);</span><br><span class="line">436 &#125;;</span><br><span class="line">åœ¨ kernel/softirq.c æ–‡ä»¶ä¸­ä¸€å…±å®šä¹‰äº† 10 ä¸ªè½¯ä¸­æ–­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span><br><span class="line">ç¤ºä¾‹ä»£ç  51.1.2.2 softirq_vec æ•°ç»„</span><br><span class="line">static struct softirq_action softirq_vec[NR_SOFTIRQS];</span><br><span class="line">NR_SOFTIRQS æ˜¯æšä¸¾ç±»å‹ï¼Œå®šä¹‰åœ¨æ–‡ä»¶ include/linux/interrupt.h ä¸­ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</span><br><span class="line">ç¤ºä¾‹ä»£ç  51.1.2.3 softirq_vec æ•°ç»„</span><br><span class="line">enum</span><br><span class="line">&#123;</span><br><span class="line">HI_SOFTIRQ=0, /* é«˜ä¼˜å…ˆçº§è½¯ä¸­æ–­ */</span><br><span class="line">TIMER_SOFTIRQ, /* å®šæ—¶å™¨è½¯ä¸­æ–­ */</span><br><span class="line">NET_TX_SOFTIRQ, /* ç½‘ç»œæ•°æ®å‘é€è½¯ä¸­æ–­ */</span><br><span class="line">NET_RX_SOFTIRQ, /* ç½‘ç»œæ•°æ®æ¥æ”¶è½¯ä¸­æ–­ */</span><br><span class="line">BLOCK_SOFTIRQ,</span><br><span class="line">BLOCK_IOPOLL_SOFTIRQ,</span><br><span class="line">TASKLET_SOFTIRQ, /* tasklet è½¯ä¸­æ–­ */</span><br><span class="line">SCHED_SOFTIRQ, /* è°ƒåº¦è½¯ä¸­æ–­ */</span><br><span class="line">HRTIMER_SOFTIRQ, /* é«˜ç²¾åº¦å®šæ—¶å™¨è½¯ä¸­æ–­  */</span><br><span class="line">RCU_SOFTIRQ, /* RCU è½¯ä¸­æ–­  */</span><br><span class="line">NR_SOFTIRQS</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ¯ä¸ª CPU éƒ½æœ‰è‡ªå·±çš„è§¦å‘å’Œæ§åˆ¶æœºåˆ¶ï¼Œå¹¶ä¸”åªæ‰§è¡Œè‡ªå·±æ‰€è§¦å‘çš„è½¯ä¸­æ–­ã€‚ä½†æ˜¯å„ä¸ª CPU æ‰€æ‰§è¡Œçš„è½¯ä¸­æ–­æœåŠ¡å‡½æ•°ç¡®æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯æ•°ç»„ softirq_vec ä¸­å®šä¹‰çš„ action å‡½æ•°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">open_softirq å‡½æ•°æ³¨å†Œå¯¹åº”çš„è½¯ä¸­æ–­å¤„ç†å‡½æ•°</span><br><span class="line">void open_softirq(int nr, void (*action)(struct softirq_action *))</span><br><span class="line"></span><br><span class="line">ä¾‹ï¼šopen_softirq(TASKLET_SOFTIRQ, tasklet_action);</span><br><span class="line"></span><br><span class="line">raise_softirq è°ƒç”¨å‡½æ•°è§¦å‘</span><br><span class="line">void raise_softirq(unsigned int nr)</span><br><span class="line"></span><br><span class="line">æ³¨æ„:è½¯ä¸­æ–­å¿…é¡»åœ¨ç¼–è¯‘çš„æ—¶å€™é™æ€æ³¨å†Œ  kernel/softirq.c</span><br></pre></td></tr></table></figure>

<p><strong>tasklet</strong></p>
<p>å‰è¨€ï¼štasklet æ˜¯åˆ©ç”¨è½¯ä¸­æ–­æ¥å®ç°çš„å¦tå¤–ä¸€ç§ä¸‹åŠéƒ¨æœºåˆ¶ï¼Œåœ¨è½¯ä¸­æ–­å’Œ tasklet ä¹‹é—´ï¼Œå»ºè®®ä½¿ç”¨ tasklet</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">struct tasklet_struct</span><br><span class="line">&#123;</span><br><span class="line">struct tasklet_struct *next; /* ä¸‹ä¸€ä¸ª tasklet */</span><br><span class="line"> unsigned long state; /* tasklet çŠ¶æ€ */</span><br><span class="line"> atomic_t count; /* è®¡æ•°å™¨ï¼Œè®°å½•å¯¹ tasklet çš„å¼•ç”¨æ•° */</span><br><span class="line">void (*func)(unsigned long); /* tasklet  æ‰§è¡Œçš„å‡½æ•° */</span><br><span class="line"> unsigned long data; /* å‡½æ•° func çš„å‚æ•° */</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line">tasklet_init å‡½æ•°åˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line">void tasklet_init(struct tasklet_struct *t, void (*func)(unsigned long),unsigned long data)</span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥åˆå§‹-ã€‹DECLARE_TASKLET(name, func, data)</span><br><span class="line"></span><br><span class="line">void tasklet_schedule(struct tasklet_struct *t)</span><br><span class="line"></span><br><span class="line">tï¼šè¦è°ƒåº¦çš„ taskletï¼Œä¹Ÿå°±æ˜¯ DECLARE_TASKLET å®é‡Œé¢çš„ name tasklet çš„å‚è€ƒä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤º</span><br><span class="line"></span><br><span class="line">/* å®šä¹‰ taselet */</span><br><span class="line">struct tasklet_struct testtasklet;</span><br><span class="line"></span><br><span class="line">void testtasklet_func(unsigned long data)</span><br><span class="line">&#123;</span><br><span class="line">/* tasklet å…·ä½“å¤„ç†å†…å®¹ */</span><br><span class="line">&#125;</span><br><span class="line">/* ä¸­æ–­å¤„ç†å‡½æ•° */</span><br><span class="line">irqreturn_t test_handler(int irq, void *dev_id)</span><br><span class="line">&#123;</span><br><span class="line">......</span><br><span class="line">/* è°ƒåº¦ tasklet */</span><br><span class="line">tasklet_schedule(&amp;testtasklet);</span><br><span class="line">......</span><br><span class="line">&#125;</span><br><span class="line">/* é©±åŠ¨å…¥å£å‡½æ•° */</span><br><span class="line">static int __init xxxx_init(void)</span><br><span class="line">&#123;</span><br><span class="line">......</span><br><span class="line">/* åˆå§‹åŒ– tasklet */</span><br><span class="line">tasklet_init(&amp;testtasklet, testtasklet_func, data);</span><br><span class="line">/* æ³¨å†Œä¸­æ–­å¤„ç†å‡½æ•° */</span><br><span class="line">request_irq(xxx_irq, test_handler, 0, <span class="string">"xxx"</span>, &amp;xxx_dev);</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å·¥ä½œé˜Ÿåˆ—</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">å·¥ä½œé˜Ÿåˆ—æ˜¯å¦å¤–ä¸€ç§ä¸‹åŠéƒ¨æ‰§è¡Œæ–¹å¼ï¼šæ¨åçš„å·¥ä½œå¯ä»¥ç¡çœ </span><br><span class="line">è¡¨ç¤ºä¸€ä¸ªå·¥ä½œç»“æ„å‡½æ•°</span><br><span class="line">struct work_struct &#123;</span><br><span class="line">atomic_long_t data;</span><br><span class="line">struct list_head entry;</span><br><span class="line">work_func_t func; /* å·¥ä½œé˜Ÿåˆ—å¤„ç†å‡½æ•° */</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">å·¥ä½œç»„ç»‡æˆå·¥ä½œé˜Ÿåˆ—ç»“æ„</span><br><span class="line">struct workqueue_struct &#123;</span><br><span class="line">struct list_head pwqs;</span><br><span class="line">struct list_head list;</span><br><span class="line">struct mutex mutex;</span><br><span class="line">int work_color;</span><br><span class="line">int flush_color;</span><br><span class="line">atomic_t nr_pwqs_to_flush;</span><br><span class="line">struct wq_flusher *first_flusher;</span><br><span class="line">struct list_head flusher_queue;</span><br><span class="line">struct list_head flusher_overflow;</span><br><span class="line">struct list_head maydays;</span><br><span class="line">struct worker *rescuer;</span><br><span class="line">int nr_drainers;</span><br><span class="line">int saved_max_active;</span><br><span class="line">struct workqueue_attrs *unbound_attrs;</span><br><span class="line">struct pool_workqueue *dfl_pwq;</span><br><span class="line">char name[WQ_NAME_LEN];</span><br><span class="line">struct rcu_head rcu;</span><br><span class="line">unsigned int flags ____cacheline_aligned;</span><br><span class="line">struct pool_workqueue __percpu *cpu_pwqs;</span><br><span class="line">struct pool_workqueue __rcu *numa_pwq_tbl[];</span><br><span class="line">&#125;ï¼›</span><br><span class="line">LLinux å†…æ ¸ä½¿ç”¨å·¥ä½œè€…çº¿ç¨‹(worker thred)æ¥å¤„ç†å·¥ä½œé˜Ÿåˆ—ä¸­çš„å„ä¸ªå·¥ä½œç»“æ„</span><br><span class="line">struct worker &#123;</span><br><span class="line">union &#123;</span><br><span class="line">struct list_head entry;</span><br><span class="line">struct hlist_node hentry;</span><br><span class="line">&#125;;</span><br><span class="line">struct work_struct *current_work;</span><br><span class="line">work_func_t current_func;</span><br><span class="line">struct pool_workqueue *current_pwq;</span><br><span class="line">bool desc_valid;</span><br><span class="line">struct list_head scheduled;</span><br><span class="line">struct task_struct *task;</span><br><span class="line">struct worker_pool *pool;</span><br><span class="line">struct list_head node;</span><br><span class="line">unsigned long last_active;</span><br><span class="line">unsigned int flags;</span><br><span class="line">int id;</span><br><span class="line">char desc[WORKER_DESC_LEN];</span><br><span class="line">struct workqueue_struct *rescue_wq;</span><br><span class="line">&#125;;</span><br><span class="line">æ€»ç»“ï¼šæ¯ä¸ª worker éƒ½æœ‰ä¸€ä¸ªå·¥ä½œé˜Ÿåˆ—</span><br><span class="line">å’Œ tasklet ä¸€æ ·ï¼Œå·¥ä½œä¹Ÿæ˜¯éœ€è¦è°ƒåº¦æ‰èƒ½è¿</span><br><span class="line"></span><br><span class="line">ä¾‹å­</span><br><span class="line">/* å®šä¹‰å·¥ä½œ(work) */</span><br><span class="line">struct work_struct testwork;</span><br><span class="line">void testwork_func_t(struct work_struct *work);</span><br><span class="line">&#123;</span><br><span class="line">/* work å…·ä½“å¤„ç†å†…å®¹ */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">irqreturn_t test_handler(int irq, void *dev_id)</span><br><span class="line">&#123;</span><br><span class="line">......</span><br><span class="line">/* è°ƒåº¦ work */</span><br><span class="line">schedule_work(&amp;testwork);</span><br><span class="line">......</span><br><span class="line">&#125;</span><br><span class="line">static int __init xxxx_init(void)</span><br><span class="line">&#123;</span><br><span class="line">......</span><br><span class="line">/* åˆå§‹åŒ– work */</span><br><span class="line">INIT_WORK(&amp;testwork, testwork_func_t);</span><br><span class="line">/* æ³¨å†Œä¸­æ–­å¤„ç†å‡½æ•° */</span><br><span class="line">request_irq(xxx_irq, test_handler, 0, <span class="string">"xxx"</span>, &amp;xxx_dev);</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>cå’Œc++ä¸­structçš„ä¸»è¦åŒºåˆ«</title>
    <url>/C-C-Lover/c%E5%92%8Cc-%E4%B8%ADstruct%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p>cå’Œc++ä¸­structçš„ä¸»è¦åŒºåˆ«æ˜¯cä¸­çš„structä¸å¯ä»¥å«æœ‰æˆå‘˜å‡½æ•°ï¼Œè€Œc++ä¸­çš„structå¯ä»¥ã€‚</p>
<p>c++ä¸­structå’Œclassçš„ä¸»è¦åŒºåˆ«åœ¨äºé»˜è®¤çš„å­˜å–æƒé™ä¸åŒï¼Œstructé»˜è®¤ä¸ºpublicï¼Œè€Œclassé»˜è®¤ä¸ºprivate</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>linuxä¸‹å‡½æ•°å¸¸è§æŠ¥é”™éšè®°</title>
    <url>/Linux-Lover/nux%E4%B8%8B%E5%87%BD%E6%95%B0%E5%B8%B8%E8%A7%81%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<p>gets(str)<br>å‡½æ•°æŠ¥é”™ï¼šwarning: the â€˜getsâ€™ function is dangerous and should not be used.<br>åŸå› ï¼š<br>æ³¨æ„ï¼Œgetsçš„è¡Œä¸ºä¸fgetsä½¿ç”¨stdinä½œä¸ºå‚æ•°æ—¶çš„è¡Œä¸ºä¸å®Œå…¨ç›¸åŒ:é¦–å…ˆï¼Œåœ¨ä½¿ç”¨fgetsæ—¶ï¼Œç»“æŸæ¢è¡Œå­—ç¬¦ä¸åŒ…å«åœ¨getsä¸­ï¼Œè€Œåœ¨ä½¿ç”¨fgetsæ—¶ï¼Œå®ƒåŒ…å«åœ¨fgetsä¸­ã€‚å…¶æ¬¡ï¼Œgetsä¸å…è®¸æ‚¨æŒ‡å®šè¦è¯»å–çš„å­—ç¬¦æ•°é™åˆ¶ï¼Œå› æ­¤å¿…é¡»å°å¿ƒä½¿ç”¨stræŒ‡å‘çš„æ•°ç»„çš„å¤§å°ï¼Œä»¥é¿å…ç¼“å†²åŒºæº¢å‡ºã€‚<br>è§£å†³åŠæ³•ï¼šé‡‡ç”¨<br>fgets(cmd,100,stdin);//100ä¸ºsize</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ioctlå‡½æ•°</title>
    <url>/Linux-Lover/ctl%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<p>ioctl ç³»ç»Ÿè°ƒç”¨ä¸»è¦ç”¨äºå¢åŠ ç³»ç»Ÿè°ƒç”¨çš„ç¡¬ä»¶æ§åˆ¶èƒ½åŠ›ï¼Œå®ƒå¯ä»¥æ„å»ºè‡ªå·±çš„å‘½ä»¤ï¼Œä¹Ÿèƒ½æ¥å—å‚æ•°.<br>åº”ç”¨ç¨‹åº ioctl å‡½æ•°<br>int ioctl (int fd, unsigned long cmd, arg)<br>fd æ˜¯è¢«æ‰“å¼€çš„è®¾å¤‡æ–‡ä»¶ï¼Œ cmd æ˜¯æ“ä½œè®¾å¤‡çš„å‘½ä»¤ï¼Œâ€œ â€¦â€ä»£è¡¨å¯å˜æ•°ç›®çš„å‚æ•°è¡¨ï¼Œé€šå¸¸ç”¨ char *argp æ¥å®šä¹‰ï¼Œå¦‚æœ cmd å‘½ä»¤ä¸éœ€è¦å‚æ•°ï¼Œåˆ™ä¼ å…¥ NULL å³å¯ã€‚</p>
<p>å†…æ ¸ç©ºé—´ iotcl å‡½æ•°<br>int (*ioctl) (struct inode *inode, struct file *filp, unsigned int cmd, unsigned long arg);</p>
<p>ioctl æ“ä½œä¸ç¡¬ä»¶å¹³å°ç›¸å…³ï¼Œä½¿ç”¨ ioctl çš„é©±åŠ¨éœ€è¦åŒ…å«&lt;linux/ioctl.h&gt;æ–‡ä»¶ã€‚æ¯ä¸ª ioctl å‘½ä»¤cmdå®é™…ä¸Šéƒ½æ˜¯ä¸€ä¸ª 32 ä½æ•´å‹æ•°ï¼Œå„å­—æ®µå’Œå«ä¹‰å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚<br>å·²ç»è¢«ä½¿ç”¨çš„å¹»æ•°åˆ—è¡¨è¯¦è§å†…æ ¸æºç ç›®å½•Documentation/ioctl/ioctl-number.txtæ–‡ä»¶ã€‚</p>
<p>|ä¸€èˆ¬å½¢å¼<br>|-|-|<br>|_IO(type,nr) æ„é€ æ— å‚æ•°çš„å‘½ä»¤ç¼–å·<br>|_IOW(type,nr,size) æ„é€ å¾€é©±åŠ¨å†™å…¥æ•°æ®çš„å‘½ä»¤ç¼–å·<br>|_IOR(type,nr,size) æ„é€ ä»é©±åŠ¨ä¸­è¯»å–æ•°æ®çš„å‘½ä»¤ç¼–å·<br>|_IOWR(type,nr,size)æ„é€ åŒå‘ä¼ è¾“çš„å‘½ä»¤ç¼–å·</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#include &lt;linux/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/module.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/kernel.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/init.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/fs.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/slab.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/uaccess.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/io.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/cdev.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/of.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/of_address.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/of_irq.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/gpio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/of_gpio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/semaphore.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/mach/map.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/uaccess.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;asm/io.h&gt;</span></span><br><span class="line"></span><br><span class="line">/*0XFE---å¹»æ•°ï¼Œ1.2.3.---åŠŸèƒ½å·*/</span><br><span class="line">/*IOctrl å‘½ä»¤*/</span><br><span class="line"><span class="comment">#define CLOSE_CMD (_IO(0XEF, 0x1)) /* å…³é—­å®šæ—¶å™¨ */</span></span><br><span class="line"><span class="comment">#define OPEN_CMD (_IO(0XEF, 0x2)) /* æ‰“å¼€å®šæ—¶å™¨ */</span></span><br><span class="line"><span class="comment">#define SETPERIOD_CMD (_IO(0XEF, 0x3)) /* è®¾ç½®å®šæ—¶å™¨å‘¨æœŸå‘½ä»¤ */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define TIMER_NAME  "timer"</span></span><br><span class="line"><span class="comment">#define TIMER_CNT  1</span></span><br><span class="line">struct timer_dev&#123;</span><br><span class="line"></span><br><span class="line">    dev_t devid;</span><br><span class="line"></span><br><span class="line">    int major;</span><br><span class="line">    int minor;</span><br><span class="line">    struct cdev cdev;</span><br><span class="line">    struct device_node *nd;</span><br><span class="line">    struct class * class;</span><br><span class="line">    struct device * device;</span><br><span class="line"></span><br><span class="line">    int led_gpio;</span><br><span class="line">    int timeperiod;</span><br><span class="line">    struct timer_list timer;</span><br><span class="line">    spinlock_t lock;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">struct timer_dev timer;</span><br><span class="line"></span><br><span class="line">static int led_init (struct timer_dev * dev)</span><br><span class="line">&#123;</span><br><span class="line">    int ret = 0;</span><br><span class="line">    dev-&gt;nd = of_find_node_by_path(<span class="string">"/gpioled"</span>);</span><br><span class="line">    <span class="keyword">if</span>(dev-&gt;nd == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> -EINVAL;</span><br><span class="line">    &#125;</span><br><span class="line">    dev-&gt;led_gpio = of_get_named_gpio(dev-&gt;nd,<span class="string">"led-gpios"</span>,0);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (dev-&gt;led_gpio &lt; 0) </span><br><span class="line">    &#123;</span><br><span class="line">        printk(<span class="string">"can't get led \r\n"</span>);</span><br><span class="line">        <span class="built_in">return</span> -EINVAL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /*ç”³è¯·æ³¨å†ŒIO*/</span><br><span class="line"></span><br><span class="line">    gpio_request(dev-&gt;led_gpio,<span class="string">"led"</span>);</span><br><span class="line"></span><br><span class="line">    ret = gpio_direction_output(dev-&gt;led_gpio,1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(ret &lt; 0)</span><br><span class="line">    &#123;</span><br><span class="line">        printk(<span class="string">"can't set gpion\r\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> ret ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int timer_open(struct inode *inode, struct file *filp)</span><br><span class="line">&#123;</span><br><span class="line">    filp-&gt;private_data = &amp;timer;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">static long timer_unlocked_ioctl(struct file *filp, unsigned int cmd,</span><br><span class="line">						unsigned long arg)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">        struct timer_dev *dev = (struct timer_dev *)filp-&gt;private_data;</span><br><span class="line">        int ret  = 0;</span><br><span class="line">        int timeperiod ;</span><br><span class="line">        unsigned long flags;</span><br><span class="line">        switch (cmd)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> CLOSE_CMD:</span><br><span class="line">                del_timer(&amp;dev-&gt;timer);</span><br><span class="line">            <span class="built_in">break</span> ;</span><br><span class="line">            <span class="keyword">case</span> OPEN_CMD:</span><br><span class="line">                spin_lock_irqsave(&amp;dev-&gt;lock,flags);</span><br><span class="line">                timeperiod = dev-&gt;timeperiod;</span><br><span class="line">                spin_unlock_irqrestore(&amp;dev-&gt;lock,flags);</span><br><span class="line">                mod_timer(&amp;dev-&gt;timer,jiffies+msecs_to_jiffies(timeperiod));</span><br><span class="line">            <span class="built_in">break</span> ;</span><br><span class="line">            <span class="keyword">case</span> SETPERIOD_CMD:</span><br><span class="line">            dev-&gt;timeperiod = arg;</span><br><span class="line">            mod_timer(&amp;dev-&gt;timer, jiffies + msecs_to_jiffies(arg));</span><br><span class="line">            <span class="built_in">break</span> ;     </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">return</span> ret ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static int timer_release(struct inode *inode, struct file *filp)</span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static const struct file_operations timer_fops = &#123;</span><br><span class="line">	.owner = THIS_MODULE,</span><br><span class="line">    .open  = timer_open ,</span><br><span class="line">    .release = timer_release,</span><br><span class="line">	.unlocked_ioctl	= timer_unlocked_ioctl,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static void  timer_function(unsigned long arg )</span><br><span class="line">&#123;</span><br><span class="line">    struct timer_dev *dev = (struct timer_dev*)arg;</span><br><span class="line">    static int sta = 1 ;</span><br><span class="line">    int timeperiod;</span><br><span class="line">     unsigned long flags;</span><br><span class="line">    sta = !sta ;</span><br><span class="line">    gpio_set_value(dev-&gt;led_gpio,sta);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     spin_lock_irqsave(&amp;dev-&gt;lock,flags);</span><br><span class="line">     timeperiod = dev-&gt;timeperiod;</span><br><span class="line">     spin_unlock_irqrestore(&amp;dev-&gt;lock,flags);</span><br><span class="line"></span><br><span class="line">   mod_timer(&amp;dev-&gt;timer,jiffies+msecs_to_jiffies(timeperiod));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static int __init timer_init(void )</span><br><span class="line">&#123;</span><br><span class="line">    int ret = 0;</span><br><span class="line">    </span><br><span class="line">    spin_lock_init(&amp;timer.lock);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(timer.major)</span><br><span class="line">    &#123;</span><br><span class="line">    timer.devid = MKDEV(timer.devid,0);</span><br><span class="line">    register_chrdev_region(timer.devid,TIMER_CNT,TIMER_NAME);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        ret = alloc_chrdev_region(&amp;timer.devid, 0, TIMER_CNT,TIMER_NAME);</span><br><span class="line">        timer.major = MAJOR(timer.devid);</span><br><span class="line">        timer.minor = MINOR(timer.devid);</span><br><span class="line">    &#125;</span><br><span class="line">    timer.cdev.owner = THIS_MODULE ;</span><br><span class="line">	cdev_init(&amp;timer.cdev, &amp;timer_fops);</span><br><span class="line">    cdev_add(&amp;timer.cdev, timer.devid,TIMER_CNT);</span><br><span class="line">	</span><br><span class="line">    /*è‡ªåŠ¨è®¾å¤‡èŠ‚ç‚¹*/</span><br><span class="line">    timer.class = class_create(THIS_MODULE, TIMER_NAME);</span><br><span class="line">	<span class="keyword">if</span> (IS_ERR(timer.class))</span><br><span class="line">		<span class="built_in">return</span> PTR_ERR(timer.class);</span><br><span class="line"></span><br><span class="line">    timer.device = device_create(timer.class, NULL, timer.devid, NULL, TIMER_NAME);</span><br><span class="line">				  </span><br><span class="line">	<span class="keyword">if</span> (IS_ERR(timer.device))</span><br><span class="line">		<span class="built_in">return</span> PTR_ERR(timer.device);</span><br><span class="line"></span><br><span class="line">        ret  = led_init(&amp;timer);</span><br><span class="line">        <span class="keyword">if</span>(ret  &lt;  0)</span><br><span class="line">        &#123;</span><br><span class="line">            goto fail_ledinit;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    init_timer(&amp;timer.timer);</span><br><span class="line">    timer.timer.function = timer_function;</span><br><span class="line">    timer.timer.data = (unsigned long ) &amp; timer;</span><br><span class="line">    timer.timer.expires = jiffies + msecs_to_jiffies(5000);/*500ms*/</span><br><span class="line">    add_timer(&amp;timer.timer);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0 ;</span><br><span class="line"></span><br><span class="line">    fail_ledinit:</span><br><span class="line">    <span class="built_in">return</span> ret ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void __exit timer_exit(void )</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    gpio_set_value(timer.led_gpio,1);</span><br><span class="line">    del_timer(&amp;timer.timer);</span><br><span class="line"></span><br><span class="line">    cdev_del(&amp;timer.cdev);</span><br><span class="line">    unregister_chrdev_region(timer.devid,TIMER_CNT);</span><br><span class="line">    device_destroy(timer.class,timer.devid);</span><br><span class="line">    class_destroy(timer.class);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module_init(timer_init);</span><br><span class="line">module_exit(timer_exit);</span><br><span class="line">MODULE_LICENSE(<span class="string">"GPL"</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">"ming"</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">ioctl(fd,cmd,arg);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µæ„Ÿå¼ä¼ æ„Ÿå™¨</title>
    <url>/Circuit-Lover/%E7%94%B5%E6%84%9F%E5%BC%8F%E4%BC%A0%E6%84%9F%E5%99%A8/</url>
    <content><![CDATA[<p>ç”µæ„Ÿå¼ä¼ æ„Ÿå™¨æ˜¯åˆ©ç”¨è¢«æµ‹é‡çš„å˜åŒ–å¼•èµ·çº¿åœˆè‡ªæ„Ÿæˆ–äº’æ„Ÿç³»æ•°çš„å˜åŒ–ï¼Œä»è€Œå¯¼è‡´çº¿åœˆç”µæ„Ÿé‡æ”¹å˜è¿™ä¸€ç‰©ç†ç°è±¡æ¥å®ç°æµ‹é‡çš„ã€‚å› æ­¤æ ¹æ®è½¬æ¢åŸç†ï¼Œç”µæ„Ÿå¼ä¼ æ„Ÿå™¨å¯ä»¥åˆ†ä¸ºè‡ªæ„Ÿå¼å’Œäº’æ„Ÿå¼ä¸¤å¤§ç±»ã€‚<br> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> ç”µæ„Ÿå¼ä¼ æ„Ÿå™¨ä¸å…¶å®ƒä¼ æ„Ÿå™¨ç›¸æ¯”ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</span><br><span class="line"> 1) ç»“æ„ç®€å•ï¼Œå·¥ä½œå¯é ï¼Œå¯¿å‘½é•¿ï¼›</span><br><span class="line"> 2) çµæ•åº¦å¥½ã€åˆ†è¾¨ç‡é«˜ã€‚èƒ½æµ‹é‡0.1Î¼mç”šè‡³æ›´å°çš„æœºæ¢°ä½ç§»ï¼Œèƒ½æ„Ÿå—0.1è§’ç§’çš„å¾®å°è§’ä½ç§»ï¼›</span><br><span class="line"> 3) é‡å¤æ€§å¥½ï¼Œçº¿æ€§åº¦ä¼˜è‰¯ã€‚åœ¨ä¸€å®šä½ç§»èŒƒå›´ (æœ€å°å‡ åå¾®ç±³ï¼Œæœ€å¤§å¯è¾¾æ•°åè‡³æ•°ç™¾æ¯«ç±³) å†…ï¼Œè¾“å‡ºçº¿æ€§åº¦å¯è¾¾Â±0.1%ï¼Œä¸”æ¯”è¾ƒç¨³å®šã€‚</span><br><span class="line"> 4) è¾“å‡ºä¿¡å·å¼ºã€‚ç”µå‹çµæ•åº¦ä¸€èˆ¬å¯è¾¾æ•°ç™¾æ¯«ä¼æ¯æ¯«ç±³ï¼Œå› æ­¤ï¼Œæœ‰åˆ©äºä¿¡å·çš„ä¼ è¾“å’Œæ”¾å¤§ã€‚</span><br><span class="line"></span><br><span class="line">ä¸»è¦ç¼ºç‚¹ï¼š</span><br><span class="line"> 1ï¼‰å­˜åœ¨é›¶ç‚¹æ®‹ä½™ç”µå‹ï¼›</span><br><span class="line"> 2ï¼‰çµæ•åº¦ã€çº¿æ€§åº¦å’Œæµ‹é‡èŒƒå›´ç›¸äº’åˆ¶çº¦ï¼›</span><br><span class="line"> 3ï¼‰ä¼ æ„Ÿå™¨è‡ªèº«é¢‘ç‡å“åº”ä½ï¼Œä¸é€‚ç”¨äºå¿«é€ŸåŠ¨æ€æµ‹é‡ã€‚</span><br></pre></td></tr></table></figure></p>
<p>è‡ªæ„Ÿï¼šé—­ç£è·¯å‹ã€å¼€ç£è·¯å‹</p>
<p>äº’æ„Ÿï¼šå·®åŠ¨å˜å‹å™¨ã€æ¶¡æµå¼</p>
<img src="/Circuit-Lover/%E7%94%B5%E6%84%9F%E5%BC%8F%E4%BC%A0%E6%84%9F%E5%99%A8/%E4%BC%A0%E6%84%9F%E5%99%A8.jpg" class>]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå†…æ ¸å®šæ—¶å™¨</title>
    <url>/uncategorized/ux%E5%86%85%E6%A0%B8%E5%AE%9A%E6%97%B6%E5%99%A8/</url>
    <content><![CDATA[<p><strong>èŠ‚æ‹ç‡</strong><br>ä¸­æ–­å‘¨æœŸæ€§äº§ç”Ÿçš„é¢‘ç‡å°±æ˜¯ç³»ç»Ÿé¢‘ç‡ï¼Œ<br>ä¹Ÿå«åšèŠ‚æ‹ç‡(tick rate)(æœ‰çš„èµ„æ–™ä¹Ÿå«ç³»ç»Ÿé¢‘ç‡)ï¼Œæ¯”å¦‚ 1000Hzï¼Œ100Hz ç­‰ç­‰è¯´çš„å°±æ˜¯ç³»ç»ŸèŠ‚æ‹ç‡ã€‚ç³»ç»ŸèŠ‚æ‹ç‡æ˜¯å¯ä»¥è®¾ç½®çš„ï¼Œå•ä½æ˜¯ Hz<br>é«˜èŠ‚æ‹ç‡å’Œä½èŠ‚<br>æ‹ç‡çš„ä¼˜ç¼ºç‚¹ï¼š<br>â‘ ã€é«˜èŠ‚æ‹ç‡ä¼šæé«˜ç³»ç»Ÿæ—¶é—´ç²¾åº¦ï¼Œå¦‚æœé‡‡ç”¨ 100Hz çš„èŠ‚æ‹ç‡ï¼Œæ—¶é—´ç²¾åº¦å°±æ˜¯ 10msï¼Œé‡‡ç”¨1000Hz çš„è¯æ—¶é—´ç²¾åº¦å°±æ˜¯ 1msï¼Œç²¾åº¦æé«˜äº† 10 å€ã€‚é«˜ç²¾åº¦æ—¶é’Ÿçš„å¥½å¤„æœ‰å¾ˆå¤šï¼Œå¯¹äºé‚£äº›å¯¹æ—¶é—´è¦æ±‚ä¸¥æ ¼çš„å‡½æ•°æ¥è¯´ï¼Œèƒ½å¤Ÿä»¥æ›´é«˜çš„ç²¾åº¦è¿è¡Œï¼Œæ—¶é—´æµ‹é‡ä¹Ÿæ›´åŠ å‡†ç¡®ã€‚<br>â‘¡ã€é«˜èŠ‚æ‹ç‡ä¼šå¯¼è‡´ä¸­æ–­çš„äº§ç”Ÿæ›´åŠ é¢‘ç¹ï¼Œé¢‘ç¹çš„ä¸­æ–­ä¼šåŠ å‰§ç³»ç»Ÿçš„è´Ÿæ‹…ï¼Œ1000Hz å’Œ 100Hzçš„ç³»ç»ŸèŠ‚æ‹ç‡ç›¸æ¯”ï¼Œä¸­æ–­æœåŠ¡å‡½æ•°å ç”¨å¤„ç†å™¨çš„æ—¶é—´å¢åŠ ï¼Œä½†æ˜¯ç°åœ¨çš„å¤„ç†å™¨æ€§èƒ½éƒ½å¾ˆå¼ºå¤§ï¼Œæ‰€ä»¥é‡‡ç”¨ 1000Hz çš„ç³»ç»ŸèŠ‚æ‹ç‡å¹¶ä¸ä¼šå¢åŠ å¤ªå¤§çš„è´Ÿè½½å‹åŠ›ã€‚æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µï¼Œé€‰æ‹©åˆé€‚çš„ç³»ç»ŸèŠ‚æ‹ç‡ï¼Œæœ¬æ•™ç¨‹æˆ‘ä»¬å…¨éƒ¨é‡‡ç”¨é»˜è®¤çš„ 100Hz ç³»ç»ŸèŠ‚æ‹ç‡ã€‚<br>æ–¹æ³•ä¸€ï¼šmake menuconfig<br>-&gt; Kernel Features<br>-&gt; Timer frequency (<choice> [=y])<br>æ–¹æ³•äºŒï¼š param.hæ–‡ä»¶ # define USER_HZ    100    </choice></p>
<p><strong>èŠ‚æ‹æ•° jiffies</strong></p>
<p>extern u64 __jiffy_data jiffies_64; /<em>64ç³»ç»Ÿ</em>/<br>extern unsigned long volatile __jiffy_data jiffies;/<em>32ç³»ç»Ÿ</em>/</p>
<p>ä¸ç®¡æ˜¯ 32 ä½è¿˜æ˜¯ 64 ä½çš„ jiffiesï¼Œéƒ½æœ‰æº¢å‡ºçš„é£é™©<br>å‡å¦‚ HZ ä¸ºæœ€å¤§å€¼ 1000 çš„æ—¶å€™ï¼Œ32 ä½çš„ jiffies åªéœ€è¦ 49.7 å¤©å°±å‘ç”Ÿäº†ç»•å›ï¼Œå¯¹äº 64 ä¸ºçš„ jiffies æ¥è¯´å¤§æ¦‚éœ€è¦5.8 äº¿å¹´æ‰èƒ½ç»•å›ï¼Œå› æ­¤ jiffies_64 çš„ç»•å›å¿½ç•¥ä¸è®¡ã€‚</p>
<p> HZ è¡¨ç¤ºä¸€ç§’çš„èŠ‚æ‹æ•°ï¼Œjiffies è¡¨ç¤ºç³»ç»Ÿè¿è¡Œçš„ jiffies èŠ‚æ‹æ•°ï¼Œæ‰€ä»¥ jiffies/HZ å°±<br>æ˜¯ç³»ç»Ÿè¿è¡Œæ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚</p>
<img src="/uncategorized/ux%E5%86%85%E6%A0%B8%E5%AE%9A%E6%97%B6%E5%99%A8/%E8%8A%82%E6%8B%8D%E5%87%BD%E6%95%B0.jpg" class>


<p>timer.hæ€»ç»“æ„ä½“ timer_list</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct timer_list &#123;</span><br><span class="line">struct list_head entry;</span><br><span class="line">unsigned long expires; /* å®šæ—¶å™¨è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯èŠ‚æ‹æ•° */</span><br><span class="line">struct tvec_base *base;</span><br><span class="line">void (*<span class="keyword">function</span>)(unsigned long); /* å®šæ—¶å¤„ç†å‡½æ•° */</span><br><span class="line">unsigned long data; /* è¦ä¼ é€’ç»™ <span class="keyword">function</span> å‡½æ•°çš„å‚æ•° */</span><br><span class="line">int slack;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct timer_list timer; /* å®šä¹‰å®šæ—¶å™¨ */</span><br><span class="line">/* å®šæ—¶å™¨å›è°ƒå‡½æ•° */</span><br><span class="line"> void <span class="keyword">function</span>(unsigned long arg)</span><br><span class="line">&#123;</span><br><span class="line">/*</span><br><span class="line">* å®šæ—¶å™¨å¤„ç†ä»£ç </span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">/* å¦‚æœéœ€è¦å®šæ—¶å™¨å‘¨æœŸæ€§è¿è¡Œçš„è¯å°±ä½¿ç”¨ mod_timer</span><br><span class="line"> * å‡½æ•°é‡æ–°è®¾ç½®è¶…æ—¶å€¼å¹¶ä¸”å¯åŠ¨å®šæ—¶å™¨ã€‚</span><br><span class="line"> */</span><br><span class="line"> mod_timer(&amp;dev-&gt;timertest, jiffies + msecs_to_jiffies(2000));</span><br><span class="line"> &#125;</span><br><span class="line"> /* åˆå§‹åŒ–å‡½æ•° */</span><br><span class="line"> void init(void)</span><br><span class="line"> &#123;</span><br><span class="line"> init_timer(&amp;timer); /* åˆå§‹åŒ–å®šæ—¶å™¨ */</span><br><span class="line"></span><br><span class="line"> timer.function = <span class="keyword">function</span>; /* è®¾ç½®å®šæ—¶å¤„ç†å‡½æ•° */</span><br><span class="line"> timer.expires=jffies + msecs_to_jiffies(2000);/* è¶…æ—¶æ—¶é—´ 2 ç§’ */</span><br><span class="line"> timer.data = (unsigned long)&amp;dev; /* å°†è®¾å¤‡ç»“æ„ä½“ä½œä¸ºå‚æ•° */</span><br><span class="line"></span><br><span class="line">add_timer(&amp;timer); /* å¯åŠ¨å®šæ—¶å™¨ */</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> /* é€€å‡ºå‡½æ•° */</span><br><span class="line"> void <span class="built_in">exit</span>(void)</span><br><span class="line"> &#123;</span><br><span class="line"> del_timer(&amp;timer); /* åˆ é™¤å®šæ—¶å™¨ */</span><br><span class="line"> /* æˆ–è€…ä½¿ç”¨ */</span><br><span class="line">del_timer_sync(&amp;timer);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">å‚è€ƒæ­£ç‚¹åŸå­</span><br></pre></td></tr></table></figure>
<p><strong>çº³ç§’ã€å¾®ç§’å’Œæ¯«ç§’å»¶æ—¶å‡½æ•°</strong><br>void ndelay(unsigned long nsecs)<br>void udelay(unsigned long usecs)<br>void mdelay(unsigned long mseces)</p>
]]></content>
  </entry>
  <entry>
    <title>Ubootå¸¸ç”¨å‘½ä»¤</title>
    <url>/Linux-Lover/oot%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p><strong>2.1ã€helpå‘½ä»¤</strong></p>
<p>æŸ¥çœ‹æŸä¸€ä¸ªå‘½ä»¤å¸®åŠ©ä¿¡æ¯ï¼Œï¼Ÿå‘½ä»¤å</p>
<p><strong>2.2ã€ä¿¡æ¯æŸ¥è¯¢</strong></p>
<p>1ã€bdinfo æ¿å­ä¿¡æ¯<br>2ã€printenvå‘½ä»¤ é‡è¦</p>
<p><strong>2.3ã€setenvå‘½ä»¤</strong></p>
<p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥åˆ é™¤ç¯å¢ƒå˜é‡<br>setenv xx = ç©º<br><strong>2.4ã€saveenvå‘½ä»¤ é‡ç‚¹</strong><br> ä¿å­˜ç¯å¢ƒå˜é‡ã€‚</p>
<p> <strong>2.5ã€å†…å­˜æ“ä½œå‘½ä»¤</strong></p>
<p> ï¼ˆ.b ä¸€ä¸ªå­—èŠ‚,.wä¸¤ä¸ªå­—èŠ‚ï¼Œ.lå››ä¸ªå­—èŠ‚ï¼‰<br>1ã€mdå‘½ä»¤   æ˜¾ç¤º<br>2ã€nmå‘½ä»¤  å†™å…¥<br>3ã€mmå‘½ä»¤  æŒç»­å†™å…¥<br>4ã€mwå‘½ä»¤   å¡«å……å†™å…¥ mw.l 0a0a0a0a 10(0x10å³ä¸º16ä¸ª)<br>5ã€cpå‘½ä»¤   å¤åˆ¶<br>6ã€cmpå‘½ä»¤   åªè¾“å‡ºä¸€æ ·ä¸å¦</p>
<p><strong>2.8ã€ç½‘ç»œæ“ä½œå‘½ä»¤</strong><br>ç½‘çº¿æ’å¦‚åˆ°ENET2ä¸Šï¼Œä¿è¯å¼€å‘æ¿å’Œç”µè„‘å¤„äºåŒä¸€ä¸ªç½‘æ®µå†…ã€‚</p>
<p>1ã€pingå‘½ä»¤ é‡ç‚¹</p>
<p>2ã€dhcpå‘½ä»¤</p>
<p>3ã€nfså‘½ä»¤ é‡ç‚¹</p>
<p>4ã€tftpå‘½ä»¤ é‡ç‚¹</p>
<p><strong>2.9 EMMC/SDå¡æ“ä½œå‘½</strong></p>
<p>1ã€mmcå‘½ä»¤</p>
<p>2ã€mmc infoå‘½ä»¤</p>
<p>3ã€mmc rescanå‘½ä»¤</p>
<p>4ã€mmc listå‘½ä»¤</p>
<p>5ã€mmc devå‘½ä»¤</p>
<p>6ã€mmc partå‘½ä»¤</p>
<p>7ã€mmc readå‘½ä»¤</p>
<p>8ã€mmc writeå‘½ä»¤</p>
<p>9ã€mmc eraseå‘½ä»¤æœ€å¥½ä¸è¦ä½¿ç”¨ï¼ï¼</p>
<p><strong>2.10 FATæ ¼å¼æ–‡ä»¶ç³»ç»Ÿæ“ä½œå‘½ä»¤</strong></p>
<p> å¯¹äºI.MX6Uæ¥è¯´ï¼ŒSD/EMMCåˆ†ä¸ºä¸‰ä¸ªåˆ†åŒºï¼š<br>ç¬¬ä¸€ä¸ªï¼šå­˜æ”¾uboot<br>ç¬¬äºŒä¸ª:å­˜æ”¾Linux zImageï¼Œ.dtbã€‚FAT<br>ç¬¬ä¸‰ä¸ªï¼šç³»ç»Ÿçš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ŒEXT4</p>
<p>1ã€fatinfoå‘½ä»¤</p>
<p>2ã€fatlså‘½ä»¤</p>
<p>3ã€fstypeå‘½ä»¤</p>
<p>4ã€fatloadå‘½ä»¤</p>
<p>5ã€fatwriteå‘½ä»¤</p>
<p><strong>2.11 EXTæ ¼å¼æ–‡ä»¶ç³»ç»Ÿæ“ä½œå‘½ä»¤</strong></p>
<p>1ã€ext4lså‘½ä»¤(ç•¥)</p>
<p>2.13 BOOTæ“ä½œå‘½ä»¤</p>
<p>1ã€boozå‘½ä»¤<br>è¦å¯åŠ¨Linuxå¿…é¡»å°†zImageï¼Œdtbæ”¾åˆ°DRAMã€‚</p>
<p>2ã€bootmå‘½ä»¤</p>
<p>3ã€bootå‘½ä»¤</p>
<p>2.14 å…¶ä»–å‘½ä»¤</p>
<p>1ã€resetå‘½ä»¤</p>
<p>2ã€goå‘½ä»¤</p>
<p>3ã€runå‘½ä»¤</p>
<p>setenv mybooyemmc</p>
<p>run mybootemmc</p>
<p>4ã€mtestå‘½ä»¤</p>
<h4 id="IMX6ULL-æˆ‘çš„å¸¸ç”¨å°è®°"><a href="#IMX6ULL-æˆ‘çš„å¸¸ç”¨å°è®°" class="headerlink" title="IMX6ULL æˆ‘çš„å¸¸ç”¨å°è®°"></a>IMX6ULL æˆ‘çš„å¸¸ç”¨å°è®°</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">bootcmd çš„ é»˜ è®¤ å€¼ å°± æ˜¯ CONFIG_BOOTCOMMAND </span><br><span class="line">bootargs çš„ é»˜ è®¤ å€¼ å°± æ˜¯CONFIG_BOOTARGS</span><br><span class="line"></span><br><span class="line">4.1 ä»EMMCå¯åŠ¨</span><br><span class="line"></span><br><span class="line">1ã€é¦–å…ˆæŸ¥çœ‹EMMCé‡Œé¢æ˜¯å¦æœ‰ç³»ç»Ÿï¼Œlinuxé•œåƒzImageå’Œ.dtbæ–‡ä»¶ã€‚å…ˆå°†å½“å‰è®¾å¤‡åˆ‡æ¢åˆ°EMMCï¼š</span><br><span class="line"></span><br><span class="line">mmc dev 1 Â  Â  &#x2F;&#x2F;åˆ‡æ¢åˆ°EMMC Â mmc dev 0 SD å¡</span><br><span class="line"></span><br><span class="line">fatls mmc 1:1  &#x2F;&#x2F;æŸ¥çœ‹EMMCåˆ†åŒº1é‡Œé¢çš„æ–‡ä»¶</span><br><span class="line">fatload mmc 1:1 80800000 zImage &#x2F;&#x2F;å°†zimageä¸‹è½½åˆ°DDRçš„0x80800000å¤„</span><br><span class="line">fatload mmc 1:1 83000000 imx6ull-14x14-emmc-7-1024x600-c.dtb &#x2F;&#x2F;å°†dtbè¯»å–åˆ°0X83000000</span><br><span class="line">bootz 80800000 â€“ 83000000 &#x2F;&#x2F;å¯åŠ¨å†…æ ¸</span><br><span class="line"></span><br><span class="line">å¦‚æœå†…æ ¸å¯åŠ¨æˆåŠŸï¼Œè¯´æ˜ubootæ”¯æŒemmcå¯åŠ¨ï¼ŒéªŒè¯æˆåŠŸã€‚</span><br><span class="line"></span><br><span class="line">4.2 ä»ç½‘ç»œå¯åŠ¨</span><br><span class="line"></span><br><span class="line"> tftp 80800000 zImage         &#x2F;&#x2F;ä»tftpæœåŠ¡å™¨ä¸‹è½½zimage</span><br><span class="line"> tftp 83000000 imx6ull-14x14-emmc-7-1024x600-c.dtb &#x2F;&#x2F;ä»tftpæœåŠ¡å™¨ä¸‹è½½.dtb     </span><br><span class="line"> bootz 80800000 â€“ 83000000 &#x2F;&#x2F;å¯åŠ¨ç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ç³»ç»Ÿçƒ§å†™</span><br><span class="line">tftp   ç¡®ä¿å¼€å¯ï¼ï¼ï¼ï¼ä¸è¦ä»å¤–ä¸å¤åˆ¶ç²˜è´´ï¼Œä¼šä¹±ç </span><br><span class="line"></span><br><span class="line">set bootcmd  &#39;tftp 80800000 zImage;tftp 83000000 imx6ull-ming-emmc.dtb;bootz 80800000 - 83000000;&#39;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">setenv bootargs &#39;console&#x3D;ttymxc0,115200 root&#x3D;&#x2F;dev&#x2F;mmcblk1p2 rootwait rw&#39;</span><br><span class="line"></span><br><span class="line">-----------------------------</span><br><span class="line"></span><br><span class="line">tftp 80800000 zImage</span><br><span class="line"></span><br><span class="line">tftp 83000000 imx6ull-14x14-emmc-4.3-800x480-c.dtb</span><br><span class="line"></span><br><span class="line">bootz 80800000 - 83000000</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">fatload mmc 1:1 80800000 zImage</span><br><span class="line"></span><br><span class="line">fatload mmc 1:1 83000000 imx6ull-14x14-emmc-4.3-800x480-c.dtb</span><br><span class="line"></span><br><span class="line">bootz 80800000 - 83000000</span><br><span class="line"></span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line">setenv bootcmd &#39;tftp 80800000 zImage;tftp 83000000 imx6ull-14x14-emmc-4.3-800x480-c.dt;bootz 80800000 - 83000000;&#39;</span><br><span class="line"></span><br><span class="line">saveenv</span><br><span class="line"></span><br><span class="line">boot</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------</span><br><span class="line"></span><br><span class="line">tftp 87800000 uart.bin</span><br><span class="line"></span><br><span class="line">go 87800000</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">grep -nr  xxxx</span><br><span class="line"></span><br><span class="line">æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹åŒ…å«å…³é”®å­—â€œNEONâ€çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶åˆ—å‡ºè¡Œå·ã€‚</span><br><span class="line"></span><br><span class="line">QAQ--------&#x2F;ä¿®æ”¹bootargsè¿›å…¥æ ¹ç³»ç»Ÿ&#x2F;----------</span><br><span class="line"></span><br><span class="line">setenv bootargs &#39;console&#x3D;ttymxc0,115200 root&#x3D;&#x2F;dev&#x2F;nfs rw nfsroot&#x3D;192.168.0.128:&#x2F;home&#x2F;ming&#x2F;linux&#x2F;nfs&#x2F;rootfs ip&#x3D;192.168.0.50:192.168.0.128:192.168.0.1:255.255.255.0::eth0:off&#39;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;buildrootfs æ ¹æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">setenv bootargs &#39;console&#x3D;tty1 console&#x3D;ttymxc0,115200 root&#x3D;&#x2F;dev&#x2F;nfs nfsroot&#x3D;192.168.0.128:&#x2F;home&#x2F;ming&#x2F;linux&#x2F;nfs&#x2F;rootfs rw ip&#x3D;192.168.0.50:192.168.0.128:192.168.0.1:255.255.255.0::eth0:off&#39;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ubuntuç³»ç»Ÿæ ¹ç›®å½•ç©ºé—´ä¸è¶³</title>
    <url>/Linux-Lover/ubuntu%E7%B3%BB%E7%BB%9F%E6%A0%B9%E7%9B%AE%E5%BD%95%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3/</url>
    <content><![CDATA[<img src="/Linux-Lover/ubuntu%E7%B3%BB%E7%BB%9F%E6%A0%B9%E7%9B%AE%E5%BD%95%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3/1.jpg" class>


<img src="/Linux-Lover/ubuntu%E7%B3%BB%E7%BB%9F%E6%A0%B9%E7%9B%AE%E5%BD%95%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3/2.jpg" class>





<img src="/Linux-Lover/ubuntu%E7%B3%BB%E7%BB%9F%E6%A0%B9%E7%9B%AE%E5%BD%95%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3/4.jpg" class>

<p>å‚è€ƒ<br><a href="https://blog.csdn.net/daemon_2017/article/details/80660372" target="_blank" rel="noopener">https://blog.csdn.net/daemon_2017/article/details/80660372</a></p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“å®Œæ•´æ€§</title>
    <url>/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7/</url>
    <content><![CDATA[<p><strong>æ•°æ®åº“çš„å®Œæ•´æ€§</strong></p>
<p>æ•°æ®åº“çš„æ­£ç¡®æ€§å’Œç›¸å®¹æ€§ã€‚</p>
<p>æ³¨ï¼šæ•°æ®çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§æ˜¯ä¸¤ä¸ªä¸åŒæ¦‚å¿µ<br>æ•°æ®çš„å®Œæ•´æ€§<br>é˜²æ­¢æ•°æ®åº“ä¸­å­˜åœ¨ä¸ç¬¦åˆè¯­ä¹‰çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯é˜²æ­¢æ•°æ®åº“ä¸­å­˜åœ¨ä¸æ­£ç¡®çš„æ•°æ®<br>é˜²èŒƒå¯¹è±¡ï¼šä¸åˆè¯­ä¹‰çš„ã€ä¸æ­£ç¡®çš„æ•°æ®<br>æ•°æ®çš„å®‰å…¨æ€§<br>ä¿æŠ¤æ•°æ®åº“é˜²æ­¢æ¶æ„çš„ç ´åå’Œéæ³•çš„å­˜å–<br>é˜²èŒƒå¯¹è±¡ï¼šéæ³•ç”¨æˆ·å’Œéæ³•æ“ä½œ</p>
<p>ä¸ºç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼ŒDBMSå¿…é¡»ï¼š<br>1.æä¾›å®šä¹‰å®Œæ•´æ€§çº¦æŸæ¡ä»¶çš„æœºåˆ¶<br>2.æä¾›å®Œæ•´æ€§æ£€æŸ¥çš„æ–¹æ³•<br>3.è¿çº¦å¤„ç†</p>
<p><strong>å®ä½“å®Œæ•´æ€§</strong></p>
<p>å®šä¹‰ä¸ºåˆ—çº§çº¦æŸæ¡ä»¶     (Sno  CHAR(9)  PRIMARY KEY<br>å®šä¹‰ä¸ºè¡¨çº§çº¦æŸæ¡ä»¶     PRIMARY KEY (Sno)</p>
<p><strong>å‚ç…§å®Œæ•´æ€§</strong></p>
<p> FOREIGN KEY (Cno) REFERENCES Course(Cno)    </p>
<p><strong>ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§</strong></p>
<p>åˆ—å€¼éç©ºï¼ˆNOT NULLï¼‰<br>åˆ—å€¼å”¯ä¸€ï¼ˆUNIQUEï¼‰<br>æ£€æŸ¥åˆ—å€¼æ˜¯å¦æ»¡è¶³ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ï¼ˆCHECKï¼‰<br> CHECK (Ssex=â€™å¥³â€™ OR Sname NOT LIKE â€˜Ms.%â€™)</p>
<p><em>_å®Œæ•´æ€§çº¦æŸå‘½åå­—å¥</em></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CONSTRAINT &lt;å®Œæ•´æ€§çº¦æŸæ¡ä»¶å&gt;</span><br><span class="line">ï¼»PRIMARY KEYçŸ­è¯­</span><br><span class="line">   |FOREIGN KEYçŸ­è¯­</span><br><span class="line">   |CHECKçŸ­è¯­ï¼½</span><br><span class="line"></span><br><span class="line">å¯ä»¥å…ˆåˆ é™¤åŸæ¥çš„çº¦æŸæ¡ä»¶ï¼Œå†å¢åŠ æ–°çš„çº¦æŸæ¡ä»¶</span><br><span class="line">ALTER TABLE Student</span><br><span class="line">ADD CONSTRAINT C1 CHECK (Sno BETWEEN 900000 AND 999999)ï¼Œ</span><br></pre></td></tr></table></figure>
<p><strong>åŸŸä¸­çš„å®Œæ•´æ€§é™åˆ¶</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï¼»ä¾‹15ï¼½å»ºç«‹ä¸€ä¸ªæ€§åˆ«åŸŸGenderDomainï¼Œå¹¶å¯¹å…¶ä¸­çš„é™åˆ¶å‘½å</span><br><span class="line">           CREATE DOMAIN GenderDomain CHAR(2)</span><br><span class="line">           CONSTRAINT GD CHECK ( VALUE IN (<span class="string">'ç”·'</span>ï¼Œ<span class="string">'å¥³'</span>) );</span><br><span class="line"></span><br><span class="line">åœ¨åŸŸGenderDomainä¸Šå¢åŠ é™åˆ¶æ¡ä»¶GDDã€‚</span><br><span class="line">          ALTER  DOMAIN  GenderDomain  </span><br><span class="line">         ADD CONSTRAINT GDD CHECK (VALUE IN ( <span class="string">'1'</span>ï¼Œ<span class="string">'0'</span>) ); </span><br><span class="line">	å°±æŠŠæ€§åˆ«çš„å–å€¼èŒƒå›´ç”±(<span class="string">'ç”·'</span>ï¼Œ<span class="string">'å¥³'</span>)æ”¹ä¸º ( <span class="string">'1'</span>ï¼Œ<span class="string">'0'</span>)</span><br></pre></td></tr></table></figure>
<p><strong>è§¦å‘å™¨</strong></p>
<p>å®šä¹‰è§¦å‘å™¨ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CREATE TRIGGERè¯­æ³•æ ¼å¼</span><br><span class="line">	   </span><br><span class="line">	  CREATE TRIGGER &lt;è§¦å‘å™¨å&gt;  </span><br><span class="line">       &#123;BEFORE | AFTER&#125; &lt;è§¦å‘äº‹ä»¶&gt; ON &lt;è¡¨å&gt;</span><br><span class="line">        FOR EACH  &#123;ROW | STATEMENT&#125;</span><br><span class="line">      ï¼»WHEN &lt;è§¦å‘æ¡ä»¶&gt;ï¼½</span><br><span class="line">        &lt;è§¦å‘åŠ¨ä½œä½“&gt;</span><br><span class="line"></span><br><span class="line">ï¼»ä¾‹18ï¼½  å®šä¹‰ä¸€ä¸ªBEFOREè¡Œçº§è§¦å‘å™¨ï¼Œä¸ºæ•™å¸ˆè¡¨Teacherå®šä¹‰å®Œæ•´æ€§è§„åˆ™â€œæ•™æˆçš„å·¥èµ„ä¸å¾—ä½äº4000å…ƒï¼Œå¦‚æœä½äº4000å…ƒï¼Œè‡ªåŠ¨æ”¹ä¸º4000å…ƒâ€ã€‚</span><br><span class="line">    CREATE TRIGGER Insert_Or_Update_Sal </span><br><span class="line">         BEFORE INSERT OR UPDATE ON Teacher  </span><br><span class="line">        /*è§¦å‘äº‹ä»¶æ˜¯æ’å…¥æˆ–æ›´æ–°æ“ä½œ*/</span><br><span class="line">         FOR EACH ROW                      /*è¡Œçº§è§¦å‘å™¨*/</span><br><span class="line">        AS BEGIN                                  /*å®šä¹‰è§¦å‘åŠ¨ä½œä½“ï¼Œæ˜¯PL/SQLè¿‡ç¨‹å—*/</span><br><span class="line">              IF (new.Job=<span class="string">'æ•™æˆ'</span>) AND (new.Sal &lt; 4000) THEN   </span><br><span class="line">              new.Sal :=4000;                </span><br><span class="line">              END IF;</span><br><span class="line">        END;</span><br></pre></td></tr></table></figure>


<p>æ¿€æ´»è§¦å‘å™¨<br>åŒä¸€ä¸ªè¡¨ä¸Šçš„å¤šä¸ªè§¦å‘å™¨æ¿€æ´»æ—¶éµå¾ªå¦‚ä¸‹çš„æ‰§è¡Œé¡ºåºï¼š<br>ï¼ˆ1ï¼‰ æ‰§è¡Œè¯¥è¡¨ä¸Šçš„BEFOREè§¦å‘å™¨ï¼›<br>ï¼ˆ2ï¼‰ æ¿€æ´»è§¦å‘å™¨çš„SQLè¯­å¥ï¼›<br>ï¼ˆ3ï¼‰ æ‰§è¡Œè¯¥è¡¨ä¸Šçš„AFTERè§¦å‘å™¨ã€‚</p>
<p>åˆ é™¤è§¦å‘å™¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DROP TRIGGER &lt;è§¦å‘å™¨å&gt; ON &lt;è¡¨å&gt;;</span><br><span class="line"></span><br><span class="line">DROP TRIGGER Insert_Sal ON Teacher;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>MySql Lover</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>unionçš„ç”¨æ³•åŠåº”ç”¨åœºæ™¯</title>
    <url>/C-C-Lover/nion%E7%9A%84%E7%94%A8%E6%B3%95%E5%8F%8A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/</url>
    <content><![CDATA[<p>unionçš„ç”¨æ³•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å¤§å°ä¸€å—å†…å­˜é€‰æœ€å¤§çš„é‚£ä¸ªå£°æ˜ã€‚</span><br><span class="line">struct&#123;</span><br><span class="line">	char name[20];</span><br><span class="line">    int num ;</span><br><span class="line">    char sex;</span><br><span class="line">    char profession;</span><br><span class="line">    union &#123;</span><br><span class="line">    <span class="built_in">float</span> score;</span><br><span class="line">    char course[20];</span><br><span class="line">    </span><br><span class="line"> Â  Â &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å…±ç”¨ä½“è¿˜çœŸæ˜¯è´´åˆ‡â€”â€”å®Œå…¨å°±æ˜¯å…±ç”¨ä¸€ä¸ªå†…å­˜é¦–åœ°å€ã€‚<br>nionæˆå‘˜å…±äº«åŒä¸€å—å¤§å°çš„å†…å­˜ï¼Œä¸€æ¬¡åªèƒ½ä½¿ç”¨å…¶ä¸­çš„ä¸€ä¸ªæˆå‘˜ï¼›<br>åº”ç”¨åœºæ™¯ï¼š</p>
<p>1ã€ä¸€ä¸ªå­¦ç”Ÿä¸è€å¸ˆçš„æ•°æ®è¡¨ä¸­ï¼Œæœ‰ä¸€é¡¹å…±ç”¨çš„ï¼ˆè€å¸ˆæ‰€æ•™è¯¾ç¨‹ä¸å­¦ç”Ÿè¯¾ç¨‹åˆ†æ•°ï¼‰<br>2ã€unioné‡çš„å­˜æ”¾é¡ºåºæ˜¯æ‰€æœ‰æˆå‘˜éƒ½ä»ä½åœ°å€å¼€å§‹å­˜æ”¾çš„ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­å¤§ç«¯å’Œå°ç«¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int checkCPU()</span><br><span class="line">&#123;</span><br><span class="line"> Â  Â  union cpu</span><br><span class="line"> Â   &#123;</span><br><span class="line">        int a;</span><br><span class="line">        char b;</span><br><span class="line">     &#125;c;</span><br><span class="line">    c.a = 1;</span><br><span class="line">    <span class="built_in">return</span> ( c.b == 1 );</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>å®¹å™¨ç»“æ„å°ç»“</title>
    <url>/C-C-Lover/%E5%AE%B9%E5%99%A8%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[<p>vector å•ç«¯ï¼Œå°¾æ’</p>
<p>deque åŒç«¯ï¼Œé¦–éƒ¨å°¾éƒ¨æ’</p>
<p>stack  å…ˆè¿›åå‡ºï¼ˆdequesé¦–éƒ¨é—­åˆï¼‰  pop push</p>
<p>quece é˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡º          </p>
<p>list   é“¾è¡¨ï¼Œéšæ—¶æ’å…¥</p>
<p>set å”¯ä¸€å€¼ï¼Œæ•°å€¼é¡ºåºæ’é¡ºåº</p>
<p>map/multimap    å…³è”å¼map&lt;T1,T2&gt; map TT;</p>
<p>map.insert(map&lt;int,string&gt;::value_type(1,â€å°æâ€)ï¼‰</p>
<p>map.insert(pair &lt;int , string &gt;(3,â€å°å¼ â€))ï¼›</p>
<p>map.insert(make_pair(-1,â€å°å¼ -1â€))ï¼›</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>å®¹å™¨ç®—æ³•å°ç»“</title>
    <url>/C-C-Lover/%E7%AE%97%E6%B3%95%E5%B0%8F%E7%BB%93/</url>
    <content><![CDATA[<p><strong>å¤´æ–‡ä»¶</strong><br>#include <algorithm> //ç®—æ³•<br>#include <numeric> //æ•°å­¦<br>#include <functional>//æ¨¡æ¿<br>#include <memory>//æ™ºèƒ½æŒ‡é’ˆ auto_ptr</memory></functional></numeric></algorithm></p>
<p><strong>æ¦‚å¿µ</strong><br>ä¸€å…ƒå‡½æ•°å¯¹è±¡ï¼šå‡½æ•°å‚æ•°1ä¸ªï¼›<br>äºŒå…ƒå‡½æ•°å¯¹è±¡ï¼šå‡½æ•°å‚æ•°2ä¸ªï¼›<br>ä¸€å…ƒè°“è¯å¯¹è±¡ï¼šå‡½æ•°å‚æ•°1ä¸ª,è¿”å›boolï¼›<br>äºŒå…ƒè°“è¯å¯¹è±¡ï¼šå‡½æ•°å‚æ•°2ä¸ª,è¿”å›boolï¼›</p>
<p>éå†ç®—æ³• ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">for_each(v1.begin(),v1.end(), show)   //å®¹å™¨ä¸ºint</span><br><span class="line"></span><br><span class="line">void show(const int &amp;iItem)  </span><br><span class="line"></span><br><span class="line">&#123;         cout&lt;&lt; iItem;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">transform() //è½¬ç§»å®¹å™¨ï¼Œç”¨äºåˆå¹¶ï¼Œå‡½æ•°è¿”å›å€¼</span><br><span class="line">transform(vecIntA.begin(),vecIntA.end(),vecIntA.begin(),increase);      </span><br><span class="line">int increase (int i) </span><br><span class="line"></span><br><span class="line">&#123;     <span class="built_in">return</span> i+1;  </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŸ¥æ‰¾ç®—æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adjacent_find()ï¼›æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ ï¼Œè¿”å›æŒ‡å‘è¿™å¯¹å…ƒç´ çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</span><br><span class="line"></span><br><span class="line">vector &lt;int&gt;::iterator it = adjacent_find(v.begin(),vend());</span><br><span class="line"></span><br><span class="line">binary_searchï¼ˆï¼‰;åœ¨æœ‰åºåºåˆ—ä¸­æŸ¥æ‰¾value,æ— åºä¸å¯</span><br><span class="line"></span><br><span class="line">bool bFind = binary_search(setInt.begin(),setInt.end(),5);</span><br><span class="line"></span><br><span class="line">countï¼ˆï¼‰ï¼›è®¡ç®—ä¸ªæ•°</span><br><span class="line"></span><br><span class="line">intiCount = count(vecInt.begin(),vecInt.end(),2);  </span><br><span class="line"></span><br><span class="line">count_if()ï¼›</span><br><span class="line"></span><br><span class="line">bool GreaterThree(int iNum)</span><br><span class="line"></span><br><span class="line">&#123;  <span class="keyword">if</span>(iNum&gt;=3)</span><br><span class="line">   &#123;</span><br><span class="line">   <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int iCount = count_if(vecIntA.begin(),vecIntA.end(), GreaterThree);</span><br><span class="line"></span><br><span class="line">find()ï¼›findé¡ºåºæŸ¥æ‰¾O(n)</span><br><span class="line"></span><br><span class="line">vector&lt;int&gt;::iterator it = find(vecInt.begin(), vecInt.end(), 5);</span><br><span class="line"></span><br><span class="line">find_if()ï¼›</span><br><span class="line"></span><br><span class="line">vector&lt;int&gt;::it = find_if(vecInt.begin(),vecInt.end(),GreaterThree);</span><br></pre></td></tr></table></figure>
<p>æ’åºç®—æ³•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">merge();åˆå¹¶æ’åº</span><br><span class="line"></span><br><span class="line">merge(vecIntA.begin(),vecIntA.end(),vecIntB.begin(),vecIntB.end(),vecIntC.begin();</span><br><span class="line"></span><br><span class="line">sort();å†…çœæ’åºO(n*log2n)</span><br><span class="line"></span><br><span class="line">sort(vecStu.begin(),vecStu.end(),Compare);//bool()å‡½æ•°</span><br><span class="line"></span><br><span class="line">random_shuffle();éšæœºæ’åº</span><br><span class="line"></span><br><span class="line">random_shuffle(str.begin(),str.end());   </span><br><span class="line"></span><br><span class="line">reverse()ï¼›ååº</span><br><span class="line"></span><br><span class="line">æ‹·è´å’Œæ›¿æ¢ç®—æ³•</span><br><span class="line"></span><br><span class="line">copy()ï¼›</span><br><span class="line"></span><br><span class="line">replace()ï¼›</span><br><span class="line"></span><br><span class="line">replace(vecIntA.begin(), vecIntA.end(), 3,8);          //ï¼ˆ1,3ï¼Œ5,3,9ï¼‰&#123;1,8,5,8,9&#125;</span><br><span class="line"></span><br><span class="line">replace_if(vecIntA.begin(),vecIntA.end(), GreaterThree, 8);           </span><br><span class="line"></span><br><span class="line">swap();</span><br><span class="line"></span><br><span class="line">swap(vecIntA,vecIntB);</span><br></pre></td></tr></table></figure>

<p>ç®—æœ¯å’Œç”Ÿæˆç®—æ³•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">accumulate()ï¼›</span><br><span class="line"></span><br><span class="line">int iSum = accumulate(vecIntA.begin(), vecIntA.end(), 100);</span><br><span class="line"></span><br><span class="line">fill()ï¼›</span><br><span class="line"></span><br><span class="line"> fill(vecIntA.begin(), vecIntA.end(),8);</span><br></pre></td></tr></table></figure>
<p>é›†åˆç®—æ³•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">set_union()  å¹¶é›†æœ‰åº</span><br><span class="line"></span><br><span class="line">set_intersection()äº¤é›†æœ‰åº</span><br><span class="line"></span><br><span class="line">set_difference()ç¬¬ä¸€ä¸ªæœ‰ç¬¬äºŒä¸ªæ²¡æœ‰çš„å·®é›†</span><br><span class="line"></span><br><span class="line">set_difference(vecIntA.begin(), vecIntA.end(),vecIntB.begin(), vecIntB.end(), vecIntC.begin());</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤šæ ¸å¤„ç†å™¨æ¦‚å¿µ</title>
    <url>/Linux-Lover/%E5%A4%9A%E6%A0%B8%E5%A4%84%E7%90%86%E5%99%A8/</url>
    <content><![CDATA[<p>è¿™ç§æ¶æ„åœ¨å¹¶å‘ç¨‹åºè®¾è®¡ä¸­ï¼Œå¤§è‡´ä¼šå¼•æ¥ä¸¤ä¸ªé—®é¢˜ã€‚<br>ä¸€ä¸ªæ˜¯å†…å­˜å¯è§æ€§ï¼Œä¸€ä¸ªæ˜¯Cacheä¸€è‡´æ€§æµé‡ã€‚<br>å†…å­˜å¯è§æ€§å±äºå¹¶å‘å®‰å…¨çš„é—®é¢˜ï¼ŒCacheä¸€è‡´æ€§æµé‡å¼•èµ·çš„æ˜¯æ€§èƒ½ä¸Šçš„é—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå¹¶å‘ä¸ç«äº‰</title>
    <url>/Linux-Lover/Linux%E5%B9%B6%E5%8F%91%E4%B8%8E%E7%AB%9E%E4%BA%89/</url>
    <content><![CDATA[<p><strong>Linux ç³»ç»Ÿå¹¶å‘äº§ç”Ÿçš„åŸå› </strong><br>â‘ ã€å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ï¼ŒLinux æ˜¯å¤šä»»åŠ¡(çº¿ç¨‹)çš„ç³»ç»Ÿï¼Œæ‰€ä»¥å¤šçº¿ç¨‹è®¿é—®æ˜¯æœ€åŸºæœ¬çš„åŸå› ã€‚<br>â‘¡ã€æŠ¢å å¼å¹¶å‘è®¿é—®ï¼Œä» 2.6 ç‰ˆæœ¬å†…æ ¸å¼€å§‹ï¼ŒLinux å†…æ ¸æ”¯æŒæŠ¢å ï¼Œä¹Ÿå°±æ˜¯è¯´è°ƒåº¦ç¨‹åºå¯ä»¥<br>åœ¨ä»»æ„æ—¶åˆ»æŠ¢å æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Œä»è€Œè¿è¡Œå…¶ä»–çš„çº¿ç¨‹ã€‚<br>â‘¢ã€ä¸­æ–­ç¨‹åºå¹¶å‘è®¿é—®ï¼Œè¿™ä¸ªæ— éœ€å¤šè¯´ï¼Œå­¦è¿‡ STM32 çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œç¡¬ä»¶ä¸­æ–­çš„æƒåˆ©å¯<br>æ˜¯å¾ˆå¤§çš„ã€‚<br>â‘£ã€SMP(å¤šæ ¸)æ ¸é—´å¹¶å‘è®¿é—®ï¼Œç°åœ¨ ARM æ¶æ„çš„å¤šæ ¸ SOC å¾ˆå¸¸è§ï¼Œå¤šæ ¸ CPU å­˜åœ¨æ ¸é—´å¹¶<br>å‘è®¿é—®ã€‚</p>
<p>ä¸´ç•ŒåŒºå°±æ˜¯å…±äº«æ•°æ®æ®µ<br>ä¸€èˆ¬åœ¨ç¼–å†™é©±åŠ¨çš„æ—¶å€™å°±è¦è€ƒè™‘åˆ°å¹¶å‘ä¸ç«äº‰ï¼Œè€Œä¸æ˜¯é©±åŠ¨éƒ½ç¼–å†™å®Œäº†ç„¶åå†å¤„ç†å¹¶å‘ä¸ç«äº‰ã€‚</p>
<p><strong>åŸå­æ“ä½œ</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;linux/atomic.h&gt;</span></span><br><span class="line">typedef struct &#123;</span><br><span class="line"> int counter;</span><br><span class="line">&#125; atomic_t;/*32ä½*/</span><br><span class="line">atomic_t v = ATOMIC_INIT(0); /* å®šä¹‰å¹¶åˆå§‹åŒ–åŸå­å˜é›¶ v=0 */</span><br><span class="line">atomic_set(10); /* è®¾ç½® v=10 */</span><br><span class="line">atomic_read(&amp;v); /* è¯»å– v çš„å€¼ï¼Œè‚¯å®šæ˜¯ 10 */</span><br><span class="line">atomic_inc(&amp;v); /*++v*/</span><br><span class="line">ç‰¹ç‚¹ï¼šåŸå­æ“ä½œåªèƒ½å¯¹æ•´å½¢å˜é‡æˆ–è€…ä½è¿›è¡Œä¿æŠ¤</span><br><span class="line"></span><br><span class="line">æ“ä½œä¸€ä¸ªatomic lock ; </span><br><span class="line">åˆå§‹èµ‹å€¼ä¸º1ï¼Œæ‰“å¼€æ—¶åˆ¤æ–­ï¼Œ 0 é”™è¯¯è¿”å› ï¼Œ 1 atomic_dec(lock)ï¼ŒåŒæ—¶å‡1ä¸º0 ï¼Œï¼ˆæ•…ä¸€ä¸ªæ—¶åˆ»åªèƒ½æ‰“å¼€ä¸€æ¬¡ï¼‰</span><br><span class="line">å…³é—­ atomic_inc(lock) +1 </span><br><span class="line">æ“ä½œè¿‡ç¨‹æ‰“ä¸å¼€ï¼Œéœ€ç­‰å¾…ç¬¬ä¸€ä¸ªé©±åŠ¨ä»»åŠ¡å®Œæˆï¼Œå…³é—­å‡½æ•°atomic_inc(lock) +1 ï¼Œç„¶åå†æ¬¡æ‰“å¼€</span><br></pre></td></tr></table></figure>
<p><strong>è‡ªæ—‹é”</strong><br>#include &lt;linux/atomic.h&gt;<br>è‡ªæ—‹é”çš„â€œè‡ªæ—‹â€ä¹Ÿå°±æ˜¯â€œåŸåœ°æ‰“è½¬â€çš„æ„æ€ï¼Œâ€œåŸåœ°æ‰“è½¬â€çš„ç›®çš„æ˜¯ä¸ºäº†ç­‰å¾…è‡ªæ—‹é”å¯ä»¥<br>ç”¨ï¼Œå¯ä»¥è®¿é—®å…±äº«èµ„æºã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">typedef struct spinlock &#123;</span><br><span class="line"> union &#123;</span><br><span class="line"> struct raw_spinlock rlock;</span><br><span class="line"> <span class="comment">#ifdef CONFIG_DEBUG_LOCK_ALLOC</span></span><br><span class="line"> <span class="comment"># define LOCK_PADSIZE (offsetof(struct raw_spinlock, dep_map))</span></span><br><span class="line"> struct &#123;</span><br><span class="line"> u8 __padding[LOCK_PADSIZE];</span><br><span class="line"> struct lockdep_map dep_map;</span><br><span class="line"> &#125;;</span><br><span class="line"><span class="comment">#endif</span></span><br><span class="line">&#125;;</span><br><span class="line"> &#125; spinlock_t;</span><br><span class="line">ç‰¹ç‚¹ï¼šè‡ªæ—‹é”é€‚ç”¨äºçŸ­æ—¶æœŸçš„è½»é‡çº§åŠ é”ï¼Œå¦‚æœé‡åˆ°éœ€è¦é•¿æ—¶é—´æŒæœ‰é”çš„åœºæ™¯é‚£å°±éœ€è¦æ¢å…¶ä»–çš„æ–¹æ³•äº†</span><br><span class="line"></span><br><span class="line">æ­»é”ï¼š</span><br><span class="line">è¢«è‡ªæ—‹é”ä¿æŠ¤çš„ä¸´ç•ŒåŒºä¸€å®šä¸èƒ½è°ƒç”¨ä»»ä½•èƒ½å¤Ÿå¼•èµ·ç¡çœ å’Œé˜»å¡çš„API å‡½æ•°ã€‚è‡ªæ—‹é”ä¼šè‡ªåŠ¨ç¦æ­¢æŠ¢å ï¼Œä¹Ÿå°±è¯´å½“çº¿ç¨‹ Aå¾—åˆ°é”ä»¥åä¼šæš‚æ—¶ç¦æ­¢å†…æ ¸æŠ¢å ã€‚å¦‚æœçº¿ç¨‹ A åœ¨æŒæœ‰é”æœŸé—´è¿›å…¥äº†ä¼‘çœ çŠ¶æ€ï¼Œé‚£ä¹ˆçº¿ç¨‹ A ä¼šè‡ªåŠ¨æ”¾å¼ƒ CPU ä½¿ç”¨æƒã€‚çº¿ç¨‹ B å¼€å§‹è¿è¡Œï¼Œçº¿ç¨‹ B ä¹Ÿæƒ³è¦è·å–é”ï¼Œä½†æ˜¯æ­¤æ—¶é”è¢« A çº¿ç¨‹æŒæœ‰ï¼Œè€Œä¸”å†…æ ¸æŠ¢å è¿˜è¢«ç¦æ­¢äº†ï¼çº¿ç¨‹ B æ— æ³•è¢«è°ƒåº¦å‡ºå»ï¼Œé‚£ä¹ˆçº¿ç¨‹ A å°±æ— æ³•è¿è¡Œï¼Œé”ä¹Ÿå°±æ— æ³•é‡Šæ”¾ï¼Œå¯¼è‡´æ­»é”ç°è±¡çš„å‘ç”Ÿ</span><br><span class="line"></span><br><span class="line">ä¸­æ–­é‡Œé¢å¯ä»¥ä½¿ç”¨è‡ªæ—‹é”ï¼Œä½†æ˜¯åœ¨ä¸­æ–­é‡Œé¢ä½¿ç”¨è‡ªæ—‹é”çš„æ—¶å€™ï¼Œåœ¨è·å–é”ä¹‹å‰ä¸€å®šè¦å…ˆç¦æ­¢æœ¬åœ°ä¸­æ–­(ä¹Ÿå°±æ˜¯æœ¬ CPU ä¸­æ–­ï¼Œå¯¹äºå¤šæ ¸ SOCæ¥è¯´ä¼šæœ‰å¤šä¸ª CPU æ ¸)ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´é”æ­»ç°è±¡çš„å‘ç”Ÿ</span><br><span class="line"></span><br><span class="line"> DEFINE_SPINLOCK(lock) /* å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªé” */</span><br><span class="line"></span><br><span class="line">/* çº¿ç¨‹ A */</span><br><span class="line">void <span class="function"><span class="title">functionA</span></span> ()&#123;</span><br><span class="line">unsigned long flags; /* ä¸­æ–­çŠ¶æ€ */</span><br><span class="line">spin_lock_irqsave(&amp;lock, flags) /* è·å–é” æ¨èç”¨è¿™ä¸ª*/</span><br><span class="line">/* ä¸´ç•ŒåŒº */</span><br><span class="line">spin_unlock_irqrestore(&amp;lock, flags)  /* é‡Šæ”¾é”æ¨èç”¨è¿™ä¸ª */</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">/* ä¸­æ–­æœåŠ¡å‡½æ•° */ </span><br><span class="line">void <span class="function"><span class="title">irq</span></span>() &#123;</span><br><span class="line">spin_lock(&amp;lock) /* è·å–é” */</span><br><span class="line"> /* ä¸´ç•ŒåŒº */</span><br><span class="line">spin_unlock(&amp;lock) /* é‡Šæ”¾é” */</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> å…¶ä»–é”ï¼š</span><br><span class="line"> è¯»å†™é”ã€‹ã€‹ã€‹é¡ºåºé”</span><br></pre></td></tr></table></figure>

<img src="/Linux-Lover/Linux%E5%B9%B6%E5%8F%91%E4%B8%8E%E7%AB%9E%E4%BA%89/%E8%87%AA%E6%97%8B%E9%94%81.jpg" class title="è‡ªæ—‹é”">


<p><strong>ä¿¡å·é‡</strong></p>
<p>ï¼ˆ1ï¼‰è‡ªæ—‹é”ï¼Œ<strong>ä¿¡å·é‡å¯ä»¥ä½¿çº¿ç¨‹è¿›å…¥ä¼‘çœ çŠ¶æ€</strong>ï¼Œä½†ä¿¡å·é‡ä¸èƒ½ç”¨äºä¸­æ–­ä¸­ï¼Œå› ä¸ºä¿¡å·é‡ä¼šå¼•èµ·ä¼‘çœ ï¼Œä¸­æ–­ä¸èƒ½ä¼‘çœ ã€‚<br>ï¼ˆ2ï¼‰å¦‚æœå…±äº«èµ„æºçš„æŒæœ‰æ—¶é—´æ¯”è¾ƒçŸ­ï¼Œé‚£å°±ä¸é€‚åˆä½¿ç”¨ä¿¡å·é‡äº†ï¼Œå› ä¸ºé¢‘ç¹çš„ä¼‘çœ ã€åˆ‡æ¢<br>çº¿ç¨‹å¼•èµ·çš„å¼€é”€è¦è¿œå¤§äºä¿¡å·é‡å¸¦æ¥çš„é‚£ç‚¹ä¼˜åŠ¿<br>(3)è®¡æ•°å‹ä¿¡å·é‡ä¸èƒ½ç”¨äºäº’æ–¥è®¿é—®ï¼Œå› ä¸ºå®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºã€‚(äºŒå€¼ä¿¡å·å€¼)<br>è‡ªåŠ¨å”¤é†’</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;linux/semaphore.h&gt;</span></span><br><span class="line">struct semaphore &#123;</span><br><span class="line">raw_spinlock_t lock;</span><br><span class="line">unsigned int count;</span><br><span class="line">struct list_head wait_list;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct semaphore sem; /* å®šä¹‰ä¿¡å·é‡ */</span><br><span class="line">sema_init(&amp;sem, 1)ï¼› /* åˆå§‹åŒ–ä¿¡å·é‡ */</span><br><span class="line">down(&amp;sem); /* ç”³è¯·ä¿¡å·é‡ */</span><br><span class="line">/* ä¸´ç•ŒåŒº */</span><br><span class="line">up(&amp;sem);</span><br></pre></td></tr></table></figure>

<img src="/Linux-Lover/Linux%E5%B9%B6%E5%8F%91%E4%B8%8E%E7%AB%9E%E4%BA%89/%E4%BF%A1%E5%8F%B7%E9%87%8F.jpg" class title="ä¿¡å·é‡">



<p><strong>äº’æ–¥ä½“-mutex</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct mutex &#123;</span><br><span class="line">/* 1: unlocked, 0: locked, negative: locked, possible waiters */</span><br><span class="line">atomic_t count;</span><br><span class="line">spinlock_t wait_lock;</span><br><span class="line">&#125;;</span><br><span class="line"> struct mutex lock; /* å®šä¹‰ä¸€ä¸ªäº’æ–¥ä½“ */</span><br><span class="line">mutex_init(&amp;lock); /* åˆå§‹åŒ–äº’æ–¥ä½“ */</span><br><span class="line"></span><br><span class="line"> mutex_lock(&amp;lock); /* ä¸Šé” */</span><br><span class="line"> /* ä¸´ç•ŒåŒº */</span><br><span class="line"> mutex_unlock(&amp;lock); /* è§£é” *</span><br><span class="line">â‘ ã€mutex å¯ä»¥å¯¼è‡´ä¼‘çœ ï¼Œå› æ­¤ä¸èƒ½åœ¨ä¸­æ–­ä¸­ä½¿ç”¨ mutexï¼Œ__ä¸­æ–­ä¸­åªèƒ½ä½¿ç”¨è‡ªæ—‹é”__ã€‚</span><br><span class="line">â‘¡ã€å’Œä¿¡å·é‡ä¸€æ ·ï¼Œmutex ä¿æŠ¤çš„ä¸´ç•ŒåŒºå¯ä»¥è°ƒç”¨å¼•èµ·é˜»å¡çš„ API å‡½æ•°ã€‚</span><br><span class="line">â‘¢ã€å› ä¸ºä¸€æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æŒæœ‰ mutexï¼Œå› æ­¤ï¼Œå¿…é¡»ç”± mutex çš„æŒæœ‰è€…é‡Šæ”¾ mutexã€‚å¹¶</span><br><span class="line">ä¸” mutex ä¸èƒ½é€’å½’ä¸Šé”å’Œè§£é”</span><br></pre></td></tr></table></figure>

<img src="/Linux-Lover/Linux%E5%B9%B6%E5%8F%91%E4%B8%8E%E7%AB%9E%E4%BA%89/%E4%BA%92%E6%96%A5%E4%BD%93.jpg" class title="äº’æ–¥ä½“">]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>gpioled åŸºæœ¬æ¡†æ¶</title>
    <url>/Linux-Lover/pioled-%E5%9F%BA%E6%9C%AC%E6%A1%86%E6%9E%B6/</url>
    <content><![CDATA[<p>ç”¨æ¥å¤ä¹ QvQ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;linux/module.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/init.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/kernel.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/fs.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/slab.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/gpio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/uaccess.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/io.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/cdev.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/device.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/of.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/of_address.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/of_irq.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/of_gpio.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define GPIOLED_CNT Â  1 Â  Â  Â  /*æ•°é‡*/</span></span><br><span class="line"><span class="comment">#define GPIOLED_NAME  "gpioled" Â   /*åå­—*/</span></span><br><span class="line"><span class="comment">#define LEDOFF Â  Â  Â  0 Â  Â  Â  /*å…³é—­*/ </span></span><br><span class="line"><span class="comment">#define LEDON Â  Â  Â  1 Â  Â  Â  Â  /*å¼€å¯*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*è®¾å¤‡ç»“æ„ä½“*/</span><br><span class="line">struct gpioled_dev&#123;</span><br><span class="line"></span><br><span class="line">    dev_t devid ;</span><br><span class="line">    int major;</span><br><span class="line">    int minor;</span><br><span class="line">    struct cdev cdev;</span><br><span class="line">    struct class *class;</span><br><span class="line">    struct device *device;</span><br><span class="line">    struct device_node * nd;</span><br><span class="line">    int led_gpio;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">struct gpioled_dev gpioled;</span><br><span class="line"></span><br><span class="line">static int led_open(struct inode *inode, struct file *filp)</span><br><span class="line">&#123;</span><br><span class="line"> Â  Â filp-&gt;private_data = &amp;gpioled; /*ä¼ é€’ç»“æ„*/</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int led_release(struct inode *inode, struct file *filp)</span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static ssize_t led_write(struct file *filp, const char __user *buf,</span><br><span class="line">			 size_t count, loff_t *ppos)</span><br><span class="line">&#123;</span><br><span class="line">    int ret ;</span><br><span class="line">    unsigned char databuf[1];</span><br><span class="line">    struct gpioled_dev *dev = filp-&gt;private_data;</span><br><span class="line">    ret = __copy_from_user(databuf,buf,count);</span><br><span class="line">    <span class="keyword">if</span> (ret &lt; 0)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> -EINVAL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(databuf[0] == LEDON)</span><br><span class="line">    &#123;</span><br><span class="line">        gpio_set_value(dev-&gt;led_gpio,0);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (databuf[0] == LEDOFF)</span><br><span class="line">    &#123;</span><br><span class="line">       gpio_set_value(dev-&gt;led_gpio, 1); </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">/* æ“ä½œé›† */</span><br><span class="line">static const struct file_operations led_fops = &#123;</span><br><span class="line">    .owner		=	THIS_MODULE,</span><br><span class="line">	.write		=	led_write,</span><br><span class="line">	.open		=	led_open,</span><br><span class="line">	.release	=	led_release,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static int __init led_init(void )</span><br><span class="line">&#123;</span><br><span class="line">int ret  ;</span><br><span class="line">    gpioled.major = 0;</span><br><span class="line">    <span class="keyword">if</span> (gpioled.major)</span><br><span class="line">    &#123;</span><br><span class="line">        gpioled.devid = MKDEV(gpioled.major,0);</span><br><span class="line">        register_chrdev_region(gpioled.devid,GPIOLED_CNT,GPIOLED_NAME);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        alloc_chrdev_region(&amp;gpioled.devid,0,GPIOLED_CNT,GPIOLED_NAME);</span><br><span class="line">        gpioled.major = MAJOR(gpioled.devid);</span><br><span class="line">        gpioled.minor = MINOR(gpioled.devid);</span><br><span class="line">    &#125;</span><br><span class="line">    printk(<span class="string">"gpioled.major = %d ,gpioled.minor = %d\r\n"</span>,gpioled.major,gpioled.minor);</span><br><span class="line"></span><br><span class="line">*åˆå§‹åŒ–cdev*/</span><br><span class="line">    gpioled.cdev.owner = THIS_MODULE ;</span><br><span class="line">    /*åˆå§‹åŒ–*/</span><br><span class="line"> Â  Â cdev_init(&amp;gpioled.cdev,&amp;led_fops);</span><br><span class="line">    </span><br><span class="line">  ret = cdev_add(&amp;gpioled.cdev,gpioled.devid,GPIOLED_CNT);</span><br><span class="line">     <span class="keyword">if</span>(ret &lt; 0) </span><br><span class="line">        goto fail_cdev;  </span><br><span class="line">    </span><br><span class="line">   </span><br><span class="line">    /*åˆ›å»ºclass*/</span><br><span class="line">    gpioled.class = class_create(THIS_MODULE,GPIOLED_NAME);</span><br><span class="line">    <span class="keyword">if</span>(IS_ERR(gpioled.class))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> PTR_ERR(gpioled.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /*åˆ›å»ºdevice*/</span><br><span class="line">   gpioled.device = device_create(gpioled.class,NULL,gpioled.devid,NULL,GPIOLED_NAME);</span><br><span class="line">    <span class="keyword">if</span>(IS_ERR(gpioled.device))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> PTR_ERR(gpioled.device);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">   /* 1ï¼Œè·å–è®¾å¤‡èŠ‚ç‚¹ */</span><br><span class="line">    gpioled.nd = of_find_node_by_path(<span class="string">"/gpioled"</span>);</span><br><span class="line">    <span class="keyword">if</span>(gpioled.nd == NULL) &#123;</span><br><span class="line">        ret = -EINVAL;</span><br><span class="line">        goto fail_findnode;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    /* 2, è·å–LEDæ‰€å¯¹åº”çš„GPIO */</span><br><span class="line">    gpioled.led_gpio = of_get_named_gpio(gpioled.nd, <span class="string">"led-gpios"</span>, 0);</span><br><span class="line">    <span class="keyword">if</span>(gpioled.led_gpio &lt; 0) &#123;</span><br><span class="line">        printk(<span class="string">"can't find led gpio\r\n"</span>);</span><br><span class="line">        ret = -EINVAL;</span><br><span class="line">        goto fail_findnode;</span><br><span class="line">    &#125;</span><br><span class="line">    printk(<span class="string">"led gpio num = %d\r\n"</span>, gpioled.led_gpio);</span><br><span class="line"></span><br><span class="line">    /* 3,ç”³è¯·IO */</span><br><span class="line">    ret = gpio_request(gpioled.led_gpio, <span class="string">"led-gpio"</span>);</span><br><span class="line">	<span class="keyword">if</span> (ret) &#123;</span><br><span class="line">		printk(<span class="string">"Failed to request the led gpio\r\n"</span>);</span><br><span class="line">		ret = -EINVAL;</span><br><span class="line">        goto fail_findnode;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    /* 4,ä½¿ç”¨IOï¼Œè®¾ç½®ä¸ºè¾“å‡º */</span><br><span class="line">    ret = gpio_direction_output(gpioled.led_gpio, 1);</span><br><span class="line">	<span class="keyword">if</span> (ret) &#123;</span><br><span class="line">		goto fail_setoutput;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    /* 5,è¾“å‡ºåº•ç”µå¹³ï¼Œç‚¹äº®LEDç¯*/</span><br><span class="line">    gpio_set_value(gpioled.led_gpio, 0);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line"></span><br><span class="line">    fail_setoutput:</span><br><span class="line">    gpio_free(gpioled.led_gpio);</span><br><span class="line">    fail_findnode:</span><br><span class="line">    fail_cdev:</span><br><span class="line">    unregister_chrdev_region(gpioled.devid,GPIOLED_CNT);</span><br><span class="line">    <span class="built_in">return</span> ret;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">static void __exit led_exit(void )</span><br><span class="line">&#123;</span><br><span class="line">      /* å…³ç¯ */</span><br><span class="line">    gpio_set_value(gpioled.led_gpio, 1);</span><br><span class="line"></span><br><span class="line">    cdev_del(&amp;gpioled.cdev);</span><br><span class="line">    unregister_chrdev_region(gpioled.devid,GPIOLED_CNT);</span><br><span class="line"></span><br><span class="line">    device_destroy(gpioled.class,gpioled.devid);</span><br><span class="line">    class_destroy(gpioled.class);</span><br><span class="line"></span><br><span class="line">    gpio_free(gpioled.led_gpio);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module_init(led_init);</span><br><span class="line">module_exit(led_exit);</span><br><span class="line">MODULE_LICENSE(<span class="string">"GPL"</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">"ming"</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾å¤‡æ ‘</title>
    <url>/Linux-Lover/%E8%AE%BE%E5%A4%87%E6%A0%91/</url>
    <content><![CDATA[<p>Linux å†…æ ¸ä¸­ ARM æ¶æ„ä¸‹æœ‰å¤ªå¤šçš„å†—ä½™çš„åƒåœ¾æ¿</p>
<p>çº§ä¿¡æ¯æ–‡ä»¶ï¼Œå¯¼è‡´ linus éœ‡æ€’ï¼Œç„¶å ARM ç¤¾åŒºå¼•å…¥äº†è®¾å¤‡æ ‘</p>
<p>dtsã€dtbsã€dtcã€dtsi<br>è®¾å¤‡æ ‘åŒ…æ‹¬DTCï¼ˆdevice tree compilerï¼‰,DTS(device tree sourceå’ŒDTBï¼ˆdevice tree blobï¼‰ã€‚DTCä¸ºç¼–è¯‘å·¥å…·ï¼Œå®ƒå¯ä»¥å°†.dtsæ–‡ä»¶ç¼–è¯‘æˆ.dtbæ–‡ä»¶ã€‚</p>
<p><strong>of æŸ¥æ‰¾è®¾å¤‡èŠ‚ç‚¹</strong></p>
<p>of_find_node_by_name å‡½æ•°é€šè¿‡èŠ‚ç‚¹åå­—æŸ¥æ‰¾æŒ‡å®šçš„èŠ‚ç‚¹</p>
<p>of_find_node_by_type å‡½æ•°é€šè¿‡ device_type å±æ€§æŸ¥æ‰¾æŒ‡å®šçš„èŠ‚ç‚¹</p>
<p>of_find_compatible_node å‡½æ•°æ ¹æ® device_type å’Œ compatible è¿™ä¸¤ä¸ªå±æ€§æŸ¥æ‰¾æŒ‡å®šçš„èŠ‚ç‚¹</p>
<p>of_find_node_by_path å‡½æ•°é€šè¿‡è·¯å¾„æ¥æŸ¥æ‰¾æŒ‡å®šçš„èŠ‚ç‚¹</p>
<p><strong>æŸ¥æ‰¾çˆ¶/ å­èŠ‚ç‚¹çš„ OF å‡½æ•°</strong></p>
<p>of_get_parent å‡½æ•°ç”¨äºè·å–æŒ‡å®šèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹(å¦‚æœæœ‰çˆ¶èŠ‚ç‚¹çš„è¯)</p>
<p>of_get_next_child å‡½æ•°ç”¨è¿­ä»£çš„æŸ¥æ‰¾å­èŠ‚ç‚¹</p>
<p><strong>æå–å±çš„ æ€§å€¼çš„ OF å‡½æ•°</strong></p>
<p>of_find_property å‡½æ•°ç”¨äºæŸ¥æ‰¾æŒ‡å®šçš„å±æ€§</p>
<p>of_property_count_elems_of_size å‡½æ•°ç”¨äºè·å–å±æ€§ä¸­å…ƒç´ çš„æ•°é‡ï¼Œ</p>
<p>of_property_read_u32_index å‡½æ•°ç”¨äºä»å±æ€§ä¸­è·å–æŒ‡å®šæ ‡å·çš„ u32 ç±»å‹æ•°æ®å€¼</p>
<p>of_property_read_u8_array å‡½æ•°</p>
<p>of_property_read_u16_array  å‡½æ•°</p>
<p>of_property_read_u32_array  å‡½æ•°</p>
<p>of_property_read_u64_array</p>
<p>of_property_read_string å‡½æ•°ç”¨äºè¯»å–å±æ€§ä¸­å­—ç¬¦ä¸²å€¼</p>
<p>of_n_addr_cells å‡½æ•°ç”¨äºè·å–#address-cells å±æ€§å€¼</p>
<p>of_size_cells å‡½æ•°ç”¨äºè·å–#size-cells å±æ€§å€¼</p>
<p>å…¶ä»–å¸¸ç”¨çš„ OF</p>
<p>of_device_is_compatible å‡½æ•°ç”¨äºæŸ¥çœ‹èŠ‚ç‚¹çš„ compatible å±æ€§æ˜¯å¦æœ‰åŒ…å« compat æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯æ£€æŸ¥è®¾å¤‡èŠ‚ç‚¹çš„å…¼å®¹æ€§</p>
<p>of_get_address å‡½æ•°ç”¨äºè·å–åœ°å€ç›¸å…³å±æ€§ï¼Œä¸»è¦æ˜¯â€œregâ€æˆ–è€…â€œassigned-addressesâ€å±æ€§</p>
<p>å€¼ï¼Œå‡½æ•°å±æ€§å¦‚ä¸‹</p>
<p>of_translate_address å‡½æ•°è´Ÿè´£å°†ä»è®¾å¤‡æ ‘è¯»å–åˆ°çš„åœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€</p>
<p>of_address_to_resource å‡½æ•°ï¼Œæ­¤å‡½æ•°çœ‹åå­—åƒæ˜¯ä»è®¾å¤‡æ ‘é‡Œé¢æå–èµ„æºå€¼ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå°±æ˜¯å°† reg å±æ€§å€¼ï¼Œç„¶åå°†å…¶è½¬æ¢ä¸º resource ç»“æ„ä½“ç±»å‹</p>
<p>of_iomap å‡½æ•°ç”¨äºç›´æ¥å†…å­˜æ˜ å°„ï¼Œä»¥å‰æˆ‘ä»¬ä¼šé€šè¿‡ ioremap å‡½æ•°æ¥å®Œæˆç‰©ç†åœ°å€åˆ°è™šæ‹Ÿåœ°å€çš„æ˜ å°„ï¼Œé‡‡ç”¨è®¾å¤‡æ ‘ä»¥åå°±å¯ä»¥ç›´æ¥é€šè¿‡ of_iomap å‡½æ•°æ¥è·å–å†…å­˜åœ°å€æ‰€å¯¹åº”çš„è™šæ‹Ÿåœ°å€ï¼Œä¸éœ€è¦ä½¿ç”¨ ioremap å‡½æ•°äº†ã€‚</p>
<p>å› ä¸ºè®¾å¤‡æ ‘æœ€ç»ˆæ˜¯è¢«é©±åŠ¨æ–‡ä»¶æ‰€ä½¿ç”¨çš„ï¼Œè€Œé©±åŠ¨æ–‡ä»¶å¿…é¡»è¦è¯»å–è®¾å¤‡æ ‘ä¸­çš„å±æ€§ä¿¡æ¯ï¼Œæ¯”å¦‚å†…å­˜ä¿¡æ¯ã€GPIO ä¿¡æ¯ã€ä¸­æ–­ä¿¡æ¯ç­‰ç­‰ã€‚è¦æƒ³åœ¨é©±åŠ¨ä¸­è¯»å–è®¾å¤‡æ ‘çš„å±æ€§å€¼ï¼Œé‚£ä¹ˆå°±å¿…é¡»ä½¿ç”¨ Linux å†…æ ¸æä¾›çš„ä¼—å¤šçš„ OF å‡½æ•°</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>yocto æ ¹æ–‡ä»¶å‘½ä»¤å°è®°</title>
    <url>/Linux-Lover/octo-%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E5%B0%8F%E8%AE%B0/</url>
    <content><![CDATA[<p>cat /proc/devices  è®¾å¤‡</p>
<p>/lib/module</p>
<p>depmod //ç¬¬ä¸€æ¬¡åŠ è½½é©±åŠ¨çš„æ—¶å€™éœ€è¦è¿è¡Œæ­¤å‘½ä»¤</p>
<p>modprobe chrdevbase</p>
<p>//å¯ä»¥çœ‹åˆ°â€œchrdevbase initï¼â€ chrdevbase_init è¾“å‡ºçš„ä¿¡æ¯ï¼Œè¯´æ˜æ¨¡å—åŠ è½½æˆåŠŸï¼</p>
<p>cat /proc/devices  //æŸ¥çœ‹è®¾å¤‡ä¿¡æ¯</p>
<p>mknod /dev/chrdevbase c 200 0//è®¾å¤‡èŠ‚ç‚¹</p>
<p>åŸå› å¦‚ä¸‹<br>ï¼ˆæ³¨æ„ï¼šè¿™é‡Œä¸è¦æœ‰åç¼€.koï¼Œä¸ç„¶ä¼šæ‰¾ä¸åˆ°ï¼Œå¦‚ï¼škoæ–‡ä»¶åæ˜¯chrdevbase.koï¼Œé‚£ä¹ˆmodprobe chrdevbaseï¼‰ å°±å¯ä»¥äº†ã€‚å…·ä½“æ­¥éª¤ï¼š</p>
<p>rmmod beep.ko</p>
<p>Â·Â·Â·<br>cd /proc/device-tree  è®¾å¤‡æ ‘ä¿¡æ¯</p>
<p>cat /proc/interrupts  è®¾å¤‡ä¸­æ–­</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>é©±åŠ¨å¼€å‘å‡†å¤‡çŸ¥è¯†</title>
    <url>/Linux-Lover/%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<p><strong>å­¦ä¹  Linuxé©±åŠ¨å¼€å‘</strong></p>
<p>linaroï¼ˆåˆ©çº³ç½—ï¼‰ 5.4.0   äº¤å‰ç¼–è¯‘å™¨<br>ubuntu 16.04.9<br>flash EMMC NANDâ€”â€”â€“ROM 8g<br>DDR3 â€”â€”RAM 512m<br>Linux å†…æ ¸ç‰ˆæœ¬ä¸º 4.1.15ï¼Œå…¶æ”¯æŒè®¾å¤‡æ ‘(Device tree)<br> Linux ä¸­çš„ä¸‰å¤§ç±»é©±åŠ¨ï¼šå­—ç¬¦è®¾å¤‡é©±åŠ¨ï¼ˆç®€å•ï¼‰ã€å—è®¾å¤‡é©±åŠ¨ï¼ˆå‚¨å­˜æœ‰å…³ï¼‰å’Œç½‘ç»œè®¾å¤‡é©±åŠ¨ï¼ˆä¸Šç½‘åŠŸèƒ½ï¼‰ï¼ˆè¿‡äºå¤æ‚å¼€å‘å•†å†™å¥½ï¼‰ã€‚</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>pinctrl +gpioç³»ç»Ÿ</title>
    <url>/Linux-Lover/nctrl-gpio%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<p><strong>pinctlå­ç³»ç»Ÿ è®¾ç½®GPIOå¤ç”¨ç”µæ°”å±æ€§</strong><br>imx6ull.dtsiæ–‡ä»¶</p>
<p>IOåˆ†ç±»ï¼š<br>IOMUXC SNVSæ§åˆ¶å™¨<br>IOMUXCæ§åˆ¶å™¨<br>gpræ§åˆ¶å™¨</p>
<p>æ·»åŠ ä¸€ä¸ªPINçš„ä¿¡æ¯ æ‰“å¼€imx6ul-pinfunc.h</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pinctrl_hog_1: hoggrp-1 &#123;</span><br><span class="line">			fsl,pins = &lt;</span><br><span class="line">				MX6UL_PAD_UART1_RTS_B__GPIO1_IO19	0x17059 </span><br><span class="line">			&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">MX6UL_PAD_UART1_RTS_B__GPIO1_IO19  0x0090 0x031C 0x0000 0x5 0x0</span><br><span class="line">&lt;mux_reg 	conf_reg	 input_reg	 mux_mode	 input_val&gt;</span><br><span class="line">0x0090 		0x031C 	 0x0000 	  0x5 		 0x0</span><br></pre></td></tr></table></figure>
<p>mux_regï¼šIOMUXCçˆ¶èŠ‚ç‚¹é¦–åœ°å€0x020e0000ï¼Œå› æ­¤UART1_RTS_Bè¿™ä¸ªPINçš„muxå¯„å­˜å™¨åœ°å€ å°±æ˜¯ï¼š0x020e0000+0x0090=0x020e 0090ã€‚<br>conf_regï¼š0x020e0000+0x031C=0x020e 031Cï¼Œè¿™ä¸ªå¯„å­˜å™¨å°±æ˜¯UART1_RTS_Bçš„ç”µæ°”å±æ€§é…ç½®å¯„å­˜å™¨ã€‚<br>input_regï¼Œä¸º0ï¼Œè¡¨ç¤ºUART1_RTS_Bè¿™ä¸ªPINæ²¡æœ‰inputåŠŸèƒ½ã€‚<br>mux_modeï¼š 5è¡¨ç¤ºå¤ç”¨ä¸ºGPIO1_IO19ï¼Œå°†å…¶å†™å…¥0x020e 0090<br>input_valï¼šå°±æ˜¯å†™å…¥input_regå¯„å­˜å™¨çš„å€¼ã€‚</p>
<p><strong>pincrtlé©±åŠ¨åŸç†ï¼Ÿ</strong><br>    å…¨å±€æœç´¢ï¼Œè®¾å¤‡èŠ‚ç‚¹é‡Œé¢çš„compatibleå±æ€§çš„å€¼ï¼Œçœ‹çœ‹åœ¨å“ªä¸ª.cæ–‡ä»¶é‡Œé¢æœ‰ï¼Œé‚£ä¹ˆæ­¤.cæ–‡ä»¶å°±æ˜¯é©±åŠ¨æ–‡ä»¶ã€‚<br>    æ‰¾åˆ°pinctrl-imx6ul.cæ–‡ä»¶ï¼Œé‚£ä¹ˆæ­¤æ–‡ä»¶å°±æ˜¯6UL/6ULLçš„pinctrlé©±åŠ¨æ–‡ä»¶ã€‚å½“é©±åŠ¨å’Œè®¾å¤‡åŒ¹é…ä»¥åæ‰§è¡Œï¼Œprobeå‡½æ•°ã€‚ä¹Ÿå°±æ˜¯imx6ul_pinctrl_probeaå‡½æ•°ï¼Œå…¶ä¸­<br>imx_pinconf_setå‡½æ•°è®¾ç½®PINçš„ç”µæ°”å±æ€§<br>imx_pmx_setå‡½æ•°è®¾ç½®PINçš„å¤ç”¨</p>
<p><strong>gpioå­ç³»ç»Ÿ è®¾ç½®å¼•è„šå±æ€§</strong></p>
<p>æ–‡ä»¶devicetree\bindings\gpio<br>ç”¨æ³•ï¼š<br>cd-gpios = &lt;&amp;gpio1 19 GPIO_ACTIVE_LOW&gt;;</p>
<p>è®¾å¤‡æ•°å‡½æ•°å¸¸ç”¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> gpioled.nd = of_find_node_by_path(<span class="string">"/gpioled"</span>);</span><br><span class="line">   <span class="keyword">if</span>(gpioled.nd == NULL) &#123;</span><br><span class="line">       ret = -EINVAL;</span><br><span class="line">       goto fail_findnode;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   /* 2, è·å–LEDæ‰€å¯¹åº”çš„GPIO */</span><br><span class="line">   gpioled.led_gpio = of_get_named_gpio(gpioled.nd, <span class="string">"led-gpios"</span>, 0);</span><br><span class="line">   <span class="keyword">if</span>(gpioled.led_gpio &lt; 0) &#123;</span><br><span class="line">       printk(<span class="string">"can't find led gpio\r\n"</span>);</span><br><span class="line">       ret = -EINVAL;</span><br><span class="line">       goto fail_findnode;</span><br><span class="line">   &#125;</span><br><span class="line">   printk(<span class="string">"led gpio num = %d\r\n"</span>, gpioled.led_gpio);</span><br><span class="line"></span><br><span class="line">   /* 3,ç”³è¯·IO */</span><br><span class="line">Â  Â ret = gpio_request(gpioled.led_gpio, <span class="string">"led-gpios"</span>);</span><br><span class="line"><span class="keyword">if</span> (ret) &#123;</span><br><span class="line">	printk(<span class="string">"Failed to request the led gpio\r\n"</span>);</span><br><span class="line">	ret = -EINVAL;</span><br><span class="line">       goto fail_findnode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">   /* 4,ä½¿ç”¨IOï¼Œè®¾ç½®ä¸ºè¾“å‡º */</span><br><span class="line">   ret = gpio_direction_output(gpioled.led_gpios, 1);</span><br><span class="line"><span class="keyword">if</span> (ret) &#123;</span><br><span class="line">	goto fail_setoutput;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line">   /* 5,è¾“å‡ºåº•ç”µå¹³ï¼Œç‚¹äº®LEDç¯*/</span><br><span class="line">   gpio_set_value(gpioled.led_gpio, 0);</span><br></pre></td></tr></table></figure>





<p><strong>gpioé©±åŠ¨åŸç†</strong><br>1ã€gpiolib<br>ä¸¤éƒ¨åˆ†ï¼Œç»™åŸå‚ç¼–å†™GPIOåº•å±‚é©±åŠ¨çš„ï¼Œç»™é©±åŠ¨å¼€å‘äººå‘˜ä½¿ç”¨GPIOæ“ä½œå‡½æ•°çš„ã€‚<br>ä½¿ç”¨gpiochip_addå‘ç³»ç»Ÿæ·»åŠ gpio_chipï¼Œè¿™äº›éƒ½æ˜¯åŠå¯¼ä½“åŸå‚åšçš„ï¼Œè¿™éƒ¨åˆ†å°±æ˜¯æœ€åº•å±‚çš„GPIOé©±åŠ¨ã€‚<br>2ã€gpioé©±åŠ¨<br>åœ¨drivers/gpioç›®å½•ä¸‹ï¼Œgpio-xxx.cæ–‡ä»¶ä¸ºå…·ä½“èŠ¯ç‰‡çš„é©±åŠ¨æ–‡ä»¶ï¼Œ</p>
<p>ç”³è¯·IOçš„æ—¶å€™å¤±è´¥ï¼Œå¤§éƒ¨åˆ†åŸå› æ˜¯è¿™ä¸ªIOè¢«å…¶ä»–å¤–è®¾å ç”¨äº†ã€‚æ£€æŸ¥è®¾å¤‡æ ‘ï¼ŒæŸ¥æ‰¾æœ‰å“ªäº›ä½¿ç”¨åŒä¸€IOçš„è®¾å¤‡ã€‚<br>    1ï¼Œæ£€æŸ¥å¤ç”¨ï¼Œä¹Ÿå°±æ˜¯pinctlè®¾ç½®ã€‚<br>    2ï¼Œgpioä½¿ç”¨</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¿¡å·é«˜çº§ç”¨æ³•(sigactionä¸sigqueue)</title>
    <url>/Linux-Lover/%E5%8F%B7%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<p><strong>ä¿¡å·çš„é«˜çº§ç”¨æ³•</strong></p>
<p>sigactionå‡½æ•°æ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°<br>int  sigaction(int signum,const struct sigaction *act,const struct sigaction *old);</p>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¿¡å·çš„å€¼ï¼Œå¯ä»¥ä¸ºé™¤SIGKILLåŠSIGSTOPå¤–çš„ä»»ä½•ä¸€ ä¸ªç‰¹å®šæœ‰æ•ˆçš„ä¿¡å·ï¼ˆä¸ºè¿™ä¸¤ä¸ªä¿¡å·å®šä¹‰è‡ªå·±çš„å¤„ç†å‡½æ•°ï¼Œå°†å¯¼è‡´ä¿¡å·å®‰è£…é”™è¯¯ï¼‰ã€‚<br>ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å‘ç»“æ„sigactionçš„ä¸€ä¸ªå®ä¾‹çš„æŒ‡é’ˆï¼Œåœ¨ç»“æ„ sigactionçš„å®ä¾‹ä¸­ï¼ŒæŒ‡å®šäº†å¯¹ç‰¹å®šä¿¡å·çš„å¤„ç†ï¼Œå¯ä»¥ä¸ºç©ºï¼Œè¿›ç¨‹ä¼šä»¥ç¼ºçœæ–¹å¼å¯¹ä¿¡å·å¤„ç†<br>ç¬¬ä¸‰ä¸ªå‚æ•°oldactæŒ‡å‘çš„å¯¹è±¡ç”¨æ¥ä¿å­˜åŸæ¥å¯¹ç›¸åº”ä¿¡å·çš„å¤„ç†ï¼Œå¯æŒ‡å®šoldactä¸ºNULLã€‚<br>åŸºæœ¬ç”¨æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sigaction ç»“æ„ä½“</span><br><span class="line">struct sigaction act;</span><br><span class="line">act.sa_sigaction &#x3D; myhandle;</span><br><span class="line">act.sa_flags &#x3D;SA_SIGINFO;&#x2F;&#x2F;è¡¨ç¤ºèƒ½æ¥å—æ•°æ®</span><br><span class="line">&#96;&#96;&#96;bash</span><br><span class="line">void handler(int sig)</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;recv a sig&#x3D;%d\n&quot;, sig);	</span><br><span class="line">&#125;</span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;         </span><br><span class="line">	struct sigaction act;</span><br><span class="line">	sigset_t sa_mask;</span><br><span class="line">	act.sa_handler &#x3D; handler;</span><br><span class="line">	act.sa_flags &#x3D; 0;</span><br><span class="line">	sigemptyset(&amp;act.sa_mask);</span><br><span class="line">	&#x2F;&#x2F;æµ‹è¯•ä¿¡å·å®‰è£…å‡½æ•°</span><br><span class="line">	sigaction(SIGINT, &amp;act, NULL);</span><br><span class="line">	for (;;)</span><br><span class="line">	&#123;</span><br><span class="line">	pause();</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°è£…my_signal</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#define ERR_EXIT(m) \</span></span><br><span class="line">    <span class="keyword">do</span> &#123; \</span><br><span class="line">        perror(m); \</span><br><span class="line">        <span class="built_in">exit</span>(EXIT_FAILURE); \</span><br><span class="line">    &#125; <span class="keyword">while</span>(0)void handler(int sig);/* ç³»ç»Ÿè°ƒç”¨signal()å®é™…ä¸Šè°ƒç”¨äº†sigaction() */</span><br><span class="line">__sighandler_t my_signal(int sig, __sighandler_t handler);int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    my_signal(SIGINT, handler);</span><br><span class="line">    <span class="keyword">for</span> (; ;)</span><br><span class="line">        pause();</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">__sighandler_t my_signal(int sig, __sighandler_t handler)</span><br><span class="line">&#123;</span><br><span class="line">    struct sigaction act;</span><br><span class="line">    struct sigaction oldact;</span><br><span class="line">    act.sa_handler = handler;</span><br><span class="line">    sigemptyset(&amp;act.sa_mask);</span><br><span class="line">    act.sa_flags = 0;</span><br><span class="line">    <span class="keyword">if</span> (sigaction(sig, &amp;act, &amp;oldact) &lt; 0)</span><br><span class="line">        <span class="built_in">return</span> SIG_ERR;</span><br><span class="line">    <span class="built_in">return</span> oldact.sa_handler; // è¿”å›å…ˆå‰çš„å¤„ç†å‡½æ•°æŒ‡é’ˆ&#125;void handler(int sig)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"rev sig=%d\n"</span>, sig);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/Linux-Lover/%E5%8F%B7%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/mysignal.jpg" class title="5sé˜»å¡ååˆ°è¾¾">

<p>typedef union sigval<br>{<br>int sival_int;<br>void *sival_ptr;<br>}sigval_t; </p>
<p>sigqueueæ–°çš„ä¿¡å·å‘é€å‡½æ•°<br>åŸå‹:int sigqueue(pid_t pid, int sig, const union sigval value);<br> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å®šæ¥æ”¶ä¿¡å·çš„è¿›ç¨‹id<br> ç¬¬äºŒä¸ªå‚æ•°ç¡®å®šå³å°†å‘é€çš„ä¿¡å·<br> ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè”åˆæ•°æ®ç»“æ„union sigvalï¼ŒæŒ‡å®šäº†ä¿¡å·ä¼ é€’çš„å‚æ•°ï¼Œå³é€šå¸¸æ‰€è¯´çš„4å­—èŠ‚å€¼ã€‚<br> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/stat.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/wait.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;fcntl.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;errno.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;string.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;signal.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;arpa/inet.h&gt;</span></span><br><span class="line"></span><br><span class="line">pid_t pid_Array[10]; //pid æ•°ç»„</span><br><span class="line">void myhandle(int sig,siginfo_t*st, void *p)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(sig == SIGRTMIN)   //</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"å¤„ç†å‡½æ•°ï¼šå­©å­1æ”¶åˆ°ä¿¡å·%d\n"</span>,st-&gt;si_int);</span><br><span class="line">			pid_Array[1] = st-&gt;si_int;   </span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">			<span class="keyword">if</span>(sig == SIGRTMIN+1)   //</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"å¤„ç†å‡½æ•°ï¼šå­©å­2æ”¶åˆ°ä¿¡å·%d\n"</span>,st-&gt;si_int);</span><br><span class="line">			pid_Array[3] = st-&gt;si_int;   </span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(sig == SIGRTMIN+2)   //</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"å¤„ç†å‡½æ•°ï¼šçˆ¶äº²æ”¶åˆ°ä¿¡å·%d\n"</span>,st-&gt;si_int);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"pid[0]:%d  pid[1]%d \n"</span>,pid_Array[0],pid_Array[1]);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	</span><br><span class="line">	pid_t pid;</span><br><span class="line">	</span><br><span class="line">	struct sigaction act;</span><br><span class="line">	act.sa_sigaction = myhandle;</span><br><span class="line">	act.sa_flags =SA_SIGINFO; //å¯ä¼ é€’æ•°æ®</span><br><span class="line">	int i=0;</span><br><span class="line">	/*æ³¨å†Œä¿¡å·*/</span><br><span class="line">     <span class="keyword">if</span>(sigaction(SIGRTMIN, &amp;act,NULL)&lt; 0)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"error sigaction\n"</span>);</span><br><span class="line">	<span class="built_in">return</span> -1;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(sigaction(SIGRTMIN+1, &amp;act,NULL)&lt; 0)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"error sigaction\n"</span>);</span><br><span class="line">	<span class="built_in">return</span> -1;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(sigaction(SIGRTMIN+2, &amp;act,NULL)&lt; 0)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"error sigaction\n"</span>);</span><br><span class="line">	<span class="built_in">return</span> -1;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/*forkä¸¤ä¸ªè¿›ç¨‹*/</span><br><span class="line">	<span class="keyword">for</span>(i=0;i&lt;2;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		pid_Array[i] = pid = fork();</span><br><span class="line">		<span class="keyword">if</span>(pid &lt; 0)</span><br><span class="line">			perror(<span class="string">"fork fail"</span>);</span><br><span class="line">			</span><br><span class="line">		<span class="keyword">if</span>(pid&gt;0)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"fork %d \n"</span>,i);</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">if</span>(pid ==  0)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"i:%d\n"</span>,i);</span><br><span class="line">			<span class="built_in">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		sleep(1);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	/*ä¸¤ä¸ªè¿›ç¨‹å¤„ç†å‡½æ•°*/</span><br><span class="line">	<span class="keyword">if</span>( pid==0 &amp;&amp; i == 0)  //ç¬¬ä¸€ä¸ªå­è¿›ç¨‹</span><br><span class="line">		&#123;</span><br><span class="line">			</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"å­è¿›ç¨‹1è¿è¡Œç„¶åç¡çœ \n"</span>);</span><br><span class="line">		sleep(10);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"ä¿¡å·ï¼Œå­è¿›ç¨‹1é†’æ¥\n"</span>);</span><br><span class="line">		union sigval value;</span><br><span class="line">		value.sival_int = getpid()*2;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"å­1ç»™å­2å‘ä¿¡å·  %d \n"</span>,getpid()*2);</span><br><span class="line">		sigqueue(pid_Array[1],SIGRTMIN+1,value);     </span><br><span class="line">		<span class="built_in">exit</span>(0);</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">if</span>(pid==0 &amp;&amp; i==1)//ç¬¬äºŒä¸ªå­è¿›ç¨‹</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"å­è¿›ç¨‹2è¿è¡Œç„¶åç¡çœ \n"</span>);</span><br><span class="line">		sleep(10);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"ä¿¡å·ï¼Œå­è¿›ç¨‹2é†’æ¥\n"</span>);</span><br><span class="line">		union sigval value;</span><br><span class="line">		value.sival_int = pid_Array[3];</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"å­2ç»™çˆ¶è¿›ç¨‹å‘ %d \n"</span>,pid_Array[3]);</span><br><span class="line">		sigqueue(getppid(),SIGRTMIN+2,value);     //çˆ¶è¿›ç¨‹pid</span><br><span class="line">			<span class="built_in">exit</span>(0);</span><br><span class="line">		&#125;</span><br><span class="line">		//çˆ¶è¿›ç¨‹</span><br><span class="line">		union sigval value;</span><br><span class="line">		value.sival_int = pid_Array[1]; //ä¼ é€’è¿›ç¨‹2 pid   ç»™è¿›ç¨‹ 1 </span><br><span class="line">		sigqueue(pid_Array[0],SIGRTMIN,value);    </span><br><span class="line"></span><br><span class="line">		sleep(10);</span><br><span class="line">		int mypid =0;</span><br><span class="line">		int  pidnum = 1 ;</span><br><span class="line">		<span class="keyword">while</span>((mypid = waitpid(-1,NULL,WNOHANG))&gt;0)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"å­è¿›ç¨‹ï¼š%d é€€å‡º%d\n"</span>,pidnum++,mypid); </span><br><span class="line">		&#125;</span><br><span class="line">	        <span class="built_in">printf</span>(<span class="string">"çˆ¶è¿›ç¨‹é€€å‡º\n"</span>);</span><br><span class="line">	     <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"> ---------------------------</span><br><span class="line"> ming@ubuntu:~/Day6/22$ ./3</span><br><span class="line">fork 0 </span><br><span class="line">i:0</span><br><span class="line">å­è¿›ç¨‹1è¿è¡Œç„¶åç¡çœ </span><br><span class="line">fork 1 </span><br><span class="line">i:1</span><br><span class="line">å­è¿›ç¨‹2è¿è¡Œç„¶åç¡çœ </span><br><span class="line">å¤„ç†å‡½æ•°ï¼šå­©å­1æ”¶åˆ°ä¿¡å·5135</span><br><span class="line">ä¿¡å·ï¼Œå­è¿›ç¨‹1é†’æ¥</span><br><span class="line">å­1ç»™å­2å‘ä¿¡å·  10268 </span><br><span class="line">å¤„ç†å‡½æ•°ï¼šå­©å­2æ”¶åˆ°ä¿¡å·10268</span><br><span class="line">ä¿¡å·ï¼Œå­è¿›ç¨‹2é†’æ¥</span><br><span class="line">å­2ç»™çˆ¶è¿›ç¨‹å‘ 10268 </span><br><span class="line">å¤„ç†å‡½æ•°ï¼šçˆ¶äº²æ”¶åˆ°ä¿¡å·10268</span><br><span class="line">pid[0]:5134  pid[1]5135 </span><br><span class="line">å­è¿›ç¨‹ï¼š1 é€€å‡º5134</span><br><span class="line">çˆ¶è¿›ç¨‹é€€å‡º</span><br><span class="line">-----------------------------</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„ï¼š<br>å’Œkillå‡½æ•°ç›¸æ¯”Int kill(pid_t pid, int siq)å¤šäº†å‚æ•°<br>ä½†sigqueue()åªèƒ½å‘ä¸€ä¸ªè¿›ç¨‹å‘é€ä¿¡å·ï¼Œè€Œä¸èƒ½å‘é€ä¿¡å·ç»™ä¸€ä¸ªè¿›ç¨‹ç»„ã€‚</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Socket-Apiç¼–ç¨‹</title>
    <url>/Linux-Lover/ocket-Api%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<p><strong>å¤šå¹¶å‘ï¼Ÿ</strong></p>
<p>æ¯æ¥ä¸€ä¸ªå®¢æˆ·ï¼Œåˆ›å»ºä¸€ä¸ªè¿›ç¨‹çš„æ€è·¯ã€‚</p>
<img src="/Linux-Lover/ocket-Api%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91.jpg" class title="åŸºæœ¬æ¡†æ¶">

<p><strong>æµåè®®ä¸ç²˜åŒ…</strong></p>
<p>tcp    å­—èŠ‚æµ æ— è¾¹ç•Œ<br>udp    æ¶ˆæ¯ã€æ•°æ®æŠ¥ æœ‰è¾¹ç•Œ<br>å¯¹ç­‰æ–¹ï¼Œä¸€æ¬¡è¯»æ“ä½œï¼Œä¸èƒ½ä¿è¯å®Œå…¨æŠŠæ¶ˆæ¯è¯»å®Œã€‚<br>å¯¹æ–¹æ¥å—æ•°æ®åŒ…çš„ä¸ªæ•°æ˜¯ä¸ç¡®å®šçš„ã€‚</p>
<hr>
<p><strong>TCP/IPåè®®çš„11ç§çŠ¶æ€</strong></p>
<p>ä¸¤ç«¯åŒæ—¶å…³é—­    å°†äº§ç”ŸclosingçŠ¶æ€ï¼Œæœ€ååŒæ–¹éƒ½è¿›å…¥TIME_WAITçŠ¶æ€ã€‚<br>æ‰§è¡Œä¸»åŠ¨å…³é—­çš„é‚£ä¸€ç«¯ï¼Œè¿›å…¥TIME_WAITçŠ¶æ€</p>
<img src="/Linux-Lover/ocket-Api%E7%BC%96%E7%A8%8B/11.jpg" class title="11ç§">


<p><strong>ä¸ºä»€ä¹ˆTCP/IPè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œå’Œå››æ¬¡æ–­å¼€ï¼Ÿ</strong></p>
<p>å…¨åŒå·¥åè®®ã€‚ï¼ˆå®¢æˆ·æ”¶å‘ã€æœåŠ¡æ”¶å‘ç¡®è®¤ï¼‰</p>
<p><em>_TIME_WAIT æ—¶é—´æ˜¯å¤šé•¿2MSL ï¼ˆ2å€çš„æœ€å¤§ç”Ÿå‘½æœŸæ—¶é—´ï¼‰</em></p>
<p>åŸå› ï¼šï¼ˆACK y+1ï¼‰å¦‚æœå‘é€å¤±è´¥å¯ä»¥é‡å‘ã€‚ æœ€å ä¸€ä¸ªç¡®è®¤åŒ…çš„ç¡®è®¤å®Œæˆã€‚<br>æœåŠ¡å™¨ç«¯å¤„äºclosedçŠ¶æ€ï¼Œä¸ç­‰äºå®¢æˆ·ç«¯ä¹Ÿå¤„äºclosedçŠ¶æ€ã€‚ã€‚</p>
<p><strong>SIGPIPE</strong></p>
<p>å¦‚æœå¯¹æ–¹socketå·²å…³é—­ï¼Œå¯¹ç­‰æ–¹å†å‘å†™æ•°æ®ï¼Œåˆ™ä¼šäº§ç”ŸSIGPIPEä¿¡å·<br>å¸¸åšå¿½ç•¥å¤„ç†ï¼š<br>signal(SIGPIPE, SIG_IGN); </p>
<p><strong>closeä¸shutdownåŒºåˆ«</strong><br>refcnt å¼•ç”¨è®¡æ•°</p>
<p>closeç»ˆæ­¢äº†æ•°æ®ä¼ é€çš„ä¸¤ä¸ªæ–¹å‘ã€‚<br>shutdownå¯ä»¥æœ‰é€‰æ‹©çš„ç»ˆæ­¢æŸä¸ªæ–¹å‘çš„æ•°æ®ä¼ é€æˆ–è€…ç»ˆæ­¢æ•°æ®ä¼ é€çš„ä¸¤ä¸ªæ–¹å‘ã€‚<br>shutdown how=1å°±å¯ä»¥ä¿è¯å¯¹ç­‰æ–¹æ¥æ”¶åˆ°ä¸€ä¸ªEOFå­—ç¬¦ï¼Œè€Œä¸ç®¡å…¶ä»–è¿›ç¨‹æ˜¯å¦å·²ç»æ‰“å¼€äº†å¥—æ¥å­—ï¼ˆå¼•ç”¨è®¡æ•°!ï¼‰ã€‚è€Œcloseä¸èƒ½ä¿è¯ï¼Œç›´åˆ°å¥—æ¥å­—å¼•ç”¨è®¡æ•°å‡ä¸º0æ—¶æ‰å‘é€ã€‚ä¹Ÿå°±æ˜¯è¯´ç›´åˆ°æ‰€æœ‰çš„è¿›ç¨‹éƒ½å…³é—­äº†å¥—æ¥å­—ã€‚</p>
<p><em>äº†è§£5ç§IOæ¨¡å‹_</em></p>
<p>é˜»å¡IO<br>éé˜»å¡IO<br>å¤ç”¨IO<br>ä¿¡å·é©±åŠ¨IO<br>å¼‚æ­¥IO</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxç³»ç»Ÿç§»æ¤é—®é¢˜</title>
    <url>/Linux-Lover/nux%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>å·¥å…·åŒºåˆ«</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Bootmgr  RAMç©ºé—´  é€‰æ‹©  windowsä¸‹</span><br><span class="line">Grub  å¼•å¯¼ä¸åŒçš„å†…æ ¸å¯åŠ¨ RAMç©ºé—´  é€‰æ‹©  æ”¯æŒå¤šæ“ä½œç³»ç»Ÿ</span><br><span class="line">BIOS  åˆå§‹åŒ–ç¡¬ä»¶ä¸èƒ½å¼•å¯¼OSå†…æ ¸   ROMèŠ¯ç‰‡ä¸Šçš„ç¨‹åº å¼€å¯æ—¶è¿è¡Œçš„ç¬¬ä¸€ä¸ªç¨‹åº</span><br><span class="line">Bootloader å¼•å¯¼å†…æ ¸ç¨‹åºè¿è¡Œ RAMç©ºé—´ å†…æ ¸è¿è¡Œå‰çš„ç¨‹åº Bootloader =BIOS+Grub/Bootmgr </span><br><span class="line">U-boot  é€šç”¨Bootloader</span><br><span class="line">U-Bootï¼Œå…¨ç§°ä¸ºUniversal Boot Loaderï¼Œå³é€šç”¨Bootloader</span><br></pre></td></tr></table></figure>
<p><strong>ARM U-boot å†…æ ¸ä¼ é€’å‚æ•°</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">â€¢	U-bootå¼•å¯¼ç¨‹åºï¼Œåœ¨å¯åŠ¨çš„æ—¶å€™ä¼šç»™ç»™Linux Kernelä¼ é€’å¾ˆå¤šå‚æ•°</span><br><span class="line">â€¢	ä¸²å£æ³¢ç‰¹ç‡ï¼ŒRAMå¤§å°ï¼Œè§†é¢‘fbï¼ŒMACåœ°å€ç­‰</span><br><span class="line">â€¢	è®¾å¤‡æ ‘çš„å…¥å£åœ°å€</span><br><span class="line">â€¢	u-bootå¦‚ä½•è¿›è¡Œä¼ é€’çš„ï¼Ÿ</span><br><span class="line">â€¢	U-bootæŠŠè¦ä¼ é€’ç»™kernelçš„ä¸œè¥¿ï¼šä¿å­˜åœ¨struct tagæ•°æ®ç»“æ„ä¸­</span><br><span class="line">â€¢	å¯åŠ¨kernelæ—¶ï¼ŒæŠŠè¿™ä¸ªç»“æ„ä½“çš„ç‰©ç†åœ°å€ä¼ ç»™kernel</span><br><span class="line">â€¢	kernelè§£æä¼ é€’çš„å‚æ•°ï¼Ÿ</span><br><span class="line">â€¢	Linuxå†…æ ¸é€šè¿‡è¿™ä¸ªåœ°å€ï¼Œç”¨parse_tagsåˆ†æå‡ºä¼ é€’è¿‡æ¥çš„å‚æ•°</span><br><span class="line"></span><br><span class="line">1ã€å†…æ ¸å¼•å¯¼ç¨‹ arch/arm/lib/vectors.S   ç”¨å®Œé‡Šæ”¾ kernel_entry()</span><br><span class="line">2ã€å†…æ ¸å¯åŠ¨</span><br><span class="line">æ‰§è¡Œhead-armv.S     å…³é—­ä¸­æ–­ã€å…³é—­ MMUã€‚â‘¡ã€å…³é—­ </span><br><span class="line">ENTERY(stxet)      arch/arm/kernel/head.S</span><br><span class="line">Start_kernel();</span><br><span class="line"></span><br><span class="line">ARMæ¶æ„ä¸Šï¼Œu-bootå‘Linuxå†…æ ¸ä¼ é€’å‚æ•°åˆ©ç”¨äº†R0ï¼ŒR1å’ŒR2ä¸‰ä¸ªå¯„å­˜å™¨</span><br></pre></td></tr></table></figure>
<img src="/Linux-Lover/nux%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D%E9%97%AE%E9%A2%98/linux.jpg" class>


<p>Linuxé©±åŠ¨å¼€å‘</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¸»è®¾å¤‡å·</span><br><span class="line">â€¢	ä¸»è®¾å¤‡å·æ ‡è¯†è®¾å¤‡å¯¹åº”çš„é©±åŠ¨ç¨‹åºã€‚</span><br><span class="line">æ¬¡è®¾å¤‡å·</span><br><span class="line">â€¢	æ¬¡è®¾å¤‡å·ç”±å†…æ ¸ä½¿ç”¨ï¼Œç”¨äºæ­£ç¡®ç¡®å®šè®¾å¤‡æ–‡ä»¶æ‰€æŒ‡çš„è®¾å¤‡ã€‚</span><br><span class="line">å­—ç¬¦è®¾å¤‡çš„ä¸¤ç§æ³¨å†Œæ–¹å¼</span><br><span class="line">void cdev_init(struct cdev *cdev, struct file_operations *fops)</span><br><span class="line">int register_chrdev(unsigned int major, const char *namem , struct file_operations *fopen);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">é—®é¢˜ï¼šinsomdåŠ è½½ä¸€ä¸ªé©±åŠ¨æ¨¡å—ï¼Œä¼šæ‰§è¡Œæ¨¡å—ä¸­çš„é‚£ä¸ªå‡½æ•°ï¼Ÿrmmodå‘¢ï¼Ÿè¿™ä¸¤ä¸ªå‡½æ•°åœ¨è®¾è®¡ä¸Šè¦æ³¨æ„ä»€ä¹ˆï¼Ÿé‡åˆ°è¿‡å¸è½½é©±åŠ¨å‡ºç°å¼‚å¸¸æ²¡ï¼Ÿæ˜¯ä»€ä¹ˆé—®é¢˜å¼•èµ·çš„ï¼Ÿ</span><br><span class="line">$ insmod  hello.ko  // æ¨¡å—åŠ è½½å‡½æ•° , åªåŠ è½½hello.koæ¨¡å—;</span><br><span class="line">$ modprobe  -r hello.ko	// æ¨¡å—åŠ è½½å‡½æ•°,  å°†åŠ è½½hello.ko ä¾èµ–çš„æ‰€æœ‰æ¨¡å—;</span><br><span class="line">ï¼ˆ1ï¼‰insmodè°ƒç”¨åˆå§‹å‡½æ•°ï¼Œrmmodè°ƒç”¨é€€å‡ºå‡½æ•°ï¼›</span><br><span class="line">ï¼ˆ2ï¼‰å¸è½½æ¨¡å—æ—¶æ›¾å‡ºç°å¸è½½å¤±è´¥çš„åŸå› ï¼šåŸå› æ˜¯å­˜åœ¨è¿›è¡Œä¸­çš„ä½¿ç”¨æ¨¡å—ï¼Œæ£€æŸ¥ä»£ç åå‘ç°äº§ç”Ÿäº†æ­»é”çš„é—®é¢˜ã€‚</span><br><span class="line">ï¼ˆ3ï¼‰åˆå§‹åŒ–å‡½æ•°ä¸­ç”³è¯·çš„èµ„æºåœ¨å‡ºå£å‡½æ•°ä¸­è¦é‡Šæ”¾ï¼šä¹Ÿå°±æ˜¯ä¸€ä¸ªæ¨¡å—æ³¨å†Œè¿›å†…æ ¸ï¼Œé€€å‡ºå†…æ ¸æ—¶è¦æ¸…ç†æ‰€å¸¦æ¥çš„å½±å“ï¼Œå¸¦èµ°ä¸€åˆ‡ä¸ç•™ä¸‹ä¸€ç‚¹ç—•è¿¹ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoå¸¸ç”¨å‘½ä»¤</title>
    <url>/Other-Lover/xo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>npm install hexo-asset-image â€“save</p>
<p>npm install <a href="https://github.com/7ym0n/hexo-asset-image">https://github.com/7ym0n/hexo-asset-image</a> â€“save</p>
<p>hexo newâ€postNameâ€ #æ–°å»ºæ–‡ç« </p>
<p>hexo new pageâ€pageNameâ€ #æ–°å»ºé¡µé¢</p>
<p>hexo new page categories åˆ†ç±»é¡µé¢</p>
<p>hexo new page tags åˆ†ç±»é¡µé¢</p>
<p>hexo new page about  å…³äºé¡µé¢</p>
<p>hexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•</p>
<p>hexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œâ€™ctrl + câ€™å…³é—­serverï¼‰</p>
<p>hexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°æŒ‡å®šç©ºé—´</p>
<p>hexo help # æŸ¥çœ‹å¸®åŠ©</p>
<p>hexo version #æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬</p>
<p>hexo server æœ¬åœ°</p>
<p>hexo deploy éƒ¨ç½²</p>
<table>
<thead>
<tr>
<th>å­¦å·</th>
<th>å§“å</th>
<th>åºå·</th>
</tr>
</thead>
<tbody><tr>
<td>å°æ˜</td>
<td>ç”·</td>
<td>5</td>
</tr>
<tr>
<td>å°çº¢</td>
<td>å¥³</td>
<td>79</td>
</tr>
<tr>
<td>å°é™†</td>
<td></td>
<td>192</td>
</tr>
</tbody></table>
<p><strong>ç€é‡å·</strong></p>
<p><em>è¿™æ˜¯æ–œä½“</em> æˆ– <em>è¿™ä¹Ÿæ˜¯æ–œä½“</em></p>
<p><strong>è¿™æ˜¯ç²—ä½“</strong></p>
<p><strong><em>è¿™æ˜¯åŠ ç²—æ–œä½“</em></strong></p>
<p><del>è¿™æ˜¯åˆ é™¤çº¿</del></p>
<p>å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>æ¨èé“¾æ¥ï¼š<a href="https://www.simon96.online/2018/10/12/hexo-tutorial/" target="_blank" rel="noopener">https://www.simon96.online/2018/10/12/hexo-tutorial/</a><br>èƒŒæ™¯æ¸…æ™°åº¦ï¼š<a href="https://www.zhihu.com/question/268140594/answer/335335120" target="_blank" rel="noopener">https://www.zhihu.com/question/268140594/answer/335335120</a></p>
<h1 id="ä¸€çº§æ ‡é¢˜"><a href="#ä¸€çº§æ ‡é¢˜" class="headerlink" title="ä¸€çº§æ ‡é¢˜"></a>ä¸€çº§æ ‡é¢˜</h1><h2 id="äºŒçº§æ ‡é¢˜"><a href="#äºŒçº§æ ‡é¢˜" class="headerlink" title="äºŒçº§æ ‡é¢˜"></a>äºŒçº§æ ‡é¢˜</h2><h3 id="ä¸‰çº§æ ‡é¢˜"><a href="#ä¸‰çº§æ ‡é¢˜" class="headerlink" title="ä¸‰çº§æ ‡é¢˜"></a>ä¸‰çº§æ ‡é¢˜</h3><h4 id="å››çº§æ ‡é¢˜"><a href="#å››çº§æ ‡é¢˜" class="headerlink" title="å››çº§æ ‡é¢˜"></a>å››çº§æ ‡é¢˜</h4><h5 id="äº”çº§æ ‡é¢˜"><a href="#äº”çº§æ ‡é¢˜" class="headerlink" title="äº”çº§æ ‡é¢˜"></a>äº”çº§æ ‡é¢˜</h5><h6 id="å…­çº§æ ‡é¢˜"><a href="#å…­çº§æ ‡é¢˜" class="headerlink" title="å…­çº§æ ‡é¢˜"></a>å…­çº§æ ‡é¢˜</h6>]]></content>
      <categories>
        <category>Other Lover</category>
      </categories>
  </entry>
  <entry>
    <title>æ¶æ„æ¦‚å¿µ</title>
    <url>/Linux-Lover/%E6%9E%B6%E6%9E%84%E6%A6%82%E5%BF%B5/</url>
    <content><![CDATA[<img src="/Linux-Lover/%E6%9E%B6%E6%9E%84%E6%A6%82%E5%BF%B5/%E6%9E%B6%E6%9E%84.jpg" class title="æ¶æ„æ¦‚å¿µ">]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å˜é‡çŸ¥è¯†ç‚¹</title>
    <url>/C-C-Lover/%E5%8F%98%E9%87%8F%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    <content><![CDATA[<p>i.    é¢„ç¼–è¯‘: å¤„ç†#å¼€å¤´çš„æŒ‡ä»¤ï¼Œæ¯”å¦‚æ‹·è´ #include åŒ…å«çš„æ–‡ä»¶ä»£ç ,#define å®å®šä¹‰çš„æ›¿æ¢ , æ¡ä»¶ç¼–è¯‘ç­‰,å°±æ˜¯ä¸ºç¼–è¯‘åšçš„é¢„å¤‡å·¥ä½œçš„é˜¶æ®µã€‚<br>ii.    ç¼–è¯‘: åˆ†æä»£ç çš„è¯­æ³•å’Œè¯­ä¹‰, å°†å˜é‡å’Œå…³é”®å­— ç¿»è¯‘æˆä¸­é—´ä»£ç æˆ–è€…æ±‡ç¼–ä»£ç ;<br>iii.    æ±‡ç¼–: å°†æ±‡ç¼–è¯­è¨€ç¿»è¯‘ä¸ºæœºå™¨å¯è¯†åˆ«çš„äºŒè¿›åˆ¶ä»£ç .o æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶<br>iv.    é“¾æ¥:å°†ç›®æ ‡æ–‡ä»¶æ‰€éœ€çš„åº“, æ–‡ä»¶è¿›è¡Œé“¾æ¥</p>
<p>volatileåº”è¯¥æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µï¼Œexternåœ¨é“¾æ¥é˜¶æ®µã€‚<br>volatileï¼šå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œä¿®é¥°çš„å˜é‡ä¸èƒ½ä¼˜åŒ–ï¼Œæ¯æ¬¡è¯»å–éœ€è¦ä»å†…å­˜ä¸­è¯»å–ï¼›</p>
<p>Static</p>
<ol>
<li>åœ¨å‡½æ•°ä½“ï¼Œä¸€ä¸ªè¢«å£°æ˜ä¸ºé™æ€çš„å˜é‡åœ¨è¿™ä¸€å‡½æ•°è¢«è°ƒç”¨è¿‡ç¨‹ä¸­ç»´æŒå…¶å€¼ä¸å˜ã€‚</li>
<li>åœ¨æ¨¡å—å†…ï¼ˆä½†åœ¨å‡½æ•°ä½“å¤–ï¼‰ï¼Œä¸€ä¸ªè¢«å£°æ˜ä¸ºé™æ€çš„å˜é‡å¯ä»¥è¢«æ¨¡å—å†…æ‰€ç”¨å‡½æ•°è®¿é—®ï¼Œä½†ä¸èƒ½è¢«æ¨¡å—å¤–å…¶å®ƒå‡½æ•°è®¿é—®ã€‚å®ƒæ˜¯ä¸€ä¸ªæœ¬åœ°çš„å…¨å±€å˜é‡ã€‚<br>extern â€œCâ€<br>â€¢    è¢« extern é™å®šçš„å‡½æ•°æˆ–å˜é‡æ˜¯ extern ç±»å‹çš„<br>â€¢    è¢« extern â€œCâ€ ä¿®é¥°çš„å˜é‡å’Œå‡½æ•°æ˜¯æŒ‰ç…§ C è¯­è¨€æ–¹å¼ç¼–è¯‘å’Œé“¾æ¥çš„<br>â€¢    extern â€œCâ€ çš„ä½œç”¨æ˜¯è®© C++ ç¼–è¯‘å™¨å°† extern â€œCâ€ å£°æ˜çš„ä»£ç å½“ä½œ C è¯­è¨€ä»£ç å¤„ç†ï¼Œå¯ä»¥é¿å… C++ å› ç¬¦å·ä¿®é¥°å¯¼è‡´ä»£ç ä¸èƒ½å’ŒCè¯­è¨€åº“ä¸­çš„ç¬¦å·è¿›è¡Œé“¾æ¥çš„é—®é¢˜ã€‚</li>
</ol>
<p>#define dPS struct s *             // å®å®šä¹‰ dPS è¡¨ç¤º struct s*<br>typedef struct s * tPS;            // typedef è¡¨ç¤ºï¼Œå°†struct *s é‡å‘½åä¸ºtPS</p>
<p>#defineæ˜¯ä¸€ä¸ªé¢„å¤„ç†å™¨ä»¤ç‰Œï¼šç¼–è¯‘å™¨æœ¬èº«å°†æ°¸è¿œçœ‹ä¸åˆ°å®ƒã€‚<br>typedefæ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ä»¤ç‰Œï¼šé¢„å¤„ç†å™¨ä¸å…³å¿ƒå®ƒã€‚</p>
<p>â€¢    typedefä»¥åˆ†å·ç»“å°¾ï¼Œè€Œ#defineä¸ä»¥åˆ†å·ç»“å°¾ã€‚<br>â€¢    typedefç”¨äºä¸ºç°æœ‰ç±»å‹èµ‹äºˆæ–°çš„ç¬¦å·åç§°ï¼Œè€Œ#defineç”¨äºåˆ›å»ºä»»ä½•ç±»å‹å’Œå€¼çš„åˆ«åã€‚</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸²å£ã€COMã€RS232ã€RS485</title>
    <url>/MCU-Lover/%E5%8F%A3%E3%80%81COM%E3%80%81RS232%E3%80%81RS485/</url>
    <content><![CDATA[<p><strong>uart</strong> ï¼ˆUniversal Asynchronous Receiverï¼Transmitterï¼‰<br><strong>usart</strong> ï¼ˆUniversal Synchronous Asynchronous Receiver Transmitterï¼‰</p>
<p>Uart  å¼‚æ­¥ã€‚ï¼ˆé¢„å…ˆçŸ¥é“æ³¢ç‰¹ç‡çš„å¤§å°,ä¼ è¾“æ•ˆç‡æ¯”åŒæ­¥é€šä¿¡è¦ä½ã€‚ï¼‰  å…¨åŒå·¥æ–¹å¼<br>Usart <strong>åŒæ­¥å¤šæ¡æ—¶é’Ÿçº¿</strong>ï¼Œä¹Ÿå¯å½“åšuartä½¿ç”¨ã€‚</p>
<p>COMå¼‚æ­¥é€šä¿¡å£ï¼Œè¢«USBå–ä»£</p>
<p>COM/USB -&gt; MAX232-&gt; å•ç‰‡æœºUART/USART<br>COM/USB -&gt; CH340-&gt; å•ç‰‡æœºUART/USART</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯,ä¸²å£ã€UART/USARTé€šå¸¸æŒ‡çš„æ˜¯ç¡¬ä»¶æ¥å£ã€‚</p>
<p>RS-232æŒ‡çš„æ˜¯å±äºç‰©ç†å±‚èŒƒç•´çš„ä¸²è¡Œé€šä¿¡æ¥å£æ ‡å‡†,RS-232å°±æ˜¯ä¸ªæ ‡å‡†ã€‚<br>ä¸‰ç§æ¥å£éƒ½æ˜¯å±äºä¸²å£é€šä¿¡,ä¸»è¦æœ‰å‡ ä¸ªæ–¹é¢çš„åŒºåˆ«ã€‚<br>1ã€é€šè®¯è·ç¦», RS232æ¥å£é€šè®¯è·ç¦»ä¸º15ç±³,è€ŒRS422/485æœ€å¤§é€šè®¯è·ç¦»å¯ä»¥è¾¾åˆ°1200ç±³ã€‚<br>2ã€æ‰€è¿è®¾å¤‡æ•°, RS232åªèƒ½è¿æ¥ä¸€ä¸ªè®¾å¤‡,è€ŒRS485å¯ä»¥åŒæ—¶è¿æ¥å¤šä¸ªè®¾å¤‡ã€‚<br>3ã€ç«¯å£å®šä¹‰, RS232ä¸ºæ ‡å‡†æ¥å£,ä¸€èˆ¬ä¸ºDå‹9é’ˆçš„DB9å¤´,æ¥å£ä¿¡å·ä¸€èˆ¬ä¸ºæ ‡å‡†é»˜è®¤çš„ã€‚è€ŒRS422/RS485ä¸ºéæ ‡å‡†æ¥å£,ä¸€èˆ¬ä¸º15é’ˆä¸²å£æ¥å£(ä¹Ÿå¯ä»¥åš9é’ˆæ¥å£) ,æ¯ä¸ªè®¾å¤‡çš„æ¥å£å®šä¹‰ä¹Ÿä¸å¤ªä¸€æ ·, RS422ä¸€èˆ¬ä¸º4çº¿åˆ¶å…¨åŒå·¥æ¨¡å¼,è€ŒRS485ä¸ºä¸¤çº¿åˆ¶,<strong>åŠåŒå·¥æ¨¡å¼</strong>ã€‚</p>
<table>
<thead>
<tr>
<th>SPIä¸IICåŒºåˆ«</th>
</tr>
</thead>
<tbody><tr>
<td>SPI æ˜¯åŒæ­¥ä¸²è¡Œæ¥å£ï¼Œæ˜¯ä¸€ç§é«˜é€Ÿã€å…¨åŒå·¥çš„åŒæ­¥é€šä¿¡æ€»çº¿</td>
</tr>
<tr>
<td>IIC æ˜¯å¤šä¸»è®¾å¤‡çš„æ€»çº¿ , åªæœ‰ä¸€æ ¹æ•°æ®çº¿ï¼Œæ‰€ä»¥æ˜¯åŠåŒå·¥é€šä¿¡</td>
</tr>
<tr>
<td>1. SPIé€‚åˆæ•°æ®æµåº”ç”¨ï¼Œè€ŒIICæ›´é€‚åˆâ€œå­—èŠ‚è®¾å¤‡â€çš„å¤šä¸»è®¾å¤‡åº”ç”¨ã€‚</td>
</tr>
<tr>
<td>2. IIC åªéœ€ä¸¤æ ¹ä¿¡å·çº¿ï¼Œè€Œæ ‡å‡†SPIè‡³å°‘å››æ ¹ä¿¡å·ã€‚</td>
</tr>
<tr>
<td>3. æ•°æ®åå/ä¼ è¾“é€Ÿåº¦   SPI &gt; IIC 8M &gt; 400K</td>
</tr>
<tr>
<td>4ã€7ä½I2Cæ€»çº¿å¯ä»¥æŒ‚æ¥127ä¸ªä¸åŒåœ°å€çš„I2Cè®¾å¤‡,0å·â€è®¾å¤‡â€ä½œä¸ºç¾¤å‘¼åœ°å€.</td>
</tr>
<tr>
<td>5ã€SPIæ¥å£çš„ä¸€ä¸ªç¼ºç‚¹ï¼šæ²¡æœ‰æŒ‡å®šçš„æµæ§åˆ¶,æ²¡æœ‰åº”ç­”æœºåˆ¶ç¡®è®¤æ˜¯å¦æ¥æ”¶åˆ°æ•°æ®</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>MCU Lover</category>
      </categories>
  </entry>
  <entry>
    <title>æ€ä¹ˆè¯´ä½ äº†è§£è¿‡IIC</title>
    <url>/MCU-Lover/%E6%80%8E%E4%B9%88%E8%AF%B4%E4%BD%A0%E4%BA%86%E8%A7%A3%E8%BF%87IIC/</url>
    <content><![CDATA[<p>8ä½IIC æœ€å¤šè¿æ¥127ä¸ªå™¨ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ 2^8-æœ€é«˜ä½çš„å¹¿æ’­(128)-1</p>
<p>IIC é€Ÿåº¦èƒ½åˆ°è¾¾400K SPI:50M</p>
]]></content>
      <categories>
        <category>MCU Lover</category>
      </categories>
  </entry>
  <entry>
    <title>æ€ä¹ˆè¯´ä½ äº†è§£è¿‡SPI</title>
    <url>/MCU-Lover/%E8%AF%B4%E4%BD%A0%E4%BA%86%E8%A7%A3%E8%BF%87SPI/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>MCU Lover</category>
      </categories>
  </entry>
  <entry>
    <title>MySqlå¸¸è§æŠ¥é”™</title>
    <url>/MySql-Lover/MySql%E5%B8%B8%E8%A7%81%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<p>å¤–é”®çº¦æŸæŠ¥é”™ï¼Ÿ</p>
<p>SET foreign_key_checks = 0;<br>Â·Â·Â·Â·Â·Â·<br>SET foreign_key_checks = 1;</p>
<p>update ä¿®æ”¹æŠ¥é”™ï¼Ÿ<br>è¿™æ˜¯å› ä¸ºMySqlè¿è¡Œåœ¨safe-updatesæ¨¡å¼ä¸‹ï¼Œè¯¥æ¨¡å¼ä¼šå¯¼è‡´éä¸»é”®æ¡ä»¶ä¸‹æ— æ³•æ‰§è¡Œupdateæˆ–è€…deleteå‘½ä»¤ï¼Œæ‰§è¡Œå‘½ä»¤SET SQL_SAFE_UPDATES = 0;</p>
<p>é™åˆ¶æ‰§è¡Œå®Œè¯­å¥<br>DELIMITER $<br>Â·Â·Â·Â·<br>$</p>
<p>referencing åœ¨mysqlä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼Œåœ¨mysqlé‡Œé¢ ç­‰åŒçš„æ˜¯NEWå…³é”®å­— å’ŒOLDå…³é”®å­—</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE SC_U(</span><br><span class="line">	Sno CHAR(9) NOT NULL,</span><br><span class="line">	Cno CHAR(4) NOT NULL,</span><br><span class="line">	Oldgrade SMALLINT,</span><br><span class="line">	Newgrade SMALLINT</span><br><span class="line">);</span><br><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE TRIGGER SC_T </span><br><span class="line">AFTER UPDATE  ON SC</span><br><span class="line">FOR EACH ROW </span><br><span class="line">BEGIN</span><br><span class="line">IF (NEW.Grade &gt;&#x3D; 1.1 * OLD.Grade)THEN</span><br><span class="line">	INSERT INTO SC_U(Sno,Cno,OldeGrade,NewGrade)</span><br><span class="line">    VALUES (OLD.Sno,OLD.Cno,OLD.Grade,NEW.Grade);</span><br><span class="line"> END IF;</span><br><span class="line"> END</span><br><span class="line">&#x2F;&#x2F;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>MySql Lover</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql+qtåŸºæœ¬å‘½ä»¤</title>
    <url>/MySql-Lover/mysql-qt%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>â€“ åˆ›å»ºä¸€ä¸ªåç§°ä¸ºinfoçš„æ•°æ®åº“ã€‚</p>
<p>create database info;</p>
<p>â€“ åˆ é™¤æ•°æ®åº“info</p>
<p>â€“ drop database info;</p>
<p>â€“ ä½¿ç”¨æ•°æ®åº“ info</p>
<p>use info;</p>
<p>â€“ åˆ›å»ºè¡¨</p>
<p>â€“ create table student(id int primary key auto_increment, name varchar(255), age int, score int);</p>
<p>create table student(id int primary key, name varchar(255), age int, score int);</p>
<p>â€“ åˆ é™¤studentè¡¨</p>
<p>â€“ drop table student;</p>
<p>â€“ æ’å…¥æ•°æ®</p>
<p>insert into student(id, name, age) values(1, â€˜mikeâ€™, 18);</p>
<p>insert into student(id, name, age, score) values(2, â€˜lucyâ€™, 22, 90);</p>
<p>insert into student(id, name, age, score) values(3, â€˜Tomâ€™, 20, 78);</p>
<p>â€“ æ›´æ–°æ•°æ®</p>
<p>update student set score = 90 where id = 3;</p>
<p>â€“ æŸ¥æ‰¾æ•°æ®</p>
<p>select * from student;</p>
<p>select score from student where name = â€˜mikeâ€™;</p>
<p>â€“ åˆ é™¤æ•°æ®åº“</p>
<p>delete from student where name = â€˜mikeâ€™;</p>
]]></content>
      <categories>
        <category>MySql Lover</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸå§‹å¥—æ¥å­—</title>
    <url>/Linux-Lover/%E5%8E%9F%E5%A7%8B%E5%A5%97%E6%8E%A5%E5%AD%97/</url>
    <content><![CDATA[<p>å¯¹äºä¸€ä¸ªè‡ªå®šä¹‰çš„IPåŒ…ï¼Œæˆ–è€…ä¸€ä¸ªICMPåè®®åŒ…ï¼Œåˆæ˜¯å¦‚ä½•å®ç°ä¼ é€çš„å‘¢ï¼Ÿ<br>åŸå§‹å¥—æ¥å­—å°±å…è®¸å¯¹è¿™äº›è¾ƒåº•å±‚æ¬¡çš„åè®®ï¼ˆIPã€ICMPã€IGMPï¼‰è¿›è¡Œç›´æ¥è®¿é—®ã€‚</p>
<p><strong>åŸå§‹å¥—æ¥å­—å®šä¹‰</strong></p>
<p>åŸå§‹å¥—æ¥å­—ç¼–ç¨‹æ˜¯ä¸€ç§éé¢å‘è¿æ¥çš„ã€C/Sä¼ è¾“æ–¹å¼çš„ç½‘ç»œç¼–ç¨‹ï¼Œä½¿ç”¨åŸå§‹å¥—æ¥å­—ç¼–ç¨‹è¿›è¡ŒæœåŠ¡å™¨ç«¯ä¸å®¢æˆ·ç«¯çš„é€šä¿¡å‰ï¼Œé¦–å…ˆè¦åˆ›å»ºå„è‡ªçš„å¥—æ¥å­—ï¼Œç„¶åå¯¹ç›¸åº”çš„å¥—æ¥å­—è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œåœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨sendto()å‡½æ•°å’Œrecvfrom()å‡½æ•°è¿›è¡Œå‘é€ä¸æ¥æ”¶ï¼Œåœ¨å‘é€ä¸æ¥æ”¶å‡½æ•°ä¸­è®¾ç½®ç›¸åº”çš„IPåœ°å€ã€‚</p>
<p>æ‰©å±•ï¼šåŸå§‹å¥—æ¥å­—å¾€å¾€åº”ç”¨äºé«˜çº§ç½‘ç»œç¼–ç¨‹ï¼Œå¦‚æ¯”è¾ƒæµè¡Œçš„ç½‘ç»œå—…æ¢å™¨ï¼ˆsnifferï¼‰ã€æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDOSï¼‰ã€IPæ¬ºéª—ç­‰ç­‰éƒ½å¯ä»¥å®ç°ï¼Œå¹¶ä¸”è¿˜å¯ä»¥é€šè¿‡åŸå§‹å¥—æ¥å­—æ¥æ¨¡æ‹ŸIPçš„ä¸€äº›å®ç”¨å·¥å…·ï¼Œå¦‚Pingå‘½ä»¤ã€‚</p>
<p>1.åˆ›å»ºå‡½æ•°<br>ï¼Œå¦‚TCPå¥—æ¥å­—ç¼–ç¨‹é€‰æ‹©çš„æ˜¯SOCK_STREAMç±»å‹çš„å¥—æ¥å­—ï¼ŒUDPå¥—æ¥å­—ç¼–ç¨‹é€‰æ‹©çš„æ˜¯SOCK_DGRAMç±»å‹çš„å¥—æ¥å­—ï¼Œè€ŒåŸå§‹å¥—æ¥å­—ç¼–ç¨‹åˆ™éœ€è¦é€‰æ‹©SOCK_RAWç±»å‹çš„å¥—æ¥å­—ã€‚<br>ä¸Šè¿°ä»£ç åˆ›å»ºäº†ä¸€ä¸ªAF_INETåè®®æ—ä¸­çš„åŸå§‹å¥—æ¥å­—ï¼Œåè®®ç±»å‹ä¸ºprotocolã€‚<br>åè®®ç±»å‹protocolé€šå¸¸è®¾ç½®0ï¼Œå¯ä»¥å–å€¼è¿˜åŒ…æ‹¬å¦‚ä¸‹å››ç§ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>protocol</td>
<td>IPPROTO_IPã€IPPROTO_ICMPã€IPPROTO_TCPã€IPPROTO_UDP</td>
</tr>
</tbody></table>
<p>è¯´æ˜ï¼šåˆ›å»ºå®ŒåŸå§‹å¥—æ¥å­—åï¼Œå¯ä»¥é€šè¿‡å‘ç½‘ç»œä¸­å®šä¹‰è‡ªå·±çš„IPæ•°æ®åŒ…ï¼Œä½†æ˜¯åœ¨Linuxç³»ç»Ÿä¸­ï¼Œä¸ºäº†ä¿æŠ¤ç½‘ç»œç³»ç»Ÿçš„å®‰å…¨ï¼Œè§„å®šåªæœ‰è¶…çº§ç”¨æˆ·æ‰æœ‰åˆ›å»ºåŸå§‹å¥—æ¥å£çš„æƒé™ã€‚</p>
<p>2.è®¾ç½®å¥—æ¥å­—é€‰é¡¹<br>å‡½æ•°setsockopt()ä¸»è¦ç”¨äºå®ç°å¯¹å¥—æ¥å­—ç›¸å…³çš„é€‰é¡¹è®¾ç½®å½“å‰å€¼ã€‚</p>
<p>int setsockopt(int s, int  level,  int  optname,  const  void  *optval, socklen_t optlen);</p>
<p>|å‚æ•°è§£é‡Š<br>|-|-|<br>|å‚æ•°sè¡¨ç¤ºå¥—æ¥å­—æè¿°ç¬¦ï¼›<br>|å‚æ•°levelä»£è¡¨çš„æ˜¯é€‰é¡¹å®šä¹‰çš„å±‚æ¬¡ï¼Œå¦‚IPPROTO_IPï¼›<br>|å‚æ•°optnameä»£è¡¨å¥—æ¥å­—é€‰é¡¹çš„åç§°ï¼Œä¾‹å¦‚IP_HDRINCLè¡¨ç¤ºè¦æ„é€ IPå¤´éƒ¨ï¼›<br>|å‚æ•°optvalè¡¨ç¤ºæŒ‡å‘å­˜æ”¾é€‰é¡¹æ•°æ®çš„ç¼“å†²åŒºçš„æŒ‡é’ˆï¼›<br>|å‚æ•°optlenè¡¨ç¤ºoptvalå‚æ•°æŒ‡å‘çš„ç¼“å†²åŒºçš„é•¿åº¦ã€‚</p>
<p>å½“ä½¿ç”¨å¥—æ¥å­—é€‰é¡¹IP_HDRINCLè®¾ç½®å¥—æ¥å­—åï¼Œæ¥æ”¶å’Œå‘é€æ•°æ®çš„æ—¶å€™ï¼Œæ¥æ”¶åˆ°çš„æ•°æ®åŒ…å«IPæ•°æ®çš„ï¼ŒåŒ…å«IPçš„å¤´éƒ¨ã€‚ç”¨æˆ·ä¹‹åéœ€è¦å¯¹IPå±‚ç›¸å…³çš„æ•°æ®æ®µè¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚IPå¤´éƒ¨æ•°æ®çš„è®¾ç½®å’Œåˆ†æï¼Œæ ¡éªŒå’Œçš„è®¡ç®—ç­‰ã€‚è®¾ç½®æ–¹æ³•å¦‚ä¸‹ï¼š<br>int set = 1;<br>if(setsockopt(rawsock, IPPROTO_IP, IP_HDRINCL, &amp;set, sizeof(set))&lt;0)<br>{<br>/<em>é”™è¯¯ä¿¡æ¯æç¤º</em>/<br>}</p>
<p><strong>äº†è§£æŠ¥æ–‡</strong></p>
<img src="/Linux-Lover/%E5%8E%9F%E5%A7%8B%E5%A5%97%E6%8E%A5%E5%AD%97/%E5%8E%9F%E5%A7%8B%E5%A5%97%E6%8E%A5%E5%AD%97.jpg" class title="æŠ¥æ–‡ç»“æ„">








]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­»é”</title>
    <url>/Linux-Lover/%E9%94%81/</url>
    <content><![CDATA[<p>äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³æ­»é”æœ‰å‡ ç§æ–¹æ³•ï¼Ÿ</p>
<p>å®‰å…¨çŠ¶æ€ä¸ä¸å®‰å…¨çŠ¶æ€ï¼šå®‰å…¨çŠ¶æ€æŒ‡ç³»ç»Ÿèƒ½æŒ‰æŸç§è¿›ç¨‹é¡ºåºæ¥ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…å…¶æ‰€éœ€èµ„æºï¼Œç›´ è‡³æœ€å¤§éœ€æ±‚ï¼Œä½¿æ¯ä¸ªè¿›ç¨‹éƒ½å¯é¡ºåˆ©å®Œæˆã€‚è‹¥ç³»ç»Ÿä¸å­˜åœ¨è¿™æ ·ä¸€ä¸ªï¼Œ åˆ™ç§°ç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€ã€‚</p>
<p>æ­»é”ï¼šæŒ‡å¤šä¸ªè¿›ç¨‹å› ç«äº‰å…±äº«èµ„æºè€Œé€ æˆçš„ä¸€ç§åƒµå±€ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œè¿™äº›è¿›ç¨‹éƒ½å°†æ°¸è¿œä¸èƒ½å† å‘å‰æ¨è¿›ã€‚<br>äº§ç”Ÿæ­»é”çš„åŸå› ï¼šï¼ˆ1ï¼‰ç«äº‰ç³»ç»Ÿèµ„æº ï¼ˆ2ï¼‰è¿›ç¨‹çš„æ¨è¿›é¡ºåºä¸å½“<br>æ»¡è¶³å››ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li>äº’æ–¥ï¼ˆMutual exclusionï¼‰ï¼šå­˜åœ¨è¿™æ ·ä¸€ç§èµ„æºï¼Œå®ƒåœ¨æŸä¸ªæ—¶åˆ»åªèƒ½è¢«åˆ†é…ç»™ä¸€ä¸ªæ‰§è¡Œç»ªï¼ˆä¹Ÿç§°ä¸ºçº¿ç¨‹ï¼‰ä½¿ç”¨ï¼›</li>
<li>å æœ‰ï¼ˆHold and waitï¼‰ï¼šå½“è¯·æ±‚çš„èµ„æºå·²è¢«å ç”¨ä»è€Œå¯¼è‡´æ‰§è¡Œç»ªé˜»å¡æ—¶ï¼Œèµ„æºå ç”¨è€…ä¸ä½†æ— éœ€é‡Šæ”¾è¯¥èµ„æºï¼Œè€Œä¸”è¿˜å¯ä»¥ç»§ç»­è¯·æ±‚æ›´å¤šèµ„æºï¼›</li>
<li>ä¸å¯å‰¥å¤ºï¼ˆNo preemptionï¼‰ï¼šæ‰§è¡Œç»ªè·å¾—åˆ°çš„äº’æ–¥èµ„æºä¸å¯è¢«å¼ºè¡Œå‰¥å¤ºï¼Œæ¢å¥è¯è¯´ï¼Œåªæœ‰èµ„æºå ç”¨è€…è‡ªå·±æ‰èƒ½é‡Šæ”¾èµ„æºï¼›</li>
<li>å¾ªç¯å½¢ç­‰å¾…ï¼ˆCircular waitï¼‰ï¼šè‹¥å¹²æ‰§è¡Œç»ªä»¥ä¸åŒçš„æ¬¡åºè·å–äº’æ–¥èµ„æºï¼Œä»è€Œå½¢æˆç¯å½¢ç­‰å¾…çš„å±€é¢ï¼Œæƒ³è±¡åœ¨ç”±å¤šä¸ªæ‰§è¡Œç»ªç»„æˆçš„ç¯å½¢é“¾ä¸­ï¼Œæ¯ä¸ªæ‰§è¡Œç»ªéƒ½åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªæ‰§è¡Œç»ªé‡Šæ”¾å®ƒæŒæœ‰çš„èµ„æºã€‚</li>
</ol>
<p>è§£å†³æ­»é”çš„åŸºæœ¬æ–¹æ³•ï¼š</p>
<p>é¢„é˜²æ­»é”ï¼š<br>ï¼ˆ1ï¼‰èµ„æºä¸€æ¬¡æ€§åˆ†é…ï¼šï¼ˆç ´åè¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼‰<br>ï¼ˆ2ï¼‰å¯å‰¥å¤ºèµ„æºï¼šå³å½“æŸè¿›ç¨‹æ–°çš„èµ„æºæœªæ»¡è¶³æ—¶ï¼Œé‡Šæ”¾å·²å æœ‰çš„èµ„æºï¼ˆç ´åä¸å¯å‰¥å¤ºæ¡ä»¶ï¼‰<br>ï¼ˆ3ï¼‰èµ„æºæœ‰åºåˆ†é…æ³•ï¼šç³»ç»Ÿç»™æ¯ç±»èµ„æºèµ‹äºˆä¸€ä¸ªç¼–å·ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹æŒ‰ç¼–å·é€’å¢çš„é¡ºåºè¯·æ±‚èµ„æºï¼Œé‡Šæ”¾åˆ™ç›¸åï¼ˆç ´åç¯è·¯ç­‰å¾…æ¡ä»¶ï¼‰</p>
<p>é¿å…æ­»é”:æœ€å…·æœ‰ä»£è¡¨æ€§çš„é¿å…æ­»é”ç®—æ³•æ˜¯é“¶è¡Œå®¶ç®—æ³•ã€‚</p>
<p>è§£é™¤æ­»é”:<br>å‰¥å¤ºèµ„æºï¼šä»å…¶å®ƒè¿›ç¨‹å‰¥å¤ºè¶³å¤Ÿæ•°é‡çš„èµ„æºç»™æ­»é”è¿›ç¨‹ï¼Œä»¥è§£é™¤æ­»é”çŠ¶æ€ï¼›<br>æ’¤æ¶ˆè¿›ç¨‹ï¼šå¯ä»¥ç›´æ¥æ’¤æ¶ˆæ­»é”è¿›ç¨‹æˆ–æ’¤æ¶ˆä»£ä»·æœ€å°çš„è¿›ç¨‹ï¼Œç›´è‡³æœ‰è¶³å¤Ÿçš„èµ„æºå¯ç”¨ï¼Œæ­»é”çŠ¶æ€.æ¶ˆé™¤ä¸ºæ­¢ï¼›æ‰€è°“ä»£ä»·æ˜¯æŒ‡ä¼˜å…ˆçº§ã€è¿è¡Œä»£ä»·ã€è¿›ç¨‹çš„é‡è¦æ€§å’Œä»·å€¼ç­‰ã€‚</p>
<p>æ£€æµ‹æ­»é”<br>æœ‰ä¸¤ä¸ªå®¹å™¨ï¼Œä¸€ä¸ªç”¨äºä¿å­˜çº¿ç¨‹æ­£åœ¨è¯·æ±‚çš„é”ï¼Œä¸€ä¸ªç”¨äºä¿å­˜çº¿ç¨‹å·²ç»æŒæœ‰çš„é”ã€‚æ¯æ¬¡åŠ é”ä¹‹å‰éƒ½ä¼šåšå¦‚ä¸‹æ£€æµ‹:<br>1)æ£€æµ‹å½“å‰æ­£åœ¨è¯·æ±‚çš„é”æ˜¯å¦å·²ç»è¢«å…¶å®ƒçº¿ç¨‹æŒæœ‰,å¦‚æœæœ‰ï¼Œåˆ™æŠŠé‚£äº›çº¿ç¨‹æ‰¾å‡ºæ¥<br>2)éå†ç¬¬ä¸€æ­¥ä¸­è¿”å›çš„çº¿ç¨‹ï¼Œæ£€æŸ¥è‡ªå·±æŒæœ‰çš„é”æ˜¯å¦æ­£è¢«å…¶ä¸­ä»»ä½•ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚<br> å¦‚æœç¬¬äºŒæ­¥è¿”å›çœŸ,è¡¨ç¤ºå‡ºç°äº†æ­»é”</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>UDP</title>
    <url>/Linux-Lover/UDP/</url>
    <content><![CDATA[<p><strong>åŸºäºUDPçš„ç½‘ç»œç¼–ç¨‹</strong></p>
<p>ä¸»è¦ç”¨åˆ°çš„å‡½æ•°æœ‰socket()ã€bind()ã€sendto()ã€recvfrom()å’Œclose()ã€‚<br>UDPæ˜¯é¢å‘æ— è¿æ¥çš„ç½‘ç»œé€šä¿¡ï¼Œå¹¶ä¸éœ€è¦åƒTCPå¥—æ¥å­—ç¼–ç¨‹é‚£æ ·éœ€è¦é€šè¿‡connect()ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œç„¶åè°ƒç”¨listen()å‡½æ•°ä½¿æœåŠ¡å™¨å¤„äºç›‘å¬çŠ¶æ€ï¼Œåœ¨é€šè¿‡accept()å‡½æ•°æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚</p>
<p>UDPå¥—æ¥å­—ç¼–ç¨‹ï¼Œåªéœ€è¦åˆ›å»ºç”¨äºé€šä¿¡çš„å¥—æ¥å­—ï¼Œç„¶ååœ¨æœåŠ¡å™¨ç«¯ç»‘å®šç«¯å£ï¼Œç„¶åå°±å¯ä»¥å®ç°æ•°æ®çš„ä¼ è¾“ã€‚<br>åœ¨ç»‘å®šäº†åœ°å€ä¿¡æ¯ä¹‹åï¼Œè¿›è¡Œæ•°æ®ä¼ è¾“æ—¶ï¼ŒæœåŠ¡å™¨ä¼šé˜»å¡recvfrom()å‡½æ•°ï¼Œç­‰å¾…å®¢æˆ·ç«¯è°ƒç”¨sendto()å‡½æ•°å‘é€æ•°æ®ï¼ŒåŒæ—¶å®¢æˆ·ç«¯çš„recvfrom()è¢«é˜»å¡ï¼Œç„¶åï¼ŒæœåŠ¡å™¨ä¼šè°ƒç”¨recvfrom()å‡½æ•°æ¥æ”¶æ•°æ®ï¼Œæ¥ç€å‘å®¢æˆ·ç«¯ä½œå‡ºåº”ç­”ï¼ŒåŒæ—¶ï¼ŒæœåŠ¡ç«¯çš„recvfrom()è¢«é˜»å¡ï¼Œæ¥ç€ï¼Œå®¢æˆ·ç«¯è°ƒç”¨recvfrom()æ¥æ”¶æ•°æ®ã€‚</p>
<p>1.å‘é€æ•°æ®ã€å‡½æ•°sendto()<br>ssize_t  sendto(int  s,  const  void *buf, size_t len, int flags, const struct sockaddr *to, socklen_t tolen);</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>s</td>
<td>å‚æ•°sä»£è¡¨å¥—æ¥å­—æè¿°ç¬¦</td>
</tr>
<tr>
<td>buf</td>
<td>å‚æ•°bufç”¨äºæŒ‡å‘å‘é€ä¿¡æ¯çš„ç¼“å†²åŒºçš„æŒ‡é’ˆ</td>
</tr>
<tr>
<td>len</td>
<td>å‚æ•°lenæ˜¯å‘é€çš„ä¿¡æ¯çš„é•¿åº¦</td>
</tr>
<tr>
<td>flags</td>
<td>å‚æ•°flagsé€šå¸¸ä¼šè®¾ç½®ä¸º0ï¼Œä»£è¡¨çš„æ˜¯ç›¸å…³æ§åˆ¶å‚æ•°ï¼Œä¸»è¦ç”¨äºæ§åˆ¶æ˜¯å¦æ¥æ”¶æ•°æ®ä»¥åŠæ˜¯å¦é¢„è§ˆæŠ¥æ–‡</td>
</tr>
<tr>
<td>to</td>
<td>å‚æ•°toä¸ºå­˜æ”¾æ¥æ”¶å¤„çš„ä¿¡æ¯çš„æŒ‡é’ˆ</td>
</tr>
<tr>
<td>tolen</td>
<td>å‚æ•°tolenæ˜¯æ¥æ”¶æ–¹åœ°å€çš„å¤§å°</td>
</tr>
</tbody></table>
<p>è¯´æ˜ï¼šå¦‚æœsendto()å‡½æ•°ç”¨äºé¢å‘è¿æ¥çš„ç½‘ç»œé€šä¿¡æ—¶ï¼Œå¥—æ¥å­—ç±»å‹ä¸ºSOCK_STREAMæˆ–SOCK_SEQPACKETã€‚æ­¤æ—¶å‚æ•°toæŒ‡å‘NULLï¼Œå‚æ•°tolenä¸º0ï¼Œè‹¥ä¸ä¸ºæ­¤å€¼ï¼Œå°±ä¼šå‡ºç°é”™è¯¯ä¿¡æ¯æç¤ºã€‚</p>
<p>2.æ¥æ”¶æ•°æ®ã€å‡½æ•°recvfrom()</p>
<p>ssize_t recvfrom(int s, void *buf, size_t len, int flags, struct sockaddr *from, socklen_t *fromlen);</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>s</td>
<td>å‚æ•°sä»£è¡¨å¥—æ¥å­—æè¿°ç¬¦</td>
</tr>
<tr>
<td>buf</td>
<td>å‚æ•°bufæŒ‡å‘æ¥æ”¶ä¿¡æ¯çš„æŒ‡é’ˆ</td>
</tr>
<tr>
<td>len</td>
<td>å‚æ•°lenä»£è¡¨ç¼“å†²åŒºçš„æœ€å¤§é•¿åº¦</td>
</tr>
<tr>
<td>flags</td>
<td>å‚æ•°flagsé€šå¸¸ä¼šè®¾ç½®ä¸º0ï¼Œä»£è¡¨çš„æ˜¯ç›¸å…³æ§åˆ¶å‚æ•°ï¼Œä¸»è¦ç”¨äºæ§åˆ¶æ˜¯å¦æ¥æ”¶æ•°æ®ä»¥åŠæ˜¯å¦é¢„è§ˆæŠ¥æ–‡</td>
</tr>
<tr>
<td>from</td>
<td>å‚æ•°fromè¡¨ç¤ºå‘é€æ­¤ä¿¡æ¯å¤„çš„åœ°å€æŒ‡é’ˆ</td>
</tr>
<tr>
<td>fromlen</td>
<td>å‚æ•°fromlenæŒ‡å‘å‘é€å¤„åœ°å€å¤§å°çš„æŒ‡é’ˆã€‚</td>
</tr>
</tbody></table>
<p>å­—èŠ‚åºè½¬æ¢å‡½æ•° </p>
<p>ï±    uint32_t htonl(uint32_t hostlong);<br>ï±    uint16_t htons(uint16_t hostshort);<br>ï±    uint32_t ntohl(uint32_t netlong);<br>ï±    uint16_t ntohs(uint16_t netshort);<br>ï±    è¯´æ˜ï¼šåœ¨ä¸Šè¿°çš„å‡½æ•°ä¸­ï¼Œhä»£è¡¨hostï¼›<br>    nä»£è¡¨network sä»£è¡¨shortï¼›lä»£è¡¨long</p>
<p>åœ°å€è½¬æ¢å‡½æ•° </p>
<p>ï±    #include &lt;netinet/in.h&gt;<br>ï±    #include &lt;arpa/inet.h&gt;<br>ï±    int inet_aton(const char *cp, struct in_addr *inp);<br>ï±    in_addr_t inet_addr(const char *cp);<br>ï±    char *inet_ntoa(struct in_addr in);</p>
<p>serv.c</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">*æœåŠ¡å™¨ç«¯*/</span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;string.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;netinet/in.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/socket.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;errno.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;arpa/inet.h&gt;</span></span><br><span class="line"><span class="comment">#define PORT 8886</span></span><br><span class="line"></span><br><span class="line">int main(int argc, char **argv)</span><br><span class="line">&#123;</span><br><span class="line">	struct sockaddr_in s_addr;	//æœåŠ¡å™¨åœ°å€ç»“æ„</span><br><span class="line">	struct sockaddr_in c_addr;	//å®¢æˆ·ç«¯åœ°å€ç»“æ„</span><br><span class="line">	int sock;			//å¥—æ¥å­—æè¿°ç¬¦</span><br><span class="line">	socklen_t addr_len;		//åœ°å€ç»“æ„é•¿åº¦</span><br><span class="line">	int len;			//æ¥æ”¶åˆ°çš„æ¶ˆæ¯å­—èŠ‚æ•°</span><br><span class="line">	char buff[128];			//å­˜æ”¾æ¥æ”¶æ¶ˆæ¯çš„ç¼“å†²åŒº</span><br><span class="line">/* åˆ›å»ºæ•°æ®æŠ¥æ¨¡å¼çš„å¥—æ¥å­— */</span><br><span class="line">	<span class="keyword">if</span> ((sock = socket(AF_INET, SOCK_DGRAM, 0)) == -1) &#123;</span><br><span class="line">		perror(<span class="string">"socket"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(errno);</span><br><span class="line">	&#125;</span><br><span class="line">       	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"create socket successful.\n\r"</span>);</span><br><span class="line">/*æ¸…ç©ºåœ°å€ç»“æ„*/</span><br><span class="line">	memset(&amp;s_addr, 0, sizeof(struct sockaddr_in));</span><br><span class="line">/* è®¾ç½®åœ°å€å’Œç«¯å£ä¿¡æ¯ */</span><br><span class="line">	s_addr.sin_family = AF_INET;</span><br><span class="line">	s_addr.sin_port = htons(PORT);</span><br><span class="line">	s_addr.sin_addr.s_addr = INADDR_ANY;</span><br><span class="line"></span><br><span class="line">/* ç»‘å®šåœ°å€å’Œç«¯å£ä¿¡æ¯ */</span><br><span class="line">	<span class="keyword">if</span> ((<span class="built_in">bind</span>(sock, (struct sockaddr *) &amp;s_addr, sizeof(s_addr))) == -1) &#123;</span><br><span class="line">		perror(<span class="string">"bind error"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(errno);</span><br><span class="line">	&#125;</span><br><span class="line">       	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"bind address to socket successfuly.\n\r"</span>);</span><br><span class="line">/* å¾ªç¯æ¥æ”¶æ•°æ® */</span><br><span class="line">	addr_len = sizeof(c_addr);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span> (1) &#123;</span><br><span class="line">		len = recvfrom(sock, buff, sizeof(buff) - 1, 0,(struct sockaddr *) &amp;c_addr, &amp;addr_len);</span><br><span class="line">		<span class="keyword">if</span> (len &lt; 0) &#123;//æ¥æ”¶å¤±è´¥</span><br><span class="line">			perror(<span class="string">"recvfrom error"</span>);</span><br><span class="line">			<span class="built_in">exit</span>(errno);</span><br><span class="line">		&#125;</span><br><span class="line">		buff[len] = <span class="string">'\0'</span>;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"æ”¶åˆ°æ¥è‡ªè¿œç«¯è®¡ç®—æœº%sï¼Œç«¯å£å·ä¸º%dçš„æ¶ˆæ¯:\n%s\n\r"</span>,inet_ntoa(c_addr.sin_addr), ntohs(c_addr.sin_port), buff);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>client.c</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/*å®¢æˆ·ç«¯*/</span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;string.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;netinet/in.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/socket.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;errno.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;arpa/inet.h&gt;</span></span><br><span class="line"><span class="comment">#define PORT 8886</span></span><br><span class="line"></span><br><span class="line">int main(int argc, char **argv)</span><br><span class="line">&#123;//å®šä¹‰å˜é‡</span><br><span class="line">	struct sockaddr_in s_addr;	//å¥—æ¥å­—åœ°å€ç»“æ„</span><br><span class="line">	int sock;			//å¥—æ¥å­—æè¿°ç¬¦</span><br><span class="line">	int addr_len;			//åœ°å€ç»“æ„é•¿åº¦</span><br><span class="line">	int len;			//å‘é€å­—èŠ‚é•¿åº¦</span><br><span class="line">	char buff[]=<span class="string">"Hello everyone,Merry Christmas!"</span>;	//å‘é€çš„æ¶ˆæ¯</span><br><span class="line">/* åˆ›å»ºæ•°æ®æŠ¥æ¨¡å¼çš„å¥—æ¥å­— */</span><br><span class="line">	<span class="keyword">if</span> ((sock = socket(AF_INET, SOCK_DGRAM, 0)) == -1) &#123;</span><br><span class="line">		perror(<span class="string">"socket error"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(errno);</span><br><span class="line">	&#125;</span><br><span class="line">       	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"create socket successful.\n\r"</span>);</span><br><span class="line">/* è®¾ç½®å¯¹æ–¹åœ°å€å’Œç«¯å£ä¿¡æ¯ */</span><br><span class="line">	s_addr.sin_family = AF_INET; 	//åœ°å€æ—</span><br><span class="line"></span><br><span class="line">		s_addr.sin_port = htons(PORT);</span><br><span class="line">	<span class="keyword">if</span> (argv[1])</span><br><span class="line">		s_addr.sin_addr.s_addr = inet_addr(argv[1]);</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"æ²¡æœ‰è¾“å…¥æ¶ˆæ¯çš„æ¥å—è€…ï¼\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(0);</span><br><span class="line">	&#125;</span><br><span class="line">	addr_len = sizeof(s_addr);	//åœ°å€ç»“æ„é•¿åº¦</span><br><span class="line">/*ä»å®¢æˆ·ç«¯çš„buffç¼“å†²åŒºä¸­å‘é€æ¶ˆæ¯åˆ°åœ°å€ç»“æ„ä¸ºs_addrçš„è¿œç«¯æœºå™¨*/</span><br><span class="line">	len = sendto(sock, buff, sizeof(buff), 0,(struct sockaddr *) &amp;s_addr, addr_len);</span><br><span class="line">	<span class="keyword">if</span> (len &lt; 0) &#123;			//å¦‚æœå‘é€å¤±è´¥</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n\rsend error.\n\r"</span>);</span><br><span class="line">		<span class="built_in">return</span> 3;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"send success.\n\r"</span>);	//å‘é€æˆåŠŸ</span><br><span class="line">	<span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<img src="/Linux-Lover/UDP/%E7%BB%93%E6%9E%9C.jpg" class title="ç»“æœ">

]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>TCP</title>
    <url>/Linux-Lover/TCP/</url>
    <content><![CDATA[<p>__TCPä¸‰æ¬¡æ¡æ‰‹ï¼ŒåŒ…å¤´ä¸­çš„æ ‡å¿—å˜åŒ–</p>
<img src="/Linux-Lover/TCP/TCP3%E6%AC%A1%E6%8F%A1%E6%89%8B.jpg" class title="TCP3æ¬¡æ¡æ‰‹">


<p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€ syn åŒ…(tcpåè®®ä¸­synä½ç½®1ï¼Œåºå·ä¸ºX)åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥ SYN_SEND çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼› </p>
<p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ° syn åŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„ SYNï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ª SYN åŒ…ï¼Œå³ SYN+ACKåŒ…ï¼ˆtcpåè®®ä¸­synä½ç½®1ï¼Œackä½ç½®1ï¼Œåºå·Kï¼Œç¡®å®šåºå·ä¸ºX+1ï¼‰ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥ SYN_RECV çŠ¶æ€ï¼›</p>
<p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ SYNï¼‹ACK åŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ… ACK(tcpåè®®ä¸­ackä½ç½®1ï¼Œç¡®è®¤åºå·Y+1), æ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ ESTABLISHED çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹</p>
<img src="/Linux-Lover/TCP/%E5%8C%85.jpg" class title="TCP3æ¬¡æ¡æ‰‹">

<p>seqæ˜¯æ•°æ®åŒ…æœ¬èº«çš„åºåˆ—å·ï¼›ackæ˜¯æœŸæœ›å¯¹æ–¹ç»§ç»­å‘é€çš„é‚£ä¸ªæ•°æ®åŒ…çš„åºåˆ—å·ã€‚ </p>
<img src="/Linux-Lover/TCP/TCP.jpg" class title="accetp()ä¸€ç›´é˜»å¡åˆ°å®¢æˆ·ç«¯è¿æ¥">

<p>serv.cæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;sys/socket.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;netinet/in.h&gt;  // åŒ…å«AF_INETç›¸å…³ç»“æ„</span></span><br><span class="line"><span class="comment">#include&lt;arpa/inet.h&gt; // åŒ…å«AF_INETç›¸å…³æ“ä½œçš„å‡½æ•°</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#define PORT 3339</span></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	char sendbuf[256]=<span class="string">"ok"</span>;</span><br><span class="line">   char buf[256] ;</span><br><span class="line">   int s_fd,c_fd;// æœåŠ¡å™¨å’Œå®¢æˆ·å¥—æ¥å­—æ ‡è¯†ç¬¦</span><br><span class="line">   int s_len,c_len;// æœåŠ¡å™¨å’Œå®¢æˆ·æ¶ˆæ¯é•¿åº¦</span><br><span class="line">   </span><br><span class="line">   struct sockaddr_in s_addr; // æœåŠ¡å™¨å¥—æ¥å­—åœ°å€</span><br><span class="line">   struct sockaddr_in c_addr;// å®¢æˆ·å¥—æ¥å­—åœ°å€</span><br><span class="line">   </span><br><span class="line"> Â  s_fd = socket(AF_INET,SOCK_STREAM,0); //åˆ›å»ºå¥—æ¥å­—</span><br><span class="line">   </span><br><span class="line"> Â  s_addr.sin_family = AF_INET;//å¥—æ¥å­—çš„åŸŸ</span><br><span class="line"> Â  s_addr.sin_addr.s_addr = htonl(INADDR_ANY);</span><br><span class="line">   s_addr.sin_port = PORT ;//å®šä¹‰æœåŠ¡å™¨å¥—æ¥å­—ç«¯å£</span><br><span class="line">   s_len = sizepf(s_addr);</span><br><span class="line">   </span><br><span class="line"> Â  <span class="built_in">bind</span>(s_fd,(struct sockaddr *) &amp;s_addr,s_len);//ç»‘å®šå¥—æ¥å­— </span><br><span class="line">   </span><br><span class="line"> Â  listen(s_fd,10); // ç›‘å¬çŠ¶æ€ï¼Œå®ˆå€™è¿›ç¨‹,å…è®¸ç­‰å¾…é˜Ÿåˆ—è¯·æ±‚æ•°10 </span><br><span class="line"> Â  <span class="built_in">printf</span>(<span class="string">"è¯·ç¨åï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„å‘é€æ•°æ®\n"</span>);</span><br><span class="line">   </span><br><span class="line">   /*æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚*/</span><br><span class="line">   c_len = sizeof(c_addr);</span><br><span class="line"> Â  c_fd = accetp(s_fd,(struct sockaddr*)&amp; c_addr,c_len); </span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(1)</span><br><span class="line">   &#123;</span><br><span class="line"> Â   	<span class="keyword">if</span>(recv(c_fd,buf,256,0) &gt; 0) //æ”¶åˆ°å®¢æˆ·Â  Â </span><br><span class="line">        &#123;</span><br><span class="line"> Â   		<span class="built_in">printf</span>(<span class="string">"æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯ï¼š\n %s\n"</span>,buf);</span><br><span class="line"> Â  Â  Â  Â  send(c_fd,sendbuf,sizeof(sendbuf),0);//å›å¤å®¢æˆ·</span><br><span class="line"> Â  		 &#125;</span><br><span class="line">   &#125;</span><br><span class="line">	close(c_fd);// å…³é—­è¿æ¥</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>client.cæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/socket.h&gt;		   // åŒ…å«å¥—æ¥å­—å‡½æ•°åº“</span></span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;netinet/in.h&gt;			// åŒ…å«AF_INETç›¸å…³ç»“æ„</span></span><br><span class="line"><span class="comment">#include &lt;arpa/inet.h&gt;			// åŒ…å«AF_INETç›¸å…³æ“ä½œçš„å‡½æ•°</span></span><br><span class="line"><span class="comment">#include &lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#define PORT 3339</span></span><br><span class="line">int <span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">   int sockfd;								// å®¢æˆ·å¥—æ¥å­—æ ‡è¯†ç¬¦</span><br><span class="line">   int len;									// å®¢æˆ·æ¶ˆæ¯é•¿åº¦</span><br><span class="line">   struct sockaddr_in addr;				// å®¢æˆ·å¥—æ¥å­—åœ°å€</span><br><span class="line">   int newsockfd;</span><br><span class="line">   char buf[256]=<span class="string">"come on!"</span>;//è¦å‘é€çš„æ¶ˆæ¯</span><br><span class="line">   int len2;							</span><br><span class="line">   char rebuf[256];  </span><br><span class="line">  </span><br><span class="line">	sockfd = socket(AF_INET,SOCK_STREAM,0);</span><br><span class="line"> Â  addr.sin_family = AF_INET;  // å®¢æˆ·ç«¯å¥—æ¥å­—åœ°å€ä¸­çš„åŸŸ</span><br><span class="line">   addr.sin_addr.s_addr=htonl(INADDR_ANY);   </span><br><span class="line">   addr.sin_port = PORT;		// å®¢æˆ·ç«¯å¥—æ¥å­—ç«¯å£</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">   len = sizeof(addr);</span><br><span class="line">  	newsockfd = connect(sockfd,(struct sockaddr *)&amp;addr ,len);//å‘é€è¿æ¥æœåŠ¡å™¨çš„è¯·æ±‚</span><br><span class="line">  <span class="keyword">if</span> (newsockfd == -1)</span><br><span class="line">  &#123;</span><br><span class="line"> Â perror(<span class="string">"è¿æ¥è¯¶å¤±è´¥\n"</span>);</span><br><span class="line">  <span class="built_in">return</span> 1;</span><br><span class="line">  &#125;</span><br><span class="line">  len2 = sizeof(buf);</span><br><span class="line">  <span class="keyword">while</span>(1)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"è¯·è¾“å…¥è¦å‘é€çš„æ•°æ®:"</span>);</span><br><span class="line">    scanf(<span class="string">"%s"</span>,buf);</span><br><span class="line">    send(sockfd,buf,len2,0); //å‘é€æ¶ˆæ¯</span><br><span class="line"> Â <span class="keyword">if</span>(recv(sockfd,rebuf,256,0) &gt; 0)  //æ¥æ”¶åˆ°</span><br><span class="line"> Â &#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯:\n%s\n"</span>,rebuf);//è¾“å‡ºåˆ°ç»ˆç«¯	</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">  close(sockfd);</span><br><span class="line">   <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç»“æœ</strong></p>
<img src="/Linux-Lover/TCP/%E5%9F%BA%E6%9C%AC%E5%A5%97%E6%8E%A5%E5%AD%97.jpg" class title="åŸºæœ¬å¥—æ¥å­—">]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¾çš„é¢è¯•</title>
    <url>/My-interview-Lover/%E7%BE%8E%E7%9A%84%E9%9D%A2%E8%AF%95/</url>
    <content><![CDATA[<p>å››å¤§ä¸šåŠ¡ï¼šæ•°å­—åŒ–ä¸šåŠ¡ã€æ¶ˆè´¹è€…å®¶ç”µã€ç©ºè°ƒä¸šåŠ¡ã€æœºå™¨äººè‡ªåŠ¨åŒ–</p>
]]></content>
      <categories>
        <category>My interview Lover</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œ</title>
    <url>/Linux-Lover/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</url>
    <content><![CDATA[<p>1.è®¡ç®—æœºç½‘ç»œå®šä¹‰<br>æ‰€è°“çš„è®¡ç®—æœºç½‘ç»œï¼Œå°±æ˜¯ä¸€äº›äº’ç›¸è¿æ¥çš„ã€è‡ªæ²»çš„è®¡ç®—æœºçš„é›†åˆã€‚è®¡ç®—æœºç½‘ç»œæœ‰å¾ˆå¤šç§ç±»åˆ«ã€‚<br>ï¼ˆ1ï¼‰æ ¹æ®ä¸åŒçš„ä½œç”¨èŒƒå›´å¯ä»¥å°†è®¡ç®—æœºç½‘ç»œç†è§£ä¸ºå¹¿åŸŸç½‘ï¼ˆWANï¼‰ã€åŸåŸŸç½‘ï¼ˆMANï¼‰ã€å±€åŸŸç½‘ï¼ˆLANï¼‰ã€ä¸ªäººåŒºåŸŸç½‘ï¼ˆPANï¼‰ã€‚<br>ï¼ˆ2ï¼‰æ ¹æ®ä¸åŒçš„ä½¿ç”¨è€…ï¼Œå¯ä»¥å°†è®¡ç®—æœºç½‘ç»œåˆ†ä¸ºå…¬ç”¨ç½‘å’Œä¸“ç”¨ç½‘ã€‚</p>
<p>2.è®¡ç®—æœºç½‘ç»œçš„é€šä¿¡æ¨¡å¼<br>è®¡ç®—æœºç½‘ç»œçš„é€šä¿¡æ¨¡å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯çº¿è·¯äº¤æ¢ï¼Œå¦ä¸€ç§æ˜¯åŒ…äº¤æ¢ã€‚</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>çº¿è·¯äº¤æ¢</td>
<td>å°±æ˜¯æˆ‘ä»¬å®¶å®¶æœ€å¼€å§‹ç”¨çš„ç”µè¯çš„ç½‘ç»œè¿æ¥æŠ€æœ¯ï¼Œæ˜¯é€šè¿‡åœ¨å‘é€ç«¯å’Œæ¥å—ç«¯ä¹‹é—´å»ºç«‹ä¸€æ¡ç‰¹å®šçš„çº¿è·¯ï¼Œè¿›è¡Œæ•°æ®çš„ä¼ è¾“ã€‚</td>
</tr>
<tr>
<td>åŒ…äº¤æ¢</td>
<td>å°±æ˜¯æˆ‘ä»¬ç°åœ¨å¸¸ç”¨åˆ°çš„è®¡ç®—æœºçš„ç½‘ç»œé€šä¿¡æ¨¡å¼ï¼Œæ˜¯é€šè¿‡å°†æ‰€æœ‰çš„è®¡ç®—æœºæ”¾åˆ°ä¸€ä¸ªå…±åŒçš„ç½‘ç»œè¿æ¥ä¸­ï¼Œæ•°æ®çš„å‘é€ç«¯å°†è¦ä¼ è¾“çš„æ•°æ®åˆ†å‰²æˆå‡ ä»½ï¼Œç„¶åå°†æ¯ä¸€ä»½æ•°æ®å°è£…æˆä¸€ä¸ªåŒ…ï¼ŒåŒ…ä¸­å«æœ‰æ¥æ”¶ç«¯çš„å±æ€§ä¿¡æ¯ç­‰ï¼Œä¸”æ¯ä¸ªåŒ…éƒ½æ˜¯å•ç‹¬ä¼ è¾“çš„ã€‚</td>
</tr>
</tbody></table>
<p>OSI 7å±‚åè®®æ¨¡å‹ å’Œå„ä¸ªå±‚æ¬¡çš„ å…³ç³» </p>


<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>ç‰©ç†å±‚</td>
</tr>
<tr>
<td>æ•°æ®é“¾è·¯å±‚</td>
</tr>
<tr>
<td>ç½‘ç»œå±‚</td>
</tr>
<tr>
<td>ä¼ è¾“å±‚</td>
</tr>
<tr>
<td>åº”ç”¨å±‚</td>
</tr>
</tbody></table>
<p>TCP/IPé€šä¿¡åè®®é‡‡ç”¨äº†4å±‚çš„å±‚çº§ç»“æ„ï¼Œè¿™4å±‚åˆ†åˆ«ä¸ºï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>åº”ç”¨å±‚</td>
<td>åº”ç”¨ç¨‹åºé—´æ²Ÿé€šçš„å±‚ï¼Œå¦‚ç®€å•ç”µå­é‚®ä»¶ä¼ è¾“ï¼ˆSMTPï¼‰ã€æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFTPï¼‰ã€ç½‘ç»œè¿œç¨‹è®¿é—®åè®®ï¼ˆTelnetï¼‰ç­‰ã€‚</td>
</tr>
<tr>
<td>ä¼ è¾“å±‚</td>
<td>åœ¨æ­¤å±‚ä¸­æä¾›äº†èŠ‚ç‚¹é—´çš„æ•°æ®ä¼ é€æœåŠ¡ï¼Œå¦‚ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰ã€ç”¨æˆ·æ•°æ®åŒ…åè®®ï¼ˆUDPï¼‰ç­‰ï¼ŒTCPå’ŒUDPç»™æ•°æ®åŒ…åŠ å…¥ä¼ è¾“æ•°æ®å¹¶æŠŠå®ƒä¼ è¾“åˆ°ä¸‹ä¸€å±‚ä¸­ã€‚è¿™ä¸€å±‚è´Ÿè´£ä¼ é€æ•°æ®ï¼Œå¹¶ä¸”ç¡®å®šæ•°æ®å·²è¢«é€è¾¾å¹¶æ¥æ”¶ã€‚</td>
</tr>
<tr>
<td>äº’è”ç½‘ç»œå±‚</td>
<td>è´Ÿè´£æä¾›åŸºæœ¬çš„æ•°æ®å°åŒ…ä¼ é€åŠŸèƒ½ï¼Œè®©æ¯ä¸€å—æ•°æ®åŒ…éƒ½èƒ½å¤Ÿåˆ°è¾¾ç›®çš„ä¸»æœºï¼ˆä½†ä¸æ£€æŸ¥æ˜¯å¦è¢«æ­£ç¡®æ¥æ”¶ï¼‰ï¼Œå¦‚ç½‘é™…åï¼ˆIPï¼‰ã€‚</td>
</tr>
<tr>
<td>ç½‘ç»œæ¥å£å±‚</td>
<td>å¯¹å®é™…çš„ç½‘ç»œåª’ä½“çš„ç®¡ç†ï¼Œå®šä¹‰å¦‚ä½•ä½¿ç”¨å®é™…ç½‘ç»œï¼ˆå¦‚Ethernetã€Serial Lineç­‰ï¼‰æ¥ä¼ é€æ•°æ®ã€‚</td>
</tr>
</tbody></table>
<p><strong>æ‹¥å¡æ§åˆ¶ã€æµé‡æ§åˆ¶</strong></p>
<p>æ‹¥å¡æ§åˆ¶ï¼šæ‹¥å¡æ§åˆ¶æ˜¯ä½œç”¨äºç½‘ç»œçš„ï¼Œå®ƒæ˜¯é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œé¿å…å‡ºç°ç½‘ç»œè´Ÿè½½è¿‡å¤§çš„æƒ…å†µï¼›å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯ï¼šï¼ˆ 1 ï¼‰æ…¢å¼€å§‹ã€æ‹¥å¡é¿å…ï¼ˆ 2 ï¼‰å¿«é‡ä¼ ã€å¿«æ¢å¤ã€‚<br>æµé‡æ§åˆ¶ï¼šæµé‡æ§åˆ¶æ˜¯ä½œç”¨äºæ¥æ”¶è€…çš„ï¼Œå®ƒæ˜¯æ§åˆ¶å‘é€è€…çš„å‘é€é€Ÿåº¦ä»è€Œä½¿æ¥æ”¶è€…æ¥å¾—åŠæ¥æ”¶ï¼Œé˜²æ­¢åˆ†ç»„ä¸¢å¤±çš„ã€‚çª—å£æ§åˆ¶æœºåˆ¶</p>
<p>TCPå’ŒUDPåè®®çš„åŒºåˆ«ï¼Œè°ˆè°ˆå¢å¼ºUDPä¼ è¾“å®‰å…¨æ€§çš„ç­–ç•¥<br>å…±åŒç‚¹ï¼šéƒ½æ˜¯ä¼ è¾“å±‚çš„åè®®<br>ä¸åŒç‚¹ï¼šTCPé¢å‘è¿æ¥ï¼ˆé€šä¿¡å‰è¦å»ºç«‹é€šä¿¡çš„é€šè·¯ï¼‰ï¼Œå¯é æ€§é«˜<br>      UDPæ— è¿æ¥ï¼Œä¸å¯é ï¼ˆå¯å¢åŠ æ ¡éªŒæœºåˆ¶å¢åŠ å¯é æ€§ï¼‰</p>
<p>ï¼ˆ*ï¼‰ç»„æ’­çš„ä¼˜ç‚¹ï¼š </p>
<ol>
<li>éœ€è¦ç›¸åŒæ•°æ®æµçš„å®¢æˆ·ç«¯åŠ å…¥ç›¸åŒçš„ç»„å…±äº«ä¸€æ¡æ•°æ®æµï¼ŒèŠ‚çœäº†æœåŠ¡å™¨çš„è´Ÿè½½ã€‚å…·å¤‡å¹¿æ’­æ‰€å…·å¤‡çš„ä¼˜ç‚¹ã€‚ </li>
<li>ç”±äºç»„æ’­åè®®æ˜¯æ ¹æ®æ¥å—è€…çš„éœ€è¦ï¼Œå¯¹æ•°æ®æµè¿›è¡Œå¤åˆ¶è½¬å‘ï¼Œæ‰€ä»¥æœåŠ¡ç«¯çš„æœåŠ¡æ€»å¸¦å®½ä¸å—å®¢æˆ·æ¥å…¥ç«¯å¸¦å®½çš„é™åˆ¶ã€‚IPåè®®å…è®¸æœ‰2äº¿6åƒå¤šä¸‡ä¸ªï¼ˆ268435456ï¼‰ç»„æ’­ï¼Œæ‰€ä»¥å…¶æä¾›çš„æœåŠ¡å¯ä»¥éå¸¸ä¸°å¯Œã€‚ </li>
<li>æ­¤åè®®å’Œå•æ’­åè®®ä¸€æ ·å…è®¸åœ¨Internetå®½å¸¦ç½‘ä¸Šä¼ è¾“ã€‚</li>
</ol>
<p>å¯¹äºä¸€ä¸ªæ²¡æœ‰è®¾ç½®ä»»ä½•å¥—æ¥å£é€‰é¡¹çš„é˜»å¡å¥—æ¥å£ï¼Œè°ƒç”¨recvæ¥æ”¶å¯¹æ–¹çš„æ•°æ®ï¼Œå¯¹æ–¹å‘é€æ•°æ®å‰çªç„¶æ–­ç”µï¼Œrecvæ°¸è¿œä¸ä¼šè¿”å›ã€‚</p>
<p><strong>TCP/IPå±‚IPåè®®çš„æœåŠ¡æ˜¯æ— è¿æ¥æ•°æ®æŠ¥</strong></p>
<p>ä¸€å°ä¸»æœºä»ä¸€ä¸ªç½‘ç»œç§»åˆ°å¦ä¸€ä¸ªç½‘ç»œ.IPåœ°å€éœ€è¦æ”¹å˜ï¼ŒMACåœ°å€ä¸éœ€è¦æ”¹å˜</p>
<p>ç»å…¸é¢˜ç›®ï¼šæŸå…¬å¸ç”³è¯·åˆ°ä¸€ä¸ªCç±»çš„IPåœ°å€ï¼Œä½†è¦è¿æ¥6ä¸ªå­å…¬å¸ï¼Œæœ€å¤§çš„ä¸€ä¸ªå­å…¬å¸æœ‰26å°è®¡ç®—æœºï¼Œæ¯ä¸ªå­å…¬å¸åœ¨ä¸€ä¸ªç½‘æ®µä¸­ï¼Œåˆ™å­ç½‘æ©ç åº”è¯¥ä¸ºå¤šå°‘ï¼Ÿ<br>å› ä¸ºæœ‰å…­ä¸ªå­å…¬å¸ï¼Œæ‰€ä»¥å¿…é¡»æœ‰ä¸‰ä½1ï¼Œæœ‰26å°ï¼Œå¿…é¡»æœ‰äº”ä¸ª0ï¼Œæ‰€ä»¥äºŒè¿›åˆ¶ä½11100000ï¼Œè½¬æ¢ä¸ºåè¿›åˆ¶æ˜¯224</p>
<p>DNSæ˜¯åŸŸåæœåŠ¡å™¨ï¼Œç”¨æ¥è§£æåŸŸåçš„ï¼ˆåŸŸåä¸IPä¹‹é—´çš„è§£æï¼‰ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸œè¥¿ï¼Œä½ å¿…é¡»è¾“å…¥ç½‘ç«™çš„IPåœ°å€ï¼Œæœ‰äº†DNSï¼Œä½ å°±å¯ä»¥ç›´æ¥è¾“å…¥ç½‘å€ã€‚</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µé˜»å¼ä¼ æ„Ÿå™¨</title>
    <url>/Circuit-Lover/%E7%94%B5%E9%98%BB%E5%BC%8F%E4%BC%A0%E6%84%9F%E5%99%A8/</url>
    <content><![CDATA[<p>åº”å˜å¼ ï¼ˆä¸å¼ã€ç®”å¼å’Œè–„è†œå¼ä¸‰ç§ï¼‰</p>
<img src="/Circuit-Lover/%E7%94%B5%E9%98%BB%E5%BC%8F%E4%BC%A0%E6%84%9F%E5%99%A8/%E5%85%AC%E5%BC%8F.jpg" class title="åº”å˜å¼">

<p>è¦æŠŠç”µé˜»çš„å˜åŒ–è½¬æ¢ä¸ºç”µå‹æˆ–ç”µæµçš„å˜åŒ–ï¼Œéœ€è¦è½¬æ¢ç”µè·¯æ¥å®ç°ã€‚è½¬æ¢ç”µè·¯å¸¸é‡‡ç”¨ç›´æµç”µæ¡¥æˆ–äº¤æµç”µæ¡¥ã€‚</p>
<img src="/Circuit-Lover/%E7%94%B5%E9%98%BB%E5%BC%8F%E4%BC%A0%E6%84%9F%E5%99%A8/%E7%9B%B4%E6%B5%81%E7%94%B5%E6%A1%A5.jpg" class>

<img src="/Circuit-Lover/%E7%94%B5%E9%98%BB%E5%BC%8F%E4%BC%A0%E6%84%9F%E5%99%A8/%E4%BA%A4%E6%B5%81%E7%94%B5%E6%A1%A5.jpg" class>

<p><strong>å‹é˜»å¼ä¼ æ„Ÿå™¨æ˜¯åŸºäºåŠå¯¼ä½“ææ–™çš„å‹é˜»æ•ˆåº”æ¥å·¥ä½œçš„ä¼ æ„Ÿå™¨</strong></p>
<p>__åˆ†ä¸ºåŠå¯¼ä½“åº”å˜å¼å‹é˜»ä¼ æ„Ÿå™¨ ã€æ‰©æ•£å‹å‹é˜»ä¼ æ„Ÿå™¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¸é‡‘å±ç”µé˜»åº”å˜ç‰‡ç›¸æ¯”ï¼ŒåŠå¯¼ä½“åº”å˜å¼å…·æœ‰ï¼šä½“ç§¯å°ã€æ¨ªå‘æ•ˆåº”å°ã€çµæ•åº¦é«˜ç­‰ç‰¹ç‚¹ã€‚</span><br><span class="line">å°†På‹æ‚è´¨æ‰©æ•£åˆ°Nå‹ç¡…åº•å±‚ä¸Šï¼Œå½¢æˆä¸€å±‚æè–„çš„å¯¼ç”µPå‹å±‚ï¼Œè£…ä¸Šå¼•çº¿æ¥ç‚¹åï¼Œå³å½¢æˆæ‰©æ•£å‹åŠå¯¼ä½“åº”å˜ç‰‡ã€‚</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>ç”µé˜»å¼ä¼ æ„Ÿå™¨åº”ç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>ï¼ˆ1ï¼‰åº”å˜å¼æµ‹åŠ›ä¸è·é‡ä¼ æ„Ÿå™¨</td>
</tr>
<tr>
<td>ï¼ˆ2ï¼‰åº”å˜å¼å‹åŠ›ä¼ æ„Ÿå™¨</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>51å•ç‰‡æœº</title>
    <url>/MCU-Lover/51%E5%8D%95%E7%89%87%E6%9C%BA/</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å•ç‰‡æœºæ„é€ :</span><br><span class="line">40å¼•è„šåŒåˆ—ç›´æ’DIPå°è£…, PO, P1, P2, P3,å…¶ä¸­P0ä¸ä»…ä½œä¸ºæ™®é€šçš„1/0å£ä½¿ç”¨,è¿˜å¯ä»¥ä½œä¸ºåœ°å€/æ•°æ®çº¿ä½¿ç”¨ã€åŒå‘å£ã€‘æ€»å…±32ä¸ªè¾“å…¥è¾“å‡ºå¼•è„š, 2ä¸ªç”µæºæ¥åœ°, 2ä¸ªç®¡æ•™æ¥æ™¶æŒ¯,å¤ä½å’Œæ§åˆ¶4ä¸ª: EA ã€å†…å¤–å­˜å‚¨é€‰æ‹©å¼•è„š,EA ä¸ºä½ç”µå¹³,åªè®¿é—®å¤–éƒ¨ç¨‹åºå­˜å‚¨å™¨ã€‘</span><br><span class="line"></span><br><span class="line">å·¥ä½œæ–¹å¼:å¤ä½ä½æ–¹å¼ã€RSTå¼•è„šè¾“å…¥é«˜ç”µå¹³æœ‰æ•ˆã€‘,å•æ­¥æ‰§è¡Œæ–¹å¼ã€é€šè¿‡å¤–æ¥è„‰å†²æ§åˆ¶,æ¥ä¸€ä¸ªè„‰å†²æ‰§è¡Œä¸€æ¡æŒ‡ä»¤,å€ŸåŠ©å¤–éƒ¨ä¸­æ–­åŠŸèƒ½ã€‘,ç¨‹åºæ‰§è¡Œæ–¹å¼ã€ä¸»è¦æ–¹å¼,å¤ä½åPCæŒ‡å‘åœ°å€0000H,ä»æ­¤æ‰§è¡Œå¤åˆ¶å¯¼å€æ–¹å¼:ç«‹å³å¯»å€,ç›´æ¥å¯»å€,å¯„å­˜å™¨å¯»å€,å¯„å­˜å™¨é—´æ¥å¯»å€,å˜å€å¯»å€,ç›¸å¯¹å¯»å€,ä½å¯»å€</span><br><span class="line"></span><br><span class="line">512å­—èŠ‚RAM 8å­—èŠ‚ROMï¼ˆEEPROMï¼‰</span><br></pre></td></tr></table></figure>

<img src="/MCU-Lover/51%E5%8D%95%E7%89%87%E6%9C%BA/51.jpg" class width="51">




<p>__æ™¶ä½“ä¸æ™¶æŒ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ™¶ä½“ï¼ˆcrystalï¼‰ä¹Ÿå«åšæ— ç¼˜æ™¶ä½“ã€‚å®ƒæ˜¯çŸ³è‹±æ™¶ç‰‡ï¼Œé•€ä¸Šç”µæï¼Œè£…åœ¨æ”¯æ¶ä¸Šï¼Œæ”¾åœ¨å¤–å£³é‡Œï¼Œå°±æ˜¯çŸ³è‹±æ™¶ä½“æŒ¯è¡å™¨ï¼Œç®€ç§°æ™¶ä½“ã€‚å¸¸è§çš„æœ‰ä¸¤åªè„šã€‚</span><br><span class="line">æ™¶æŒ¯ï¼ˆcrystal oscillatorï¼‰ä¹Ÿå«åšæœ‰æºæ™¶æŒ¯ã€‚åœ¨æ™¶ä½“çš„åŸºç¡€ä¸Šï¼Œå†åŠ ä¸ŠæŒ¯è¡ã€æ”¾å¤§æˆ–è€…æ•´å½¢ç”µè·¯ï¼Œç„¶åå°è£…åˆ°å£³å­é‡Œï¼Œå°±æ˜¯æ™¶æŒ¯ã€‚å¸¸è§çš„æœ‰å››åªè„šã€‚</span><br></pre></td></tr></table></figure>

<img src="/MCU-Lover/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%99%B6%E4%BD%93%E4%B8%8E%E6%99%B6%E6%8C%AF.jpg" class title="æ™¶ä½“ä¸æ™¶æŒ¯">


<p>å¸¸è§é—®é¢˜ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€å•ç‰‡æœºä¸­çš„ç¨‹åºè®¡æ•°å™¨PCæ˜¯16ä½çš„å¯»å€èŒƒå›´æ˜¯64KBæ€ä¹ˆæ¥çš„å‘€</span><br><span class="line">2 ^ 16ï¼Œä¿å­˜æŒ‡ç¤ºä¸‹ä¸€ä¸ªæŒ‡ä»¤åœ°å€</span><br><span class="line"></span><br><span class="line">2ã€ä¸‰ä¸ªå‘¨æœŸ</span><br><span class="line">æ—¶é’Ÿå‘¨æœŸæ˜¯å•ç‰‡æœºçš„åŸºæœ¬æ—¶é—´å•ä½ã€‚</span><br><span class="line">æœºå™¨å‘¨æœŸï¼Œå®ƒæ˜¯CPUå®Œæˆä¸€ä¸ªåŸºæœ¬æ“ä½œæ‰€éœ€çš„æ—¶é—´ã€‚</span><br><span class="line">æŒ‡ä»¤å‘¨æœŸï¼Œæ˜¯æŒ‡CPUæ‰§è¡Œä¸€æ¡æŒ‡ä»¤éœ€è¦èŠ±è´¹çš„æ—¶é—´ã€‚</span><br><span class="line">å¤–æ¥11.0592MHZæ™¶ä½“ï¼Œ</span><br><span class="line">æ—¶é’Ÿå‘¨æœŸ=1/11.0592M</span><br><span class="line">æœºå™¨å‘¨æœŸ=12/11.0592M â‰ˆ1.085us</span><br><span class="line">æŒ‡ä»¤å‘¨æœŸ=1ä¸ªï¼Œ2ä¸ªæˆ–4ä¸ªæœºå™¨å‘¨æœŸ</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>MCU Lover</category>
      </categories>
      <tags>
        <tag>å•ç‰‡æœº</tag>
      </tags>
  </entry>
  <entry>
    <title>STM32å•ç‰‡æœº</title>
    <url>/MCU-Lover/M32%E5%8D%95%E7%89%87%E6%9C%BA/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>MCU Lover</category>
      </categories>
      <tags>
        <tag>å•ç‰‡æœº</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå­¦ä¹ </title>
    <url>/uncategorized/shell%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p><strong>bash</strong><br>å¤§å¤šæ•°Linuxç³»ç»Ÿé»˜è®¤ä½¿ç”¨çš„shellï¼Œbash shell æ˜¯shell çš„ä¸€ä¸ªå…è´¹ç‰ˆæœ¬ï¼Œå®ƒæ˜¯æœ€æ—©çš„ Unix shellï¼Œbashè¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥é€šè¿‡helpå‘½ä»¤æ¥æŸ¥çœ‹å¸®åŠ©ã€‚åŒ…å«çš„åŠŸèƒ½å‡ ä¹å¯ä»¥æ¶µç›–shellæ‰€å…·æœ‰çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸€èˆ¬çš„shellè„šæœ¬éƒ½ä¼šæŒ‡å®šå®ƒä¸ºæ‰§è¡Œè·¯å¾„ã€‚</p>
<p>æ³¨æ„ï¼šwindows ä¸‹ powershell QAQ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ç¼–å†™ï¼štest.sh</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'hello world '</span></span><br><span class="line">è¿è¡Œ ./test.sh</span><br></pre></td></tr></table></figure>]]></content>
  </entry>
  <entry>
    <title>æ•°æ®åº“SQLè¯­è¨€</title>
    <url>/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93SQL%E8%AF%AD%E8%A8%80/</url>
    <content><![CDATA[<p>å¾ˆæ£’çš„ä¸€ä¸ªé“¾æ¥ï¼š<a href="https://cloudlandboy.github.io/myNote/#/backend/mysql/dbandsql" target="_blank" rel="noopener">https://cloudlandboy.github.io/myNote/#/backend/mysql/dbandsql</a><br>ä¸ä¼šå°±æ‰“å¼€çœ‹çœ‹QvQ</p>
]]></content>
      <categories>
        <category>MySql Lover</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“ç³»ç»Ÿæ¦‚è¿°</title>
    <url>/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/</url>
    <content><![CDATA[<p>1ã€<strong>æ•°æ®åº“ç”±å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼Œè¿™ä¸ªç»“æ„æœ‰ä»€ä¹ˆå¥½å¤„ã€‚</strong><br>ç­”:â‘ æ•°æ®åº“ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆåŠå…¶å¼€å‘å·¥å…·ï¼‰ã€æ•°æ®åº“ç®¡ç†å‘˜ã€åº”ç”¨ç³»ç»Ÿã€‚<br>ä¸‰çº§æ¨¡å¼:æ¨¡å¼ã€å¤–æ¨¡å¼ã€å†…æ¨¡å¼<br>ä¸¤å±‚æ˜ åƒç»“æ„:å¤–æ¨¡å¼æ¨¡å¼æ˜ åƒ,æ¨¡å¼å†…æ¨¡å¼æ˜ åƒ<br>å¥½å¤„ï¼šä¿è¯äº†æ•°æ®ä¸ç¨‹åºçš„é€»è¾‘ç‹¬ç«‹æ€§å’Œç‰©ç†ç‹¬ç«‹æ€§</p>
<p>2ã€<strong>æ•°æ®æ¨¡å‹</strong></p>
<p>æ¦‚å¿µæ¨¡å‹ï¼šå®ä½“ã€å±æ€§ã€ç ã€å®ä½“å‹ã€å®ä½“é›†ã€è”ç³»</p>
<p>æ•°æ®æ¨¡å‹ç”±æ•°æ®ç»“æ„ã€æ•°æ®æ“çºµã€æ•°æ®çº¦æŸè§„åˆ™ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆã€‚</p>
<p>3ã€<strong>å¸¸è§æ¨¡å‹</strong><br>å±‚æ¬¡æ¨¡å‹ï¼š<br>ç½‘çŠ¶æ¨¡å‹ï¼š<br>ï¼ˆé‡ç‚¹ï¼‰å…³ç³»æ¨¡å‹ï¼š<br>é¢å‘å¯¹è±¡æ¨¡å‹ï¼š<br>å¯¹è±¡å…³ç³»æ¨¡å‹ï¼š<br>åŠç»“æ„åŒ–æ¨¡å‹ï¼š</p>
<p>é‡ç‚¹ï¼š<br>å…³ç³»æ¨¡å‹æ•°æ®ç»“æ„:äºŒç»´è¡¨ï¼ˆå…³ç³»ã€å…ƒç»„ï¼ˆè¡Œï¼‰ã€å±æ€§ï¼ˆåˆ—ï¼‰ç ã€åŸŸã€åˆ†ç»„ã€å…³ç³»æ¨¡å¼ï¼‰<br>å…³ç³»æ¨¡å‹æ•°æ®æ“çºµ:æ’å…¥ã€åˆ é™¤ã€æ›´æ–°ã€æŸ¥è¯¢ã€‚<br>å…³ç³»æ¨¡å‹æ•°æ®å®Œæ•´æ€§çº¦æŸè§„åˆ™:å®ä½“å®Œæ•´æ€§ã€å‚ç…§å®Œæ•´æ€§ã€ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§ã€‚</p>
<p>4ã€<strong>å…³ç³»æ¨¡å‹</strong></p>
<p>ï¼ˆ1ï¼‰å…³ç³»ï¼šåŸŸã€ç¬›å¡å°”ç§¯ã€å…³ç³»..<br>æ‰©å±•ï¼š<br>å€™é€‰ç (Candidate Key)ï¼šä¸€ä¸ªæˆ–è€…å¤šä¸ªå±æ€§çš„é›†åˆï¼Œå¯ä»¥å”¯ä¸€ç¡®å®šå®ä½“çš„ä¸€ä¸ªå®ä¾‹ï¼›<br>ä¸»ç (Primary Key):ä»å€™é€‰ç ä¸­ï¼Œé€‰ä¸­ç”¨æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„å±æ€§æˆ–è€…å±æ€§ç»„è¢«ç§°ä¸ºä¸»ç ï¼›<br>å¯é€‰ç (Alternative Key):å€™é€‰ç ä¸­æ²¡æœ‰é€‰ä¸­çš„å…¶ä»–ç ï¼Œç§°ä¸ºå¯é€‰ç ï¼›</p>
<p>ï¼ˆ2ï¼‰å…³ç³»æ“ä½œï¼šæŸ¥è¯¢åˆ†ä¸€ç±»ï¼Œæ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹ä¸€ç±»</p>
<p>å…³ç³»æ•°æ®åº“è¯­è¨€ï¼šå…³ç³»ä»£æ•°ä¸å…³ç³»æ¼”ç®—(SQL ä¸¤è€…çš„ç»“åˆ)<br>ï¼ˆ3ï¼‰å…³ç³»ä»£æ•°</p>
<img src="/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0.jpg" class title="å…³ç³»ä»£æ•°">

<p>ä¸“é—¨å…³ç³»è¿ç®—ï¼šé€‰æ‹©ã€æŠ•å°„ã€è¿æ¥ã€é™¤è¿ç®—ã€‚</p>


<img src="/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/%E5%A4%96%E8%BF%9E%E6%8E%A5.jpg" class title="å¤–è¿æ¥æ˜¯è‡ªç„¶è¿æ¥">

<img src="/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/%E9%99%A4%E6%B3%95.jpg" class title="é™¤è¿ç®—">

<p>ï¼ˆ4ï¼‰å…³ç³»æ¼”ç®—ï¼ˆ*ï¼‰</p>
]]></content>
      <categories>
        <category>MySql Lover</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®æ³¢ä¼ æ„Ÿå™¨</title>
    <url>/Circuit-Lover/%E5%BE%AE%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8/</url>
    <content><![CDATA[<h5 id="å¾®æ³¢"><a href="#å¾®æ³¢" class="headerlink" title="å¾®æ³¢"></a>å¾®æ³¢</h5><p>å¾®æ³¢æ˜¯0.1m-1mçš„ç”µç£æ³¢ï¼Œæ³¢é•¿ç›¸å¯¹è¾ƒé•¿çš„ç”µç£æ³¢ã€‚å¯¹åº”çš„æ³¢æ®µé¢‘ç‡èŒƒå›´ä¸º300 MHzï½3000 GHzã€‚ </p>
<h5 id="å¾®æ³¢ç‰¹ç‚¹"><a href="#å¾®æ³¢ç‰¹ç‚¹" class="headerlink" title="å¾®æ³¢ç‰¹ç‚¹"></a>å¾®æ³¢ç‰¹ç‚¹</h5><p>(1)ä¼¼å…‰æ€§å’Œä¼¼å£°æ€§<br>(2)åˆ†ææ–¹æ³•çš„ç‹¬ç‰¹æ€§<br>ä½é¢‘ç”µè·¯ä¸é€‚ç”¨<br>(3)å…±åº¦æ€§<br>ç”µå­åœ¨çœŸç©ºç®¡å†…çš„æ¸¡è¶Šæ—¶é—´ï¼ˆ10-9ç§’å·¦å³ï¼‰ä¸å¾®æ³¢çš„æŒ¯è¡å‘¨æœŸï¼ˆ 10-9 ï½10-15ç§’ï¼‰ç›¸å½“çš„è¿™ä¸€ç‰¹æ€§ç§°å…±åº¦æ€§ï¼Œåˆ©ç”¨è¯¥ç‰¹æ€§å¯ä»¥åšæˆå„ç§å¾®æ³¢ç”µçœŸç©ºå™¨ä»¶ï¼Œå¾—åˆ°å¾®æ³¢æŒ¯è¡æºã€‚<br>(4)ç©¿é€æ€§<br>(5)ä¿¡æ¯æ€§<br>(6)éç”µç¦»æ€§</p>
<h5 id="å¾®æ³¢ä¼ æ„Ÿå™¨"><a href="#å¾®æ³¢ä¼ æ„Ÿå™¨" class="headerlink" title="å¾®æ³¢ä¼ æ„Ÿå™¨"></a>å¾®æ³¢ä¼ æ„Ÿå™¨</h5><p><strong>åŸç†</strong><br>å¾®æ³¢ä¼ æ„Ÿå™¨æ˜¯åˆ©ç”¨å¾®æ³¢ç‰¹æ€§æ¥æ£€æµ‹æŸäº›ç‰©ç†é‡çš„å™¨ä»¶æˆ–è£…ç½®ã€‚ç”±å‘å°„å¤©çº¿å‘å‡ºå¾®æ³¢ï¼Œæ­¤æ³¢é‡åˆ°è¢«æµ‹ç‰©ä½“æ—¶å°†è¢«å¸æ”¶æˆ–åå°„ï¼Œä½¿å¾®æ³¢åŠŸç‡å‘ç”Ÿå˜åŒ–ã€‚è‹¥åˆ©ç”¨æ¥æ”¶å¤©çº¿ï¼Œæ¥æ”¶åˆ°é€šè¿‡è¢«æµ‹ç‰©ä½“æˆ–ç”±è¢«æµ‹ç‰©ä½“åå°„å›æ¥çš„å¾®æ³¢ï¼Œå¹¶å°†å®ƒè½¬æ¢ä¸ºç”µä¿¡å·ï¼Œå†ç»è¿‡ä¿¡å·è°ƒç†ç”µè·¯ï¼Œå³å¯ä»¥æ˜¾ç¤ºå‡ºè¢«æµ‹é‡ï¼Œå®ç°äº†å¾®æ³¢æ£€æµ‹ã€‚<br><strong>åˆ†ç±»</strong><br>æ ¹æ®å¾®æ³¢ä¼ æ„Ÿå™¨çš„åŸç†ï¼Œå¾®æ³¢ä¼ æ„Ÿå™¨å¯ä»¥åˆ†ä¸ºåå°„å¼å’Œé®æ–­å¼ä¸¤ç±»ã€‚<br><strong>ç»„æˆ</strong><br>å¾®æ³¢ä¼ æ„Ÿå™¨é€šå¸¸ç”±å¾®æ³¢å‘å°„å™¨ï¼ˆå³å¾®æ³¢æŒ¯è¡å™¨ï¼‰ã€ å¾®æ³¢å¤©çº¿åŠå¾®æ³¢æ£€æµ‹å™¨ä¸‰éƒ¨åˆ†ç»„æˆã€‚<br><strong>å¾®æ³¢æŒ¯è¡å™¨</strong> çš„å™¨ä»¶æœ‰è°ƒé€Ÿç®¡ã€ç£æ§ç®¡æˆ–æŸäº›å›ºæ€å™¨ä»¶ï¼Œå°å‹å¾®æ³¢æŒ¯è¡å™¨ä¹Ÿå¯ä»¥é‡‡ç”¨ä½“æ•ˆåº”ç®¡<br><strong>å¾®æ³¢å¤©çº¿</strong> ä¸ºäº†ä½¿å‘å°„çš„å¾®æ³¢å…·æœ‰å°–é”çš„æ–¹å‘æ€§ï¼Œå¤©çº¿è¦å…·æœ‰ç‰¹æ®Šçš„ç»“æ„ã€‚</p>
<img src="/Circuit-Lover/%E5%BE%AE%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8/%E5%BE%AE%E6%B3%A2%E5%A4%A9%E7%BA%BF.jpg" class title="å¾®æ³¢å¤©çº¿">
<p><strong>å¾®æ³¢æ£€æµ‹å™¨</strong><br>ä¸€ç§æ˜¯å°†å¾®æ³¢å˜åŒ–ä¸ºç”µæµçš„è§†é¢‘å˜åŒ–æ–¹å¼<br>ä¸€ç§æ˜¯ä¸æœ¬æœºæŒ¯è¡å™¨å¹¶ç”¨è€Œå˜åŒ–ä¸ºé¢‘ç‡æ¯”å¾®æ³¢ä½çš„å¤–å·®æ³•ã€‚ï¼ˆå·®åˆ†æ–¹å¼ï¼‰</p>
<h5 id="å¾®æ³¢ä¼ æ„Ÿå™¨åº”ç”¨"><a href="#å¾®æ³¢ä¼ æ„Ÿå™¨åº”ç”¨" class="headerlink" title="å¾®æ³¢ä¼ æ„Ÿå™¨åº”ç”¨"></a>å¾®æ³¢ä¼ æ„Ÿå™¨åº”ç”¨</h5><p><strong>å¾®æ³¢æ¶²ä½è®¡</strong></p>
<img src="/Circuit-Lover/%E5%BE%AE%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8/%E5%BE%AE%E6%B3%A2%E4%BE%A7%E4%BD%8D%E8%AE%A1.jpg" class title="å¾®æ³¢ä¾§ä½è®¡">

<p><strong>å¾®æ³¢æ¹¿åº¦ä¼ æ„Ÿå™¨</strong></p>
<p>æ‰©å±•ï¼š<br>ä¸€èˆ¬å¹²ç‡¥çš„ç‰©ä½“ï¼Œå¦‚æœ¨æã€çš®é©ã€è°·ç‰©ã€ çº¸å¼ ã€ å¡‘æ–™ç­‰ï¼Œå…¶Îµâ€²åœ¨1ï½5èŒƒå›´å†…ï¼Œ è€Œæ°´çš„Îµâ€²åˆ™é«˜è¾¾64ï¼Œ å› æ­¤å¦‚æœææ–™ä¸­å«æœ‰å°‘é‡æ°´åˆ†å­æ—¶ï¼Œå…¶å¤åˆÎµâ€²å°†æ˜¾è‘—ä¸Šå‡ï¼Œ Îµâ€³ä¹Ÿæœ‰ç±»ä¼¼æ€§è´¨ã€‚ ä½¿ç”¨å¾®æ³¢ä¼ æ„Ÿå™¨ï¼Œæµ‹é‡å¹²ç‡¥ç‰©ä½“ä¸å«ä¸€å®šæ°´åˆ†çš„æ½®æ¹¿ç‰©ä½“æ‰€å¼•èµ·çš„å¾®æ³¢ä¿¡å·çš„ç›¸ç§»ä¸è¡°å‡é‡ï¼Œ å°±å¯ä»¥æ¢ç®—å‡ºç‰©ä½“çš„å«æ°´é‡ã€‚</p>
<img src="/Circuit-Lover/%E5%BE%AE%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8/%E5%BE%AE%E6%B3%A2%E6%B9%BF%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8.jpg" class title="å¾®æ³¢æ¹¿åº¦ä¼ æ„Ÿå™¨">

<p><strong>å¾®æ³¢æµ‹åšä»ª</strong><br>åˆ©ç”¨å¾®æ³¢åœ¨ä¼ æ’­è¿‡ç¨‹ä¸­é‡åˆ°è¢«æµ‹ç‰©ä½“é‡‘å±è¡¨é¢è¢«åå°„ï¼Œä¸”åå°„æ³¢çš„æ³¢é•¿ä¸é€Ÿåº¦éƒ½ä¸å˜çš„ç‰¹æ€§è¿›è¡Œæµ‹åšçš„ã€‚<br>åŸºæœ¬åŸç†ï¼š<br>ï¼ˆ1ï¼‰åœ¨è¢«æµ‹é‡‘å±ç‰©ä½“ä¸Šä¸‹ä¸¤è¡¨é¢å„å®‰è£…ä¸€ä¸ªç»ˆç«¯å™¨ã€‚å¾®æ³¢ä¿¡å·æºå‘å‡ºçš„å¾®æ³¢ï¼Œç»è¿‡ç¯è¡Œå™¨Aã€ ä¸Šä¼ è¾“æ³¢å¯¼ç®¡ä¼ è¾“åˆ°ä¸Šç»ˆç«¯å™¨ï¼Œç”±ä¸Šç»ˆç«¯å™¨å‘å°„åˆ°è¢«æµ‹ç‰©ä½“ä¸Šè¡¨é¢ä¸Šï¼Œå¾®æ³¢åœ¨è¢«æµ‹ç‰©ä½“ä¸Šè¡¨é¢å…¨åå°„ååˆå›åˆ°ä¸Šç»ˆç«¯å™¨ï¼Œå†ç»è¿‡ä¼ è¾“å¯¼ç®¡ã€ç¯è¡Œå™¨Aã€ä¸‹ä¼ è¾“æ³¢å¯¼ç®¡ä¼ è¾“åˆ°ä¸‹ç»ˆç«¯å™¨ã€‚</p>
<p>ï¼ˆ2ï¼‰ç”±ä¸‹ç»ˆç«¯å™¨å‘å°„åˆ°è¢«æµ‹ç‰©ä½“ä¸‹è¡¨é¢çš„å¾®æ³¢ï¼Œç»å…¨åå°„ååˆå›åˆ°ä¸‹ç»ˆç«¯<br>å™¨ï¼Œå†ç»è¿‡ä¼ è¾“å¯¼ç®¡å›åˆ°ç¯è¡Œå™¨Aã€‚å› æ­¤è¢«æµ‹ç‰©ä½“çš„åšåº¦ä¸å¾®æ³¢ä¼ è¾“è¿‡<br>ç¨‹ä¸­çš„è¡Œç¨‹é•¿åº¦æœ‰å¯†åˆ‡å…³ç³»ï¼Œå½“è¢«æµ‹ç‰©ä½“åšåº¦å¢åŠ æ—¶ï¼Œå¾®æ³¢ä¼ è¾“çš„è¡Œç¨‹<br>é•¿åº¦ä¾¿å‡å°ã€‚ </p>
<img src="/Circuit-Lover/%E5%BE%AE%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8/%E5%BE%AE%E6%B3%A2%E6%B5%8B%E5%8E%9A%E4%BB%AA.jpg" class title="å¾®æ³¢æµ‹åšä»ª">


<p><strong>å¾®æ³¢è¾å°„è®¡ï¼ˆæ¸©åº¦ä¼ æ„Ÿå™¨ï¼‰</strong>(*)</p>
<p><strong>å¾®æ³¢æµ‹å®šç§»åŠ¨ç‰©ä½“çš„é€Ÿåº¦å’Œè·ç¦»</strong>(*)</p>
<p><strong>å¾®æ³¢æ— æŸæ£€æµ‹</strong>(*)</p>
]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>Socketç¼–ç¨‹äº†è§£</title>
    <url>/Linux-Lover/Socket%E7%BC%96%E7%A8%8B%E4%BA%86%E8%A7%A3/</url>
    <content><![CDATA[<h5 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h5><p>1)socketå¯ä»¥çœ‹æˆæ˜¯ç”¨æˆ·è¿›ç¨‹ä¸å†…æ ¸ç½‘ç»œåè®®æ ˆçš„ç¼–ç¨‹æ¥å£ã€‚<br>1)socketä¸ä»…å¯ä»¥ç”¨äºæœ¬æœºçš„è¿›ç¨‹é—´é€šä¿¡ï¼Œè¿˜å¯ä»¥ç”¨äºç½‘ç»œä¸Šä¸åŒä¸»æœºçš„è¿›ç¨‹é—´é€šä¿¡ã€‚</p>
<img src="/Linux-Lover/Socket%E7%BC%96%E7%A8%8B%E4%BA%86%E8%A7%A3/1.jpg" class>

<h5 id="å¤§ç«¯ã€å°ç«¯"><a href="#å¤§ç«¯ã€å°ç«¯" class="headerlink" title="å¤§ç«¯ã€å°ç«¯"></a>å¤§ç«¯ã€å°ç«¯</h5><p>0x 12 34 56 78<br>ä½å­—èŠ‚78æ”¾é«˜ä½åœ°å€ï¼Œå¤§ç«¯ï¼›é«˜å­—èŠ‚12æ”¾ä½ä½ä½åœ°å€<br>ä½å­—èŠ‚78æ”¾ä½ä½åœ°å€ï¼Œå°ç«¯ï¼›é«˜å­—èŠ‚12æ”¾é«˜ä½åœ°å€</p>
<p>å¤§ç«¯ï¼š0x12345678<br>å°ç«¯ï¼š0x87654321<br>#include <iostream><br>using namespace std;<br>int main ()<br>{<br>int i =0x12345678 ;<br>if (<em>(char</em>)&amp;i == 0x12) //åœ°å€è½¬åŒ–å†è®¿é—®<br>{<br>cout &lt;&lt; â€œå¤§ç«¯â€ &lt;&lt;endl;<br>}<br>else<br>{<br>cout &lt;&lt; â€œå°ç«¯â€ &lt;&lt;endl;<br>}<br>}</iostream></p>
<h5 id="Socket-APIåŸºæœ¬ç”¨æ³•"><a href="#Socket-APIåŸºæœ¬ç”¨æ³•" class="headerlink" title="Socket APIåŸºæœ¬ç”¨æ³•"></a>Socket APIåŸºæœ¬ç”¨æ³•</h5><p>#include &lt;sys/socket.h&gt;</p>
<p><strong>socketå‡½æ•°</strong></p>
<p>int socket(int domain, int type, int protocol);<br>åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ç”¨äºé€šä¿¡</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è§£é‡Š</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody><tr>
<td>domain</td>
<td>æŒ‡å®šé€šä¿¡åè®®æ—ï¼ˆprotocol familyï¼‰</td>
<td>AF_INET</td>
</tr>
<tr>
<td>type</td>
<td>æŒ‡å®šsocketç±»å‹</td>
<td>æµå¼å¥—æ¥å­—SOCK_STREAMï¼Œæ•°æ®æŠ¥å¥—æ¥å­—SOCK_DGRAMï¼ŒåŸå§‹å¥—æ¥å­—SOCK_RAW</td>
</tr>
<tr>
<td>protocol</td>
<td>åè®®ç±»å‹</td>
<td>0</td>
</tr>
</tbody></table>
<p><strong>bindå‡½æ•°</strong></p>
<p>int bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen);<br>ç»‘å®šä¸€ä¸ªæœ¬åœ°åœ°å€åˆ°å¥—æ¥å­—</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>sockfd</td>
<td>socketå‡½æ•°è¿”å›çš„å¥—æ¥å­—</td>
</tr>
<tr>
<td>addr</td>
<td>è¦ç»‘å®šçš„åœ°å€</td>
</tr>
<tr>
<td>len</td>
<td>åœ°å€é•¿åº¦</td>
</tr>
</tbody></table>
<p><strong>listenå‡½æ•°</strong></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œlistenå‡½æ•°åº”è¯¥åœ¨è°ƒç”¨socketå’Œbindå‡½æ•°ä¹‹åï¼Œè°ƒç”¨å‡½æ•°acceptä¹‹å‰è°ƒç”¨ã€‚<br>int listen(int sockfd, int backlog);<br>å‚æ•°sockfd æ˜¯socket()å‡½æ•°è¿”å›çš„å¥—æ¥å­—æè¿°ç¬¦ï¼›<br>å‚æ•°backlogæŒ‡å®šåœ¨è¯·æ±‚é˜Ÿåˆ—ä¸­å…è®¸çš„æœ€å¤§è¯·æ±‚æ•°ï¼Œ</p>
<p>å¯¹äºç»™å®šçš„ç›‘å¬å¥—æ¥å£ï¼Œå†…æ ¸è¦ç»´æŠ¤ä¸¤ä¸ªé˜Ÿåˆ—ï¼š<br>1ã€å·²ç”±å®¢æˆ·å‘å‡ºå¹¶åˆ°è¾¾æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ­£åœ¨ç­‰å¾…å®Œæˆç›¸åº”çš„TCPä¸‰è·¯æ¡æ‰‹è¿‡ç¨‹<br>2ã€å·²å®Œæˆè¿æ¥çš„é˜Ÿåˆ—</p>
<p><strong>acceptå‡½æ•°</strong></p>
<p>int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);<br>ä»å·²å®Œæˆè¿æ¥é˜Ÿåˆ—è¿”å›ç¬¬ä¸€ä¸ªè¿æ¥ï¼Œå¦‚æœå·²å®Œæˆè¿æ¥é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™é˜»å¡ã€‚</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>sockfd</td>
<td>socketå‡½æ•°è¿”å›çš„å¥—æ¥å­—</td>
</tr>
<tr>
<td>addr</td>
<td>å°†è¿”å›å¯¹ç­‰æ–¹çš„å¥—æ¥å­—åœ°å€</td>
</tr>
<tr>
<td>addrlen</td>
<td>è¿”å›å¯¹ç­‰æ–¹çš„å¥—æ¥å­—åœ°å€é•¿åº¦</td>
</tr>
</tbody></table>
<p><strong>connectå‡½æ•°</strong></p>
<p>int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen);<br>å»ºç«‹ä¸€ä¸ªè¿æ¥è‡³addræ‰€æŒ‡å®šçš„å¥—æ¥å­—</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>sockfd</td>
<td>æœªè¿æ¥å¥—æ¥å­—</td>
</tr>
<tr>
<td>addr</td>
<td>è¦è¿æ¥çš„å¥—æ¥å­—åœ°å€</td>
</tr>
<tr>
<td>addrlen</td>
<td>åœ°å€é•¿åº¦</td>
</tr>
</tbody></table>
<h5 id="Socket-APIåœ°å€å¤ç”¨"><a href="#Socket-APIåœ°å€å¤ç”¨" class="headerlink" title="Socket APIåœ°å€å¤ç”¨"></a>Socket APIåœ°å€å¤ç”¨</h5><p>SO_REUSEADDRï¼šæœåŠ¡å™¨ç«¯å°½å¯èƒ½ä½¿ç”¨SO_REUSEADDRï¼Œåœ¨ç»‘å®šä¹‹å‰å°½å¯èƒ½è°ƒç”¨setsockoptæ¥è®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹ã€‚</p>
<p>ä½œç”¨ï¼šä½¿ç”¨SO_REUSEADDRé€‰é¡¹å¯ä»¥ä½¿å¾—ä¸å¿…ç­‰å¾…TIME_WAITçŠ¶æ€æ¶ˆå¤±å°±å¯ä»¥é‡å¯æœåŠ¡å™¨</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int optval = 1;</span><br><span class="line">	<span class="keyword">if</span> (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;optval, sizeof(optval)) &lt; 0)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(<span class="string">"setsockopt bind\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(0);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Socketå¤šå®¢æˆ·ç«¯è¿æ¥"><a href="#Socketå¤šå®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="Socketå¤šå®¢æˆ·ç«¯è¿æ¥"></a>Socketå¤šå®¢æˆ·ç«¯è¿æ¥</h5>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¿¡å·</title>
    <url>/Linux-Lover/%E4%BF%A1%E5%8F%B7/</url>
    <content><![CDATA[<h5 id="ä¸­æ–­æ¦‚å¿µ"><a href="#ä¸­æ–­æ¦‚å¿µ" class="headerlink" title="ä¸­æ–­æ¦‚å¿µ"></a>ä¸­æ–­æ¦‚å¿µ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¸­æ–­åˆ†ç±»</span><br><span class="line">	ç¡¬ä»¶ä¸­æ–­ï¼ˆå¤–éƒ¨ä¸­æ–­ï¼‰</span><br><span class="line">	å¤–éƒ¨ä¸­æ–­æ˜¯æŒ‡ç”±å¤–éƒ¨è®¾å¤‡é€šè¿‡ç¡¬ä»¶è¯·æ±‚çš„æ–¹å¼äº§ç”Ÿçš„ä¸­æ–­ï¼Œä¹Ÿç§°ä¸ºç¡¬ä»¶ä¸­æ–­</span><br><span class="line">	è½¯ä»¶ä¸­æ–­ï¼ˆå†…éƒ¨ä¸­æ–­ï¼‰</span><br><span class="line">	å†…éƒ¨ä¸­æ–­æ˜¯ç”±CPUè¿è¡Œç¨‹åºé”™è¯¯æˆ–æ‰§è¡Œå†…éƒ¨ç¨‹åºè°ƒç”¨å¼•èµ·çš„ä¸€ç§ä¸­æ–­ï¼Œä¹Ÿç§°ä¸ºè½¯ä»¶ä¸­æ–­ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="ä¿¡å·æ¦‚å¿µ"><a href="#ä¿¡å·æ¦‚å¿µ" class="headerlink" title="ä¿¡å·æ¦‚å¿µ"></a>ä¿¡å·æ¦‚å¿µ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¿¡å·æ˜¯UNIXç³»ç»Ÿå“åº”æŸäº›çŠ¶å†µè€Œäº§ç”Ÿçš„äº‹ä»¶ï¼Œè¿›ç¨‹åœ¨æ¥æ”¶åˆ°ä¿¡å·æ—¶ä¼šé‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚</span><br><span class="line">ä¿¡å·æ˜¯å› ä¸ºæŸäº›é”™è¯¯æ¡ä»¶è€Œäº§ç”Ÿçš„ï¼Œæ¯”å¦‚å†…å­˜æ®µå†²çªã€æµ®ç‚¹å¤„ç†å™¨é”™è¯¯æˆ–è€…éæ³•æŒ‡ä»¤ç­‰</span><br><span class="line">ä¿¡å·æ˜¯åœ¨è½¯ä»¶å±‚æ¬¡ä¸Šå¯¹ä¸­æ–­çš„ä¸€ç§æ¨¡æ‹Ÿï¼Œæ‰€ä»¥é€šå¸¸æŠŠå®ƒç§°ä¸ºæ˜¯è½¯ä¸­æ–­</span><br></pre></td></tr></table></figure>
<h5 id="ä¿¡å·å’Œä¸­æ–­çš„åŒºåˆ«"><a href="#ä¿¡å·å’Œä¸­æ–­çš„åŒºåˆ«" class="headerlink" title="ä¿¡å·å’Œä¸­æ–­çš„åŒºåˆ«"></a>ä¿¡å·å’Œä¸­æ–­çš„åŒºåˆ«</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¿¡å·ä¸ä¸­æ–­çš„ç›¸ä¼¼ç‚¹ï¼š</span><br><span class="line">ï¼ˆ1ï¼‰é‡‡ç”¨äº†ç›¸åŒçš„å¼‚æ­¥é€šä¿¡æ–¹å¼ï¼›</span><br><span class="line">ï¼ˆ2ï¼‰å½“æ£€æµ‹å‡ºæœ‰ä¿¡å·æˆ–ä¸­æ–­è¯·æ±‚æ—¶ï¼Œéƒ½æš‚åœæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºè€Œè½¬å»æ‰§è¡Œç›¸åº”çš„å¤„ç†ç¨‹åºï¼›</span><br><span class="line">ï¼ˆ3ï¼‰éƒ½åœ¨å¤„ç†å®Œæ¯•åè¿”å›åˆ°åŸæ¥çš„æ–­ç‚¹ï¼›</span><br><span class="line">ï¼ˆ4ï¼‰å¯¹ä¿¡å·æˆ–ä¸­æ–­éƒ½å¯è¿›è¡Œå±è”½ã€‚</span><br><span class="line">ä¿¡å·ä¸ä¸­æ–­çš„åŒºåˆ«ï¼š</span><br><span class="line">ï¼ˆ1ï¼‰ä¸­æ–­æœ‰ä¼˜å…ˆçº§ï¼Œè€Œä¿¡å·æ²¡æœ‰ä¼˜å…ˆçº§ï¼Œæ‰€æœ‰çš„ä¿¡å·éƒ½æ˜¯å¹³ç­‰çš„ï¼›</span><br><span class="line">ï¼ˆ2ï¼‰ä¿¡å·å¤„ç†ç¨‹åºæ˜¯åœ¨ç”¨æˆ·æ€ä¸‹è¿è¡Œçš„ï¼Œè€Œä¸­æ–­å¤„ç†ç¨‹åºæ˜¯åœ¨æ ¸å¿ƒæ€ä¸‹è¿è¡Œï¼›</span><br><span class="line">ï¼ˆ3ï¼‰ä¸­æ–­å“åº”æ˜¯åŠæ—¶çš„ï¼Œè€Œä¿¡å·å“åº”é€šå¸¸éƒ½æœ‰è¾ƒå¤§çš„æ—¶é—´å»¶è¿Ÿã€‚</span><br></pre></td></tr></table></figure>
<h5 id="å¸¸è§ä¿¡å·"><a href="#å¸¸è§ä¿¡å·" class="headerlink" title="å¸¸è§ä¿¡å·"></a>å¸¸è§ä¿¡å·</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SIGABRT	è¿›ç¨‹åœæ­¢è¿è¡Œ 6</span><br><span class="line">SIGHUP	ç³»ç»ŸæŒ‚æ–­</span><br><span class="line">SIGINT	ç»ˆç«¯ä¸­æ–­  2</span><br><span class="line">SIGPIPE	å‘æ²¡æœ‰è¯»è€…çš„ç®¡é“å†™å…¥æ•°æ®</span><br><span class="line">SIGQUIT	ç»ˆç«¯é€€å‡º   3</span><br><span class="line">SIGTERM	ç»ˆæ­¢ </span><br><span class="line">SIGUSR1	ç”¨æˆ·å®šä¹‰ä¿¡å·1</span><br><span class="line">SIGUSR2	ç”¨æˆ·å®šä¹‰ä¿¡å·2</span><br><span class="line">SIGCHLD	å­è¿›ç¨‹å·²ç»åœæ­¢æˆ–é€€å‡º Â </span><br><span class="line">â€¦â€¦</span><br></pre></td></tr></table></figure>

<h4 id="ä¿¡å·å¤„ç†æ–¹å¼"><a href="#ä¿¡å·å¤„ç†æ–¹å¼" class="headerlink" title="ä¿¡å·å¤„ç†æ–¹å¼"></a>ä¿¡å·å¤„ç†æ–¹å¼</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1)å¿½ç•¥ä¿¡å·  </span><br><span class="line">	ä¸é‡‡å–ä»»ä½•æ“ä½œã€æœ‰ä¸¤ä¸ªä¿¡å·ä¸èƒ½è¢«å¿½ç•¥ï¼šSIGKILLï¼ˆ9å·ä¿¡å·ï¼‰å’ŒSIGSTOPã€‚å¦‚æœåº”ç”¨ç¨‹åºå¯ä»¥å¿½ç•¥è¿™2ä¸ªä¿¡å·ï¼Œç³»ç»Ÿç®¡ç†æ— æ³•æ€æ­»ã€æš‚åœè¿›ç¨‹ï¼Œæ— æ³•å¯¹ç³»ç»Ÿè¿›è¡Œç®¡ç†ã€‚ï¼‰ã€‚SIGKILLï¼ˆ9å·ä¿¡å·ï¼‰å’ŒSIGSTOPä¿¡å·æ˜¯ä¸èƒ½è¢«æ•è·çš„ã€‚</span><br><span class="line">2)æ•è·å¹¶å¤„ç†ä¿¡å·   </span><br><span class="line">	å†…æ ¸ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ä»£ç ï¼Œè½¬å»æ‰§è¡Œå…ˆå‰æ³¨å†Œè¿‡çš„å¤„ç†ç¨‹åºã€‚</span><br><span class="line">3)æ‰§è¡Œé»˜è®¤æ“ä½œ   </span><br><span class="line">	é»˜è®¤æ“ä½œé€šå¸¸æ˜¯ç»ˆæ­¢è¿›ç¨‹ï¼Œè¿™å–å†³äºè¢«å‘é€çš„ä¿¡å·ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="äº†è§£å¸¸è§ä¿¡å·signalå‡½æ•°"><a href="#äº†è§£å¸¸è§ä¿¡å·signalå‡½æ•°" class="headerlink" title="äº†è§£å¸¸è§ä¿¡å·signalå‡½æ•°"></a>äº†è§£å¸¸è§ä¿¡å·signalå‡½æ•°</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SIG_IGN	å±è”½è¯¥ä¿¡å·</span><br><span class="line"> signal(2,SIG_IGN);</span><br><span class="line"> //ctrl+c è¢«å±è”½</span><br><span class="line">SIG_DFL	æ¢å¤é»˜è®¤è¡Œä¸º</span><br><span class="line"> signal(2,SIG_DFL);</span><br></pre></td></tr></table></figure>
<h5 id="ä¿¡å·å‘é€å‡½æ•°"><a href="#ä¿¡å·å‘é€å‡½æ•°" class="headerlink" title="ä¿¡å·å‘é€å‡½æ•°"></a>ä¿¡å·å‘é€å‡½æ•°</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰int <span class="built_in">kill</span>(pid_t pid, int siq)</span><br><span class="line">	pid&gt;0 å°†ä¿¡å·sigå‘ç»™pidè¿›ç¨‹</span><br><span class="line">	pid=0 å°†ä¿¡å·sigå‘ç»™åŒç»„è¿›ç¨‹</span><br><span class="line">	pid=-1 å°†ä¿¡å·sigå‘é€ç»™æ‰€æœ‰è¿›ç¨‹ï¼Œè°ƒç”¨è€…è¿›ç¨‹æœ‰æƒé™å‘é€çš„æ¯ä¸€ä¸ªè¿›ç¨‹ï¼ˆé™¤äº†1å·ã€è‡ªèº«ï¼‰</span><br><span class="line">	pid&lt;-1 å°†ä¿¡å·sigå‘é€ç»™è¿›ç¨‹ç»„æ˜¯pidï¼ˆç»å¯¹å€¼ï¼‰çš„æ¯ä¸€ä¸ªè¿›ç¨‹</span><br><span class="line"> Â  Â </span><br><span class="line">ï¼ˆ2ï¼‰raise(sig)ç­‰ä»·äº<span class="built_in">kill</span>(getpid(), sig);</span><br><span class="line"></span><br><span class="line">ï¼ˆ3ï¼‰killpg(pgrp, sig)ç­‰ä»·äº<span class="built_in">kill</span>(-pgrp, sig);</span><br><span class="line"></span><br><span class="line">ï¼ˆ4ï¼‰pause()å‡½æ•°å°†è¿›ç¨‹ç½®ä¸ºå¯ä¸­æ–­ç¡çœ çŠ¶æ€ã€‚ç„¶åå®ƒè°ƒç”¨å†…æ ¸å‡½æ•°schedule()ï¼Œä½¿linuxè¿›ç¨‹è°ƒåº¦å™¨æ‰¾åˆ°å¦ä¸€ä¸ªè¿›ç¨‹æ¥è¿è¡Œã€‚è°ƒç”¨è€…è¿›ç¨‹æŒ‚èµ·ï¼Œç›´åˆ°ä¸€ä¸ªä¿¡å·è¢«æ•è·</span><br><span class="line"></span><br><span class="line">ï¼ˆ5ï¼‰alarmå‡½æ•°ï¼Œè®¾ç½®ä¸€ä¸ªé—¹é’Ÿå»¶è¿Ÿå‘é€ä¿¡å·å‘Šè¯‰linuxå†…æ ¸nç§’ä¸­ä»¥åï¼Œå‘é€SIGALRMä¿¡å·//alarm(1)</span><br><span class="line"></span><br><span class="line">æ­é…ä½¿ç”¨ï¼š	</span><br><span class="line">void  myhandle(int num)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"recv signal id num : %d \n"</span>, num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (signal(SIGALRM, myhandle) == SIG_ERR)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(<span class="string">"func signal err\n"</span>);</span><br><span class="line">		<span class="built_in">return</span> 0;</span><br><span class="line">	&#125; </span><br><span class="line"></span><br><span class="line">alarm(1);//è°ƒç”¨myhandle</span><br></pre></td></tr></table></figure>
<h5 id="å¯ç¡çœ ä¸­æ–­ä¸ä¸å¯ç¡çœ ä¸­æ–­"><a href="#å¯ç¡çœ ä¸­æ–­ä¸ä¸å¯ç¡çœ ä¸­æ–­" class="headerlink" title="å¯ç¡çœ ä¸­æ–­ä¸ä¸å¯ç¡çœ ä¸­æ–­"></a>å¯ç¡çœ ä¸­æ–­ä¸ä¸å¯ç¡çœ ä¸­æ–­</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sleep(100);//å¯ä»¥ä¸­æ–­ç¡çœ ï¼Œå†…æ ¸è®©è¿›ç¨‹ç¡çœ ï¼Œå¯ä»¥è¢«åˆ«çš„ä¿¡å·å”¤é†’ï¼Œç»§ç»­å¾€ä¸‹è¿è¡Œã€‚</span><br><span class="line">è¦ä¸å¯ä¸­æ–­ç¡çœ ï¼Œé†’æ¥ç»§ç»­è¿è¡Œsleepã€‚æ ¹æ®sleepä¼šè¿”å›å‰©ä½™ç§’æ•°ã€‚</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">&#123;</span><br><span class="line">  n = sleep (100);</span><br><span class="line">&#125;<span class="keyword">while</span>(n &gt; 0)ï¼›</span><br><span class="line">é†’æ¥ç»§ç»­ç¡ã€‚ã€‚ã€‚</span><br><span class="line">pause();//å¯ä¸­æ–­ç¡çœ </span><br></pre></td></tr></table></figure>
<h5 id="ä¸å¯é‡å…¥ä¸å¯é‡å…¥å‡½æ•°"><a href="#ä¸å¯é‡å…¥ä¸å¯é‡å…¥å‡½æ•°" class="headerlink" title="ä¸å¯é‡å…¥ä¸å¯é‡å…¥å‡½æ•°"></a>ä¸å¯é‡å…¥ä¸å¯é‡å…¥å‡½æ•°</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¸å¯é‡å…¥å‡½æ•°æ¯æ¬¡å¯èƒ½è°ƒç”¨æ•ˆæœä¸ä¸€æ ·ã€‚</span><br><span class="line">å…¨å±€å˜é‡ã€mallcoå‡½æ•°è°ƒç”¨ï¼ˆé‡æ–°è¦†ç›–å¾ˆææ€–ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">æ‰€è°“å¯é‡å…¥å‡½æ•°æ˜¯æŒ‡ä¸€ä¸ªå¯ä»¥è¢«å¤šä¸ªä»»åŠ¡è°ƒç”¨çš„è¿‡ç¨‹ï¼Œä»»åŠ¡åœ¨è°ƒç”¨æ—¶ä¸å¿…æ‹…å¿ƒæ•°æ®æ˜¯å¦ä¼šå‡ºé”™ã€‚</span><br><span class="line"></span><br><span class="line">å¯ç¤ºï¼šå°½é‡ä¸ä½¿ç”¨å…¨å±€å˜é‡å’Œé™æ€å˜é‡çš„å‡½æ•°ã€‚ç‰¹åˆ«æ˜¯è¿™ä¸ªå˜é‡åœ¨ç¨‹åºä¸­éšæ—¶è¯»å†™ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="ä¿¡å·é˜»å¡ã€æœªå†³ã€å¿½ç•¥"><a href="#ä¿¡å·é˜»å¡ã€æœªå†³ã€å¿½ç•¥" class="headerlink" title="ä¿¡å·é˜»å¡ã€æœªå†³ã€å¿½ç•¥"></a>ä¿¡å·é˜»å¡ã€æœªå†³ã€å¿½ç•¥</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¿¡å·å±è”½çŠ¶æ€å­—ï¼ˆblockï¼‰ã€ä¿¡å·æœªå†³çŠ¶æ€å­—ï¼ˆpendingï¼‰ã€å¿½ç•¥æ ‡å¿—ã€‚</span><br><span class="line">æ³¨ï¼šé˜»å¡å’Œå¿½ç•¥æ˜¯ä¸åŒï¼Œåªè¦ä¿¡å·è¢«é˜»å¡å°±ä¸ä¼šé€’è¾¾ï¼Œè€Œå¿½ç•¥æ˜¯åœ¨é€’è¾¾ä¹‹åå¯é€‰çš„ä¸€ç§å¤„ç†åŠ¨ä½œã€‚</span><br><span class="line"></span><br><span class="line">è¿‡ç¨‹ï¼š</span><br><span class="line">å‘è¿›ç¨‹å‘é€SIGINTï¼Œå†…æ ¸é¦–å…ˆåˆ¤æ–­ä¿¡å·å±è”½çŠ¶æ€å­—æ˜¯å¦é˜»å¡ï¼Œä¿¡å·æœªå†³çŠ¶æ€å­—ï¼ˆpendingç›¸åº”ä½åˆ¶æˆ1ï¼›è‹¥é˜»å¡è§£é™¤ï¼Œä¿¡å·æœªå†³çŠ¶æ€å­—ï¼ˆpendingï¼‰ç›¸åº”ä½åˆ¶æˆ0ï¼›è¡¨ç¤ºä¿¡å·å¯ä»¥æŠµè¾¾äº†ã€‚</span><br><span class="line">blockçŠ¶æ€å­—ã€pendingçŠ¶æ€å­— 64bitï¼›</span><br><span class="line">blockçŠ¶æ€å­—ç”¨æˆ·å¯ä»¥è¯»å†™ï¼ŒpendingçŠ¶æ€å­—ç”¨æˆ·åªèƒ½è¯»ï¼›è¿™æ˜¯ä¿¡å·è®¾è®¡æœºåˆ¶ã€‚</span><br></pre></td></tr></table></figure>
<img src="/Linux-Lover/%E4%BF%A1%E5%8F%B7/1.jpg" class title="æ¥æºï¼šlinuxç¼–ç¨‹ç‹ä¿æ˜">


<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sigset_t pset; //ç”¨æ¥æ‰“å°çš„ä¿¡å·é›†</span><br><span class="line">sigset_t bset; //ç”¨æ¥è®¾ç½®é˜»å¡çš„ä¿¡å·é›†</span><br><span class="line"></span><br><span class="line">sigemptyset(&amp;bset);</span><br><span class="line">sigaddset(&amp;bset, SIGINT);</span><br><span class="line"></span><br><span class="line">sigprocmask()è¯»å–æˆ–æ›´æ”¹è¿›ç¨‹çš„ä¿¡å·å±è”½çŠ¶æ€ï¼ˆblockï¼‰ </span><br><span class="line">eg:</span><br><span class="line">sigprocmask(SIG_UNBLOCK,&amp;bsetbset,NUU);//é˜»å¡</span><br><span class="line">sigprocmask(SIG_BLOCK,&amp;bset,NULL);//è§£é™¤é˜»å¡</span><br><span class="line">sigpending(&amp;pset);//è·å–æœªå†³å­—ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<h5 id="å¯é ä¿¡å·ã€ä¸å¯é ä¿¡å·"><a href="#å¯é ä¿¡å·ã€ä¸å¯é ä¿¡å·" class="headerlink" title="å¯é ä¿¡å·ã€ä¸å¯é ä¿¡å·"></a>å¯é ä¿¡å·ã€ä¸å¯é ä¿¡å·</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¸å¯é ä¿¡å·</span><br><span class="line">unixç³»ç»Ÿï¼Œè¿›ç¨‹æ¯æ¬¡å¤„ç†ä¿¡å·åï¼Œå°±å°†å¯¹ä¿¡å·çš„å“åº”è®¾ç½®ä¸ºé»˜è®¤åŠ¨ä½œã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå°†å¯¼è‡´å¯¹ä¿¡å·çš„é”™è¯¯å¤„ç†</span><br><span class="line">å¯é ä¿¡å·</span><br><span class="line">linuxä¼˜åŒ–ï¼Œä¿¡å·çš„å‘é€å’Œå®‰è£…ä¹Ÿå‡ºç°äº†æ–°ç‰ˆæœ¬ï¼šä¿¡å·å‘é€å‡½æ•°sigqueue()åŠä¿¡å·å®‰è£…å‡½æ•°sigaction()</span><br><span class="line">æ‰©å±•ï¼š</span><br><span class="line">éå®æ—¶ä¿¡å·éƒ½ä¸æ”¯æŒæ’é˜Ÿï¼Œéƒ½æ˜¯ä¸å¯é ä¿¡å·</span><br><span class="line">å®æ—¶ä¿¡å·éƒ½æ”¯æŒæ’é˜Ÿï¼Œéƒ½æ˜¯å¯é ä¿¡å·</span><br></pre></td></tr></table></figure>
<h5 id="ä¿¡å·çš„é«˜çº§ç”¨æ³•"><a href="#ä¿¡å·çš„é«˜çº§ç”¨æ³•" class="headerlink" title="ä¿¡å·çš„é«˜çº§ç”¨æ³•"></a>ä¿¡å·çš„é«˜çº§ç”¨æ³•</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sigactionå‡½æ•°æ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°</span><br><span class="line"></span><br><span class="line">sigqueueæ–°çš„ä¿¡å·å‘é€å‡½æ•°</span><br><span class="line">åŸå‹:int sigqueue(pid_t pid, int sig, const union sigval value);</span><br><span class="line"></span><br><span class="line">å’Œ<span class="built_in">kill</span>å‡½æ•°ç›¸æ¯”Int <span class="built_in">kill</span>(pid_t pid, int siq)å¤šäº†å‚æ•°</span><br><span class="line">ä½†sigqueue()åªèƒ½å‘ä¸€ä¸ªè¿›ç¨‹å‘é€ä¿¡å·ï¼Œè€Œä¸èƒ½å‘é€ä¿¡å·ç»™ä¸€ä¸ªè¿›ç¨‹ç»„ã€‚</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>äº†è§£å®ˆæŠ¤è¿›ç¨‹</title>
    <url>/Linux-Lover/%E8%A7%A3%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/</url>
    <content><![CDATA[<h5 id="å®ˆæŠ¤è¿›ç¨‹"><a href="#å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="å®ˆæŠ¤è¿›ç¨‹"></a>å®ˆæŠ¤è¿›ç¨‹</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å®ˆæŠ¤è¿›ç¨‹æ˜¯åœ¨åå°è¿è¡Œä¸å—æ§ç«¯æ§åˆ¶çš„è¿›ç¨‹ï¼Œé€šå¸¸æƒ…å†µä¸‹å®ˆæŠ¤è¿›ç¨‹åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œã€‚</span><br><span class="line">å®ˆæŠ¤è¿›ç¨‹çš„åç§°é€šå¸¸ä»¥dç»“å°¾ï¼Œæ¯”å¦‚sshdã€xinetdã€crondç­‰</span><br></pre></td></tr></table></figure>
<h5 id="äº†è§£ä¼šè¯æœŸ"><a href="#äº†è§£ä¼šè¯æœŸ" class="headerlink" title="äº†è§£ä¼šè¯æœŸ"></a>äº†è§£ä¼šè¯æœŸ</h5> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">telnet è¿œç¨‹ç™»å½•æœåŠ¡å™¨ï¼Œç™»å½•æˆåŠŸä¹‹åï¼ŒlinuxæœåŠ¡å™¨å’Œç»ˆç«¯ä¹‹é—´å»ºç«‹ä¸€ä¸ªä¼šè¯æœŸï¼Œä¼šè¯æœŸé»˜è®¤å¯åŠ¨shellç¨‹åºã€‚</span><br><span class="line">æ³¨ï¼š</span><br><span class="line">shellæ˜¯è¿›ç¨‹ç»„ï¼Œ ps -ef | grep xx ä¹Ÿæ˜¯è¿›ç¨‹ç»„ã€‚ã€‚ã€‚éƒ½åœ¨ç»ˆç«¯ä¸­ï¼Œå¦‚æœæƒ³è„±ç¦»ç»ˆç«¯ï¼Œå¿…é¡»å»ºç«‹å­è¿›ç¨‹ä»£æ›¿çˆ¶è¿›ç¨‹ï¼Œè¯¥å­è¿›ç¨‹ä¸ºæœªæ¥å®ˆæŠ¤è¿›ç¨‹ï¼Œè°ƒç”¨setsidåˆ›å»ºæ–°çš„ä¼šè¯æœŸã€‚</span><br></pre></td></tr></table></figure>
<h5 id="æ‰‹åŠ¨åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹æ­¥éª¤"><a href="#æ‰‹åŠ¨åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹æ­¥éª¤" class="headerlink" title="æ‰‹åŠ¨åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹æ­¥éª¤"></a>æ‰‹åŠ¨åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹æ­¥éª¤</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1)è°ƒç”¨fork(),åˆ›å»ºæ–°è¿›ç¨‹ï¼Œå®ƒä¼šæ˜¯å°†æ¥çš„å®ˆæŠ¤è¿›ç¨‹</span><br><span class="line">2)åœ¨çˆ¶è¿›ç¨‹ä¸­è°ƒç”¨<span class="built_in">exit</span>ï¼Œä¿è¯å­è¿›ç¨‹ä¸æ˜¯è¿›ç¨‹ç»„ç»„é•¿</span><br><span class="line">3)è°ƒç”¨setsidåˆ›å»ºæ–°çš„ä¼šè¯æœŸ</span><br><span class="line">4)å°†å½“å‰ç›®å½•æ”¹ä¸ºæ ¹ç›®å½• ï¼ˆå¦‚æœæŠŠå½“å‰ç›®å½•ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹çš„ç›®å½•ï¼Œå½“å‰ç›®å½•ä¸èƒ½è¢«å¸è½½ï¼Œå®ƒä½œä¸ºå®ˆæŠ¤è¿›ç¨‹çš„å·¥ä½œç›®å½•äº†ã€‚</span><br><span class="line">5ï¼‰å°†æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°/dev/null</span><br></pre></td></tr></table></figure>
<h5 id="è°ƒç”¨apiåˆ›å»ºå®ˆæŠ¤è¿›ç¨‹"><a href="#è°ƒç”¨apiåˆ›å»ºå®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="è°ƒç”¨apiåˆ›å»ºå®ˆæŠ¤è¿›ç¨‹"></a>è°ƒç”¨apiåˆ›å»ºå®ˆæŠ¤è¿›ç¨‹</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int daemon(int nochdir, int noclose);</span><br><span class="line">nochdirï¼š=0å°†å½“å‰ç›®å½•æ›´æ”¹è‡³â€œ/â€</span><br><span class="line">nocloseï¼š=0å°†æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯é‡å®šå‘è‡³â€œ/dev/nullâ€</span><br><span class="line">ä¾‹å­:</span><br><span class="line"><span class="comment">#include &lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/stat.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/wait.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;fcntl.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;errno.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;string.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;signal.h&gt;</span></span><br><span class="line"></span><br><span class="line">int setup_daemon(int nochdir, int noclose);</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    mydaemon(1, 1);</span><br><span class="line">    //man daemon å¯ä»¥çœ‹åˆ°</span><br><span class="line">    //0è¡¨ç¤ºæ”¹å˜é‡å®šå‘   1è¡¨ç¤ºä¸æ”¹å˜</span><br><span class="line"> Â  Â //daemon(1, 1);  //è°ƒç”¨å‡½æ•°</span><br><span class="line"> Â  Â <span class="built_in">printf</span>(<span class="string">"test ...\n"</span>);</span><br><span class="line">    <span class="keyword">for</span> (;;) ;</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">int mydaemon(int nochdir, int noclose) //è‡ªå»ºå‡½æ•°</span><br><span class="line">&#123;</span><br><span class="line">    pid_t pid;</span><br><span class="line">    pid = fork();</span><br><span class="line">    <span class="keyword">if</span> (pid == -1)</span><br><span class="line">        ERR_EXIT(<span class="string">"fork error"</span>);</span><br><span class="line">    <span class="keyword">if</span> (pid &gt; 0)</span><br><span class="line">        <span class="built_in">exit</span>(EXIT_SUCCESS);</span><br><span class="line">    setsid();</span><br><span class="line">    <span class="keyword">if</span> (nochdir == 0)</span><br><span class="line"> Â  Â  Â  Â <span class="built_in">chdir</span>(<span class="string">"/"</span>);//ç³»ç»Ÿè°ƒç”¨å‡½æ•°æ”¹å˜å½“å‰è·¯å¾„ </span><br><span class="line">		<span class="keyword">if</span> (noclose == 0)</span><br><span class="line">    &#123;</span><br><span class="line">        int i;</span><br><span class="line">        <span class="keyword">for</span> (i=0; i&lt;3; ++i)</span><br><span class="line">            close(i);</span><br><span class="line">        open(<span class="string">"/dev/null"</span>, O_RDWR);  </span><br><span class="line">        dup(0); //æ ‡å‡†è¾“å‡º ä¹ŸæŒ‡å‘/dev/null  //    dup2(0, 1);</span><br><span class="line">        dup(0); //æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œä¹ŸæŒ‡å‘/dev/null //    dup2(0, 2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p>æ¥æºï¼šLinuxåº”ç”¨ç¼–ç¨‹ç‹ä¿æ˜</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿›ç¨‹æ¦‚å¿µ</title>
    <url>/Linux-Lover/%E7%A8%8B%E6%A6%82%E5%BF%B5/</url>
    <content><![CDATA[<h5 id="è¿›ç¨‹åŸºæœ¬æ¦‚å¿µ"><a href="#è¿›ç¨‹åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="è¿›ç¨‹åŸºæœ¬æ¦‚å¿µ"></a>è¿›ç¨‹åŸºæœ¬æ¦‚å¿µ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…çš„å†…å­˜ã€CPUæ—¶é—´ç‰‡ç­‰èµ„æºçš„åŸºæœ¬å•ä½,æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½(çº¿ç¨‹æ˜¯CPUæ‰§è¡Œå•ä½)ã€‚</span><br><span class="line">è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿå¯¹èµ„æºçš„ä¸€ç§æŠ½è±¡ï¼Œä¸€ä¸ªè¿›ç¨‹ç”±ä¸‰éƒ¨åˆ†ç»„æˆ:</span><br><span class="line">1ï¼‰è¿›ç¨‹æ§åˆ¶å—PCBï¼šç”¨äºæè¿°è¿›ç¨‹æƒ…å†µåŠæ§åˆ¶è¿›ç¨‹è¿è¡Œæ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯ã€‚</span><br><span class="line">2ï¼‰ä»£ç æ®µï¼šæ˜¯è¿›ç¨‹ä¸­èƒ½è¢«è¿›ç¨‹è°ƒåº¦ç¨‹åºåœ¨CPUä¸Šæ‰§è¡Œçš„ç¨‹åºä»£ç æ®µã€‚</span><br><span class="line">3ï¼‰æ•°æ®æ®µï¼šä¸€ä¸ªè¿›ç¨‹çš„æ•°æ®æ®µï¼Œå¯ä»¥æ˜¯è¿›ç¨‹å¯¹åº”çš„ç¨‹åºåŠ å·¥å¤„ç†çš„åŸå§‹æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¨‹åºæ‰§è¡Œåäº§ç”Ÿçš„ä¸­é—´æˆ–æœ€ç»ˆæ•°æ®</span><br><span class="line">åˆ†å¼æ“ä½œç³»ç»Ÿ </span><br><span class="line">åŸºäºæ—¶é—´ç‰‡è½®è½¬ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´å’Œæ‰§è¡ŒçŠ¶æ€ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="è¿›ç¨‹çŠ¶æ€"><a href="#è¿›ç¨‹çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çŠ¶æ€"></a>è¿›ç¨‹çŠ¶æ€</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ“ä½œç³»ç»Ÿç»å…¸ä¸‰æ€:å°±ç»ª	ç­‰å¾…ã€ï¼ˆé˜»å¡ï¼‰ã€è¿è¡Œç­‰</span><br><span class="line">è¿˜æœ‰å…¶ä»–æŒ‚èµ·ã€åƒµå°¸è¿›ç¨‹ç­‰ã€‚ã€‚ã€‚</span><br><span class="line">Linuxå†…æ ¸ä¸­çš„è¿›ç¨‹çŠ¶æ€ï¼š</span><br><span class="line">â–½	è¿è¡ŒçŠ¶æ€</span><br><span class="line">â–½	å¯ä¸­æ–­ç¡çœ çŠ¶æ€7</span><br><span class="line">â–½	ä¸å¯ä¸­æ–­ç¡çœ çŠ¶æ€</span><br><span class="line">â–½	æš‚åœçŠ¶æ€</span><br><span class="line">â–½	åƒµæ­»çŠ¶æ€</span><br></pre></td></tr></table></figure>
<h5 id="è¿›ç¨‹è°ƒåº¦åŠè°ƒåº¦ç®—æ³•"><a href="#è¿›ç¨‹è°ƒåº¦åŠè°ƒåº¦ç®—æ³•" class="headerlink" title="è¿›ç¨‹è°ƒåº¦åŠè°ƒåº¦ç®—æ³•"></a>è¿›ç¨‹è°ƒåº¦åŠè°ƒåº¦ç®—æ³•</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•</span><br><span class="line">çŸ­è¿›ç¨‹ä¼˜å…ˆè°ƒåº¦ç®—æ³•</span><br><span class="line">é«˜ä¼˜å…ˆçº§ä¼˜å…ˆè°ƒåº¦ç®—æ³•</span><br><span class="line">æ—¶é—´ç‰‡è½®è½¬æ³•ï¼ˆå…¬å¹³ï¼‰</span><br></pre></td></tr></table></figure>

<h5 id="è¿›ç¨‹æ§åˆ¶å—"><a href="#è¿›ç¨‹æ§åˆ¶å—" class="headerlink" title="è¿›ç¨‹æ§åˆ¶å—"></a>è¿›ç¨‹æ§åˆ¶å—</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï±è¿›ç¨‹æè¿°ä¿¡æ¯ï¼ˆè¿›ç¨‹æ ‡è¯†ç¬¦ï¼‰</span><br><span class="line">ï±è¿›ç¨‹æ§åˆ¶ä¿¡æ¯ï¼ˆè¿›ç¨‹å½“å‰çŠ¶æ€ç­‰ï¼‰</span><br><span class="line">ï±èµ„æºä¿¡æ¯ï¼ˆI/Oè®¾å¤‡å·ã€ç¼“å†²ã€å†…å­˜ç­‰ï¼‰</span><br><span class="line">ï±ç°åœºä¿æŠ¤ä¿¡æ¯ï¼ˆå¯„å­˜å™¨ã€PCã€PSWã€æ ˆæŒ‡é’ˆï¼‰</span><br></pre></td></tr></table></figure>
<h5 id="è¿›ç¨‹åˆ›å»º"><a href="#è¿›ç¨‹åˆ›å»º" class="headerlink" title="è¿›ç¨‹åˆ›å»º"></a>è¿›ç¨‹åˆ›å»º</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€åˆ†é…ä¸€ä¸ªå†…éƒ¨æ ‡è¯†ï¼Œåœ¨å†…æ ¸ä¸­å»ºç«‹è¿›ç¨‹ç»“æ„.</span><br><span class="line">å¤åˆ¶çˆ¶è¿›ç¨‹çš„ç¯å¢ƒã€‚</span><br><span class="line">2ã€ä¸ºè¿›ç¨‹åˆ†é…èµ„æºï¼ŒåŒ…æ‹¬æ‰€æœ‰å…ƒç´ ï¼ˆç¨‹åºã€æ•°æ®ã€ç”¨æˆ·æ ˆç­‰ï¼Œå¤åˆ¶çˆ¶è¿›ç¨‹åœ°å€ç©ºé—´çš„å†…å®¹åˆ°è¯¥è¿›ç¨‹åœ°å€ç©ºé—´ä¸­ã€‚</span><br><span class="line">3ã€ç½®è¯¥è¿›ç¨‹çš„çŠ¶æ€ä¸ºå°±ç»ªï¼Œæ’å…¥å°±ç»ªé˜Ÿåˆ—ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="è¿›ç¨‹æ’¤é”€"><a href="#è¿›ç¨‹æ’¤é”€" class="headerlink" title="è¿›ç¨‹æ’¤é”€"></a>è¿›ç¨‹æ’¤é”€</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å…³é—­è½¯ä¸­æ–­:å› ä¸ºè¿›ç¨‹å³å°†ç»ˆæ­¢è€Œä¸å†å¤„ç†ä»»ä½•è½¯ä¸­æ–­ä¿¡å·ï¼›</span><br><span class="line">å›æ”¶èµ„æºï¼šé‡Šæ”¾è¿›ç¨‹åˆ†é…çš„æ‰€æœ‰èµ„æºï¼Œå¦‚å…³é—­æ‰€æœ‰å·²æ‰“å¼€æ–‡ä»¶ï¼Œé‡Šæ”¾è¿›ç¨‹ç›¸åº”çš„æ•°æ®ç»“æ„ç­‰ï¼›</span><br><span class="line">å†™è®°å¸ä¿¡æ¯ï¼šå°†è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ‰€äº§ç”Ÿçš„è®°å¸æ•°æ®ï¼ˆå…¶ä¸­åŒ…æ‹¬è¿›ç¨‹è¿è¡Œæ—¶çš„å„ç§ç»Ÿè®¡ä¿¡æ¯ï¼‰è®°å½•åˆ°ä¸€ä¸ªå…¨å±€è®°å¸æ–‡ä»¶ä¸­ï¼›</span><br><span class="line">ç½®è¯¥è¿›ç¨‹ä¸ºåƒµæ­»çŠ¶æ€:å‘çˆ¶è¿›ç¨‹å‘é€å­è¿›ç¨‹æ­»çš„è½¯ä¸­æ–­ä¿¡å·ï¼Œå°†ç»ˆæ­¢ä¿¡æ¯statusé€åˆ°æŒ‡å®šçš„å­˜å‚¨å•å…ƒä¸­ï¼›</span><br><span class="line">è½¬è¿›ç¨‹è°ƒåº¦:å› ä¸ºæ­¤æ—¶CPUå·²ç»è¢«é‡Šæ”¾ï¼Œéœ€è¦ç”±è¿›ç¨‹è°ƒåº¦è¿›è¡ŒCPUå†åˆ†é…ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="é¿å…åƒµå°¸è¿›ç¨‹"><a href="#é¿å…åƒµå°¸è¿›ç¨‹" class="headerlink" title="é¿å…åƒµå°¸è¿›ç¨‹"></a>é¿å…åƒµå°¸è¿›ç¨‹</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">é¿å…åƒµå°¸è¿›ç¨‹</span><br><span class="line"><span class="comment">#include &lt;signal.h&gt;</span></span><br><span class="line">signal(SIGCHLD, SIG_IGN);//å­è¿›ç¨‹ä¿¡å·ï¼Œå¿½ç•¥</span><br></pre></td></tr></table></figure>

<h5 id="1ï¼šn-çš„æœºåˆ¶"><a href="#1ï¼šn-çš„æœºåˆ¶" class="headerlink" title="1ï¼šn çš„æœºåˆ¶"></a>1ï¼šn çš„æœºåˆ¶</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€ä»å­è¿›ç¨‹è·å¾—çˆ¶è¿›ç¨‹idå®¹æ˜“ã€‚</span><br><span class="line">2ã€æŠŠå­è¿›ç¨‹idè¿”å›ç»™çˆ¶è¿›ç¨‹ï¼Œä»¥ä¾¿æ§åˆ¶</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿›ç¨‹è·å–æ ‡è¯†</title>
    <url>/Linux-Lover/%E6%A0%87%E8%AF%86/</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">è¿›ç¨‹ID</span><br><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"UID=%ld\n"</span>,(long)getuid());</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"EUID=%ld\n"</span>,(long)geteuid());</span><br><span class="line">	<span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">ç”¨æˆ·ID Â åˆ›å»ºè€…ä¿¡æ¯</span><br><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">int flag1,flag2;</span><br><span class="line">flag1=setuid(0);</span><br><span class="line">flag2=setgid(500);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"flag1=%d\n,flag2=%d\n"</span>,flag1,flag2);</span><br><span class="line"><span class="built_in">return</span> 0;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">ç”¨æˆ·ç»„ID Â ç”¨æˆ·ç»„ä¿¡æ¯</span><br><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"group ID=%d\n"</span>,(long)getgid());</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"effective group ID=%d\n"</span>,(long)getegid());</span><br><span class="line">	<span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¿ç¨‹</title>
    <url>/Linux-Lover/%E7%A8%8B/</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>void *</title>
    <url>/C-C-Lover/id/</url>
    <content><![CDATA[<p>Cè¯­è¨€ä¸­void *ä¸ºä¸ç¡®å®šç±»å‹æŒ‡é’ˆ.</p>
<p>void* å¯ä»¥ç”¨æ¥å£°æ˜æŒ‡é’ˆã€‚<br>ä¾‹å¦‚: void <em>a;<br>(1) void</em>å¯ä»¥æ¥å—ä»»ä½•çš„tå€¼:void *a= NULLï¼›<br>   int  *b=NULLï¼›<br>   a= b; ä»»ä½•ç±»å‹çš„æŒ‡é’ˆéƒ½å¯ä»¥ç›´æ¥èµ‹å€¼ç»™å®ƒ,æ— éœ€è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢</p>
<p>(2) void<em>å¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹çš„å˜é‡ä½†æ˜¯éœ€è¦è¿›è¡Œå¼ºåˆ¶è½¬æ¢:<br>ä¾‹å¦‚ï¼šint a = NULL;void*b;a = (int</em>) b:</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–‡ä»¶</title>
    <url>/Linux-Lover/%E4%BB%B6/</url>
    <content><![CDATA[<h5 id="æ–‡ä»¶è‡ªèº«ä¿¡æ¯"><a href="#æ–‡ä»¶è‡ªèº«ä¿¡æ¯" class="headerlink" title="æ–‡ä»¶è‡ªèº«ä¿¡æ¯"></a>æ–‡ä»¶è‡ªèº«ä¿¡æ¯</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//ç´¢å¼•èŠ‚ç‚¹æ‰€åŒ…å«ä¿¡æ¯å­˜åœ¨ç»“æ„ä½“<span class="built_in">stat</span></span><br><span class="line">struct <span class="built_in">stat</span></span><br><span class="line">&#123;</span><br><span class="line">dev_t stdev; /*æ–‡ä»¶ä½¿ç”¨è®¾å¤‡å·*/</span><br><span class="line">ino_t st_ino;  /*ç´¢å¼•èŠ‚ç‚¹*/</span><br><span class="line">mode_t st_mode; /*è®¿é—®æ¨¡å¼*/</span><br><span class="line">nlink_t st_nlink;/*ç¡¬é“¾æ¥*/</span><br><span class="line">uidt st_uid; /*æ‰€æœ‰è€…ç”¨æˆ·ID*/</span><br><span class="line">gid_t st_gid; /*ç”¨æˆ·ç»„ID*/</span><br><span class="line">dev_t st_rdev;/*è®¾å¤‡æ–‡ä»¶è®¾å¤‡å· */</span><br><span class="line">off_t st_size; /*æ–‡ä»¶å¤§å° å­—èŠ‚å•ä½/</span><br><span class="line">blksize_t st_blksize; /*ç³»ç»Ÿç£ç›˜å—å¤§å°*/</span><br><span class="line">blkcnt_t st blocks; /*æ–‡ä»¶ç£ç›˜å—å¤§å°*/</span><br><span class="line">time_t st_atime; /*æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´*/</span><br><span class="line">time_t st_mtime; /*æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´*/</span><br><span class="line">time_t st_ctime; /*æœ€åä¸€æ¬¡ä¿®æ”¹æ–‡ä»¶çŠ¶æ€æ—¶é—´*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="æ–‡ä»¶ç±»å‹"><a href="#æ–‡ä»¶ç±»å‹" class="headerlink" title="æ–‡ä»¶ç±»å‹"></a>æ–‡ä»¶ç±»å‹</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ ¹æ®å¤„ç†çš„ä¸åŒï¼š</span><br><span class="line">ç¼“å†²åŒºæ–‡ä»¶ã€éç¼“å†²åŒºæ–‡ä»¶ï¼ˆç³»ç»ŸI/Oï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰</span><br><span class="line"></span><br><span class="line">ç¼“å†²ï¼šç¼“å†²åŒºçš„å¤§å°ç”±å„ä¸ªå…·ä½“çš„C ç‰ˆæœ¬ç¡®å®šï¼Œä¸€èˆ¬ä¸º512 å­—èŠ‚ã€‚</span><br><span class="line">å…¨ç¼“å†²(æ–‡ä»¶æŠŠç¼“å†²åŒºå†™æ»¡æ‰å†™åˆ°æ–‡ä»¶é‡Œ)</span><br><span class="line">è¡Œç¼“å†²ï¼ˆ<span class="built_in">printf</span>ï¼‰</span><br><span class="line">æ— ç¼“å†²ï¼ˆå†…æ ¸è°ƒç”¨å‡½æ•°ï¼‰</span><br><span class="line">æ ¹æ®å…¶å­˜æ”¾æ•°æ®çš„ä½œç”¨çš„ä¸åŒï¼š</span><br><span class="line">å…¶åˆ†ä¸ºæ™®é€šæ–‡ä»¶ã€ç›®å½•æ–‡ä»¶ã€é“¾æ¥æ–‡ä»¶ã€è®¾å¤‡æ–‡ä»¶å’Œç®¡é“æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<h5 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">IOæ“ä½œåˆ†ä¸¤ç±»</span><br><span class="line">åŸºäºæ–‡ä»¶æè¿°ç¬¦çš„IOæ“ä½œã€åŸºäºæ•°æ®æµçš„IOæ“ä½œ</span><br><span class="line"></span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">æ‰“å¼€ç£ç›˜æ–‡ä»¶ä¸€æ¬¡ï¼Œå†…æ ¸åˆ›å»ºä¸€ä¸ªæ–‡ä»¶è¡¨é¡¹ï¼Œæ–‡ä»¶è¡¨é¡¹åŒ…å«æ–‡ä»¶çŠ¶æ€ä¿¡æ¯ã€å­˜å‚¨å†…å®¹ç¼“å­˜ã€å½“å‰æ–‡ä»¶è·¯å¾„ç­‰ã€‚</span><br><span class="line">ä¾‹å¦‚ï¼štable[0]=aã€table[1]=bã€table[3]=c</span><br><span class="line">a,b,cæ–‡ä»¶è¡¨é¡¹ï¼Œæè¿°ç¬¦ä¸º0,1ï¼Œ2 ã€‚å¯ä»¥ç”¨des[3] = &#123;0,1,2&#125;ä¿å­˜è®¿é—®ç£ç›˜æ–‡ä»¶ã€‚</span><br><span class="line">å¤´æ–‡ä»¶<span class="comment">#include&lt;unistd.h&gt;ã€‚linuxç³»ç»Ÿæä¾›ï¼Œopenï¼ˆï¼‰ã€closeã€readï¼ˆï¼‰ã€writeï¼ˆï¼‰ã€lseekï¼ˆï¼‰ç­‰</span></span><br><span class="line">eg:ssize_t <span class="built_in">read</span>(int fp,char *buf,size_t count)</span><br><span class="line">off_t lseek(int fildes,off_t,int <span class="built_in">whence</span>)</span><br><span class="line">å‚æ•°<span class="built_in">whence</span>:</span><br><span class="line">SEEK_SET:æ–‡ä»¶å¼€å¤´</span><br><span class="line">SEEK_CUR:æ–‡ä»¶åç§»é‡</span><br><span class="line">SEEK_END:æ–‡ä»¶ç»“å°¾</span><br><span class="line"></span><br><span class="line">æ•°æ®æµæ¦‚è¿°</span><br><span class="line">æ ‡å‡†I/Oåº“å‡½æ•°ï¼Œstdio.hå¤´æ–‡ä»¶</span><br><span class="line">fopen()ã€fread()ã€fclose()ã€fgetc(0ï¼‰ã€fscanf()ç­‰</span><br><span class="line">eg: FILE open ï¼ˆconst char * path ,const char *modeï¼‰</span><br><span class="line">char *fgets(char *s ,int size,FILE *stream);</span><br><span class="line">int fputs(char *s FILE *stream);</span><br><span class="line"></span><br><span class="line">size_t fread(void *ptr,size_t size ,size nmemb,FILE *stream);</span><br><span class="line">size_t fwrite(const void *ptr,size_t size ,size nmemb,FILE *stream);</span><br><span class="line">â€¦â€¦</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“å®‰å…¨æ€§</title>
    <url>/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7/</url>
    <content><![CDATA[<h5 id="æ•°æ®åº“å®‰å…¨æ¦‚è¿°"><a href="#æ•°æ®åº“å®‰å…¨æ¦‚è¿°" class="headerlink" title="æ•°æ®åº“å®‰å…¨æ¦‚è¿°"></a>æ•°æ®åº“å®‰å…¨æ¦‚è¿°</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ•°æ®åº“å®‰å…¨æ€§æ˜¯æŒ‡ä¿æŠ¤æ•°æ®åº“ä»¥é˜²æ­¢ä¸åˆæ³•ä½¿ç”¨æ‰€é€ æˆçš„æ•°æ®æ³„éœ²ã€æ›´æ”¹æˆ–ç ´åã€‚</span><br><span class="line">æ•°æ®åº“ä¸å®‰å…¨å› ç´ :</span><br><span class="line">(1)éæˆæƒç”¨æˆ·å¯¹æ•°æ®åº“è¿›è¡Œç ´å</span><br><span class="line">(2)æ•°æ®åº“é‡è¦æˆ–è€…æ•æ„Ÿæ•°æ®æ³„éœ²</span><br><span class="line">(3)å®‰å…¨ç¯å¢ƒçš„è„†å¼±æ€§</span><br></pre></td></tr></table></figure>
<h5 id="å®‰å…¨æ ‡å‡†"><a href="#å®‰å…¨æ ‡å‡†" class="headerlink" title="å®‰å…¨æ ‡å‡†"></a>å®‰å…¨æ ‡å‡†</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å®‰å…¨æ ‡å‡†ï¼šTCSECæ ‡å‡†ã€CCæ ‡å‡†(TCSECç›¸äº’æ€»ç»“äº’è¡¥å‘å±•è€Œæ¥)</span><br></pre></td></tr></table></figure>
<img src="/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7/1.jpg" class title="TCSECæ ‡å‡†">


<img src="/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7/2.jpg" class title="CCæ ‡å‡†">

<h5 id="å®‰å…¨æ€§æ§åˆ¶"><a href="#å®‰å…¨æ€§æ§åˆ¶" class="headerlink" title="å®‰å…¨æ€§æ§åˆ¶"></a>å®‰å…¨æ€§æ§åˆ¶</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰ç”¨æˆ·èº«ä»½é‰´åˆ«</span><br><span class="line">	é™æ€é‰´åˆ«ã€åŠ¨æ€é‰´åˆ«ã€ç”Ÿç‰©é‰´åˆ«ã€æ™ºèƒ½å¡é‰´åˆ«ã€‚</span><br><span class="line">ï¼ˆ2ï¼‰å­˜å–æ§åˆ¶ ï¼ˆè‡ªä¸»å­˜å–æ§åˆ¶å’Œå¼ºåˆ¶å­˜å–æ§åˆ¶ï¼Œå®šä¹‰ç”¨æˆ·æƒé™å’Œåˆæ³•æƒé™æ£€æŸ¥æœºåˆ¶ï¼‰</span><br><span class="line">	æˆæƒ:æˆäºˆå’Œæ”¶å›</span><br><span class="line">    </span><br><span class="line">	GRANT Â &lt;æƒé™&gt;</span><br><span class="line">	ON  &lt;å¯¹è±¡&gt;</span><br><span class="line">	TO &lt;ç”¨æˆ·&gt;</span><br><span class="line">	WITH GRANT OPTION ;ï¼ˆèƒ½ä¼ é€’æƒé™ï¼Œä½†ä¸èƒ½å½¢æˆå¾ªç¯ä¼ é€’ï¼‰</span><br><span class="line"></span><br><span class="line">	REVOKE &lt;æƒé™&gt;</span><br><span class="line">	ON  &lt;å¯¹è±¡&gt;</span><br><span class="line">	FROM &lt;ç”¨æˆ·&gt;</span><br><span class="line"></span><br><span class="line">ï¼ˆ3ï¼‰è§†å›¾æœºåˆ¶</span><br><span class="line"></span><br><span class="line">ï¼ˆ4ï¼‰å®¡è®¡</span><br><span class="line">å®¡è®¡åŠŸèƒ½æŠŠç”¨æˆ·å¯¹æ•°æ®åº“çš„æ‰€æœ‰æ“ä½œè‡ªåŠ¨è®°å½•ä¸‹æ¥æ”¾å…¥å®¡è®¡æ—¥å¿—(auditlog)ä¸­ã€‚</span><br><span class="line">å®¡è®¡å‘˜å¯ä»¥åˆ©ç”¨å®¡è®¡æ—¥å¿—ç›‘æ§æ•°æ®åº“ä¸­çš„å„ç§è¡Œä¸º,é‡ç°å¯¼è‡´æ•°æ®åº“ç°æœ‰çŠ¶å†µçš„ä¸€ç³»åˆ—äº‹ä»¶ï¼Œæ‰¾å‡ºéæ³•å­˜å–æ•°æ®çš„äººã€æ—¶é—´ã€å†…å®¹ç­‰ã€‚</span><br><span class="line">AUDIT ALTERï¼ŒPDATA</span><br><span class="line">ON SC ;</span><br><span class="line"></span><br><span class="line">NOAUDIT ALTER ,UPDATA</span><br><span class="line">ON SC ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ï¼ˆ5ï¼‰æ•°æ®åŠ å¯†ï¼šä¼ è¾“åŠ å¯†ã€å­˜å‚¨åŠ å¯†</span><br><span class="line">å…¶ä»–å®‰å…¨æ€§ä¿æŠ¤ï¼šæ¨ç†æ§åˆ¶ã€éšè”½ä¿¡é“ã€æ•°æ®éšç§ä¿æŠ¤ã€‚</span><br></pre></td></tr></table></figure>
<img src="/MySql-Lover/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7/3.jpg" class title="è§†å›¾ä¾‹å­">]]></content>
      <categories>
        <category>MySql Lover</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿›ç¨‹åˆ›å»ºã€ç­‰å¾…ã€ç»“æŸ</title>
    <url>/Linux-Lover/%E8%BF%9B%E7%A8%8B%E5%9F%BA%E6%9C%AC%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h5 id="fork-ç³»ç»Ÿè°ƒç”¨"><a href="#fork-ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="fork ç³»ç»Ÿè°ƒç”¨"></a>fork ç³»ç»Ÿè°ƒç”¨</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¸€æ¬¡è°ƒç”¨ï¼ŒäºŒæ¬¡è¿”å›ï¼Ÿ</span><br><span class="line">ç­”ï¼šå¦‚æœæˆåŠŸåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¯¹äºçˆ¶è¿›ç¨‹æ¥è¯´è¿”å›å­è¿›ç¨‹ID</span><br><span class="line">å¦‚æœæˆåŠŸåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¯¹äºå­è¿›ç¨‹æ¥è¯´è¿”å›å€¼ä¸º0</span><br><span class="line">é—®é¢˜çš„æœ¬è´¨æ˜¯ï¼šä¸¤æ¬¡è¿”å›ï¼Œæ˜¯åœ¨å„è‡ªçš„è¿›ç¨‹ç©ºé—´ä¸­è¿”å›çš„ã€‚</span><br><span class="line">å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹å„æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ ï¼ˆforkï¼šä»£ç æ®µã€æ•°æ®æ®µã€å †æ ˆæ®µã€PCBè¿›ç¨‹æ§åˆ¶å—çš„copyï¼‰ã€‚</span><br><span class="line">forkè¿”å›å€¼å¤§äºé›¶çš„æ˜¯çˆ¶è¿›ç¨‹ï¼Œä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡:ï¼Ÿ</span><br><span class="line">ç­”ï¼šå› ä¸ºçˆ¶è¿›ç¨‹æ±‚å­è¿›ç¨‹çš„pidæ¯”è¾ƒå›°éš¾ï¼Œå­è¿›ç¨‹æ±‚çˆ¶è¿›ç¨‹çš„idæ¯”è¾ƒå®¹æ˜“</span><br></pre></td></tr></table></figure>
<h5 id="fork-c"><a href="#fork-c" class="headerlink" title="fork.c"></a>fork.c</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;stdlib.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pid_t pid;</span><br><span class="line">	<span class="keyword">if</span>((pid=fork())&lt;0)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"fork error!\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(1);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(pid==0)</span><br><span class="line">	&#123;</span><br><span class="line"> Â  Â //å­è¿›ç¨‹</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"in the child process!\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">	&#123;</span><br><span class="line"> Â  Â //çˆ¶è¿›ç¨‹</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"in the parent process!\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">exit</span>(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="vfork-ä¸forkåŒºåˆ«"><a href="#vfork-ä¸forkåŒºåˆ«" class="headerlink" title="vfork ä¸forkåŒºåˆ«"></a>vfork ä¸forkåŒºåˆ«</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vforkå‡½æ•°vforkå‡½æ•°ä¸forkå‡½æ•°ç›¸åŒ,éƒ½æ˜¯ç³»ç»Ÿè°ƒç”¨å‡½æ•°,ä¸¤è€…çš„åŒºåˆ«æ˜¯åœ¨åˆ›å»ºå­è¿›ç¨‹æ—¶, forkå‡½æ•°ä¼šå¤åˆ¶æ‰€æœ‰çš„çˆ¶é€æº,åŒ…æ‹¬è¿›ç¨‹ç¯å¢ƒã€å†…èèµ„æºç­‰ã€‚è€Œvforkå‡½æ•°åœ¨åˆ›å»ºå­è¿›ç¨‹æ—¶,ä¸ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹çš„æ‰€æœ‰èµ„æº,çˆ¶å­è¿›ç¨‹å…±äº«ç©ºé—´ï¼Œå¯ä»¥ä¿®æ”¹çˆ¶è¿›ç¨‹å†…å­˜ç©ºé—´ä¸­çš„å€¼ã€‚</span><br><span class="line">æ³¨æ„ï¼šåœ¨ä½¿ç”¨vforkå‡½æ•°æ—¶,çˆ¶è¿›ç¨‹ä¼šè¢«é˜»å¡,éœ€è¦å­¦è¿›ç¨‹è°ƒç”¨_exitå‡½æ•°é€€å‡ºå­è¿›ç¨‹,ä¸èƒ½ä½¿ç”¨<span class="built_in">exit</span>é€€å‡º.</span><br></pre></td></tr></table></figure>
<h5 id="vfork"><a href="#vfork" class="headerlink" title="vfork"></a>vfork</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line">int gvar=2;</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pid_t pid;</span><br><span class="line">	int var=5;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"process id:%ld\n"</span>,(long)getpid());//getpid è·å–å½“å‰è¿›ç¨‹id</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"gvar=%d var=%d\n"</span>,gvar,var);</span><br><span class="line">	<span class="keyword">if</span>((pid=vfork())&lt;0)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(<span class="string">"error!"</span>);</span><br><span class="line">		<span class="built_in">return</span> 1;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(pid==0)</span><br><span class="line">	&#123;</span><br><span class="line">		gvar--;</span><br><span class="line">		var++;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"the child process id:%ld\ngvar=%d var=%d\n"</span>,(long)getpid(),gvar,var);</span><br><span class="line">		_exit(0);//é€€å‡ºå­ç¨‹åº</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"the parent process id:%ld\ngvar=%d var=%d\n"</span>,(long)getpid(),gvar,var);</span><br><span class="line">		<span class="built_in">return</span> 0;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">è¿è¡Œç®€è¦ç»“æœ ï¼š //å½“å‰</span><br><span class="line">	process id:2825</span><br><span class="line">	gvar=2 var=5</span><br><span class="line">	the child process id:2826</span><br><span class="line">	gvar=1 var=6//å­è¿›ç¨‹ Â å…±äº«å˜é‡çš„ä¿®æ”¹</span><br><span class="line">	the parent process id:2825//çˆ¶è¿›ç¨‹</span><br><span class="line">	gvar=1 var=6</span><br></pre></td></tr></table></figure>
<h5 id="execè°ƒç”¨å‡½æ•°"><a href="#execè°ƒç”¨å‡½æ•°" class="headerlink" title="execè°ƒç”¨å‡½æ•°"></a>execè°ƒç”¨å‡½æ•°</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">       <span class="comment">#include &lt;unistd.h&gt; </span></span><br><span class="line">       extern char **environ;</span><br><span class="line">       int execl(const char *path, const char *arg, ...); </span><br><span class="line">       int execlp(const char *file, const char *arg, ...); </span><br><span class="line">       int execle(const char *path, const char *arg,</span><br><span class="line">                  ..., char * const envp[]);    </span><br><span class="line">       int execv(const char *path, char *const argv[]);</span><br><span class="line"> Â  Â  Â  int execvp(const char *file, char *const argv[]);</span><br><span class="line">å‚æ•°è¯´æ˜ï¼š</span><br><span class="line">	pathå‚æ•°è¡¨ç¤ºä½ è¦å¯åŠ¨ç¨‹åºçš„åç§°åŒ…æ‹¬è·¯å¾„å</span><br><span class="line">	argå‚æ•°è¡¨ç¤ºå¯åŠ¨ç¨‹åºæ‰€å¸¦çš„å‚æ•°</span><br><span class="line">	è¿”å›å€¼:æˆåŠŸè¿”å›0,å¤±è´¥è¿”å›-1</span><br><span class="line">å‡½æ•°åè¯´æ˜ï¼š </span><br><span class="line"> Â  Â lä»£è¡¨å¯å˜å‚æ•°åˆ—è¡¨ï¼Œpä»£è¡¨åœ¨pathç¯å¢ƒå˜é‡ä¸­æœç´¢fileæ–‡ä»¶ã€‚envpä»£è¡¨ç¯å¢ƒå˜é‡ã€‚</span><br><span class="line">ä¾‹å­1ï¼š</span><br><span class="line">----------------execve.c-----------</span><br><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line">extern char **environ;</span><br><span class="line">int main(int argc,char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">/*	execve(<span class="string">"new"</span>,argv,environ);</span><br><span class="line">	puts(<span class="string">"æ­£å¸¸æƒ…å†µä¸‹æ— æ³•è¾“å‡ºæ­¤ä¿¡æ¯"</span>);</span><br><span class="line">*/</span><br><span class="line">	pid_t pid;</span><br><span class="line">	<span class="keyword">if</span>((pid=fork())&lt;0)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"create child process failed!\n"</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(pid==0)</span><br><span class="line">	 Â  Â  Â  execve(<span class="string">"new"</span>,argv,environ);//æ–‡ä»¶åå­—+å½“å‰è·¯å¾„+ç¯å¢ƒå˜é‡</span><br><span class="line">           // execve(<span class="string">"./new"</span>,NULL,NULL);</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">		puts(<span class="string">"æ­£å¸¸æƒ…å†µä¸‹è¾“å‡ºæ­¤ä¿¡æ¯"</span>); //ä¸æƒ³èˆå»æ”¾åœ¨çˆ¶è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">---------------new2.c----------------</span><br><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line">extern char **environ;</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	puts(<span class="string">"welcome to mrsoft"</span>);</span><br><span class="line">	<span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------</span><br><span class="line">ä¾‹å­2ï¼šç”¨execlpè°ƒç”¨vi,æ‰“å¼€äº†new2.c</span><br><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line">int main(int argc,char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(argc&lt;2)</span><br><span class="line">	&#123;</span><br><span class="line">	 	 <span class="built_in">printf</span>(<span class="string">"viçš„ç­‰æ•ˆç”¨æ³•ï¼š %s filename\n"</span>,argv[0]);</span><br><span class="line">		<span class="built_in">return</span> 1;</span><br><span class="line"> 	 &#125;</span><br><span class="line">	 Â execlp(<span class="string">"/bin/vi"</span>,<span class="string">"vi"</span>,argv[1],(char*)NULL);//æ–‡ä»¶è·¯å¾„+æ“ä½œå˜é‡å+æ“ä½œçš„æ–‡ä»¶+NULL</span><br><span class="line">	<span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">è¿è¡Œæ—¶è¾“å…¥å‘½ä»¤ï¼š./execlp ./new2.c</span><br></pre></td></tr></table></figure>

<h5 id="waitç­‰å¾…å‡½æ•°"><a href="#waitç­‰å¾…å‡½æ•°" class="headerlink" title="waitç­‰å¾…å‡½æ•°"></a>waitç­‰å¾…å‡½æ•°</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">	çˆ¶è¿›ç¨‹æ²¡æœ‰è°ƒç”¨ç­‰å¾…å‡½æ•°ï¼Œå­è¿›ç¨‹ä¼šå˜æˆåƒµå°¸è¿›ç¨‹ã€‚</span><br><span class="line">	åƒµå°¸è¿›ç¨‹ï¼šå¦‚æœå­è¿›ç¨‹å…ˆé€€å‡ºï¼Œçˆ¶è¿›ç¨‹è¿˜æ²¡é€€å‡ºï¼Œé‚£ä¹ˆå­è¿›ç¨‹å¿…é¡»ç­‰åˆ°çˆ¶è¿›ç¨‹æ•è·åˆ°äº†å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€æ‰çœŸæ­£ç»“æŸï¼Œå¦åˆ™è¿™ä¸ªæ—¶å€™å­è¿›ç¨‹å°±æˆä¸ºåƒµè¿›ç¨‹ã€‚</span><br><span class="line">	å­¤å„¿è¿›ç¨‹ï¼šå¦‚æœçˆ¶äº²è¿›ç¨‹å…ˆç»“æŸï¼Œå­è¿›ç¨‹ä¼šæ‰˜å­¤ç»™1å·è¿›ç¨‹</span><br><span class="line">-------------------</span><br><span class="line"> Â  Â å­è¿›ç¨‹ç»“æŸï¼Œå†…æ ¸ä¼šå‘çˆ¶è¿›ç¨‹å‘é€SIGCHLDä¿¡å·ï¼Œå­è¿›ç¨‹çš„é€€å‡ºæ˜¯ä¸ªå¼‚æ­¥äº‹ä»¶ï¼ˆå­è¿›ç¨‹å¯ä»¥åœ¨çˆ¶è¿›ç¨‹è¿è¡Œçš„ä»»ä½•æ—¶åˆ»ç»ˆæ­¢ï¼‰</span><br><span class="line">    å¦‚æœå­˜åœ¨å­è¿›ç¨‹,è¿›ç¨‹æ—¶çš„ç»“æŸçŠ¶æ€æœ‰(status)å¦‚ä¸‹ä¸¤ç§å¯èƒ½: </span><br><span class="line">	è¿›ç¨‹æ­£å¸¸ç»“æŸï¼šstatuså’ŒPIDï¼Œstatuså­˜åœ¨å­è¿›ç¨‹é€€å‡ºç ï¼ˆå­è¿›ç¨‹mainè¿”å›å‚æ•°æˆ–è€…extiè¿”å›å‚æ•°ï¼‰å½“ä¸­ã€‚</span><br><span class="line"></span><br><span class="line"> Â  ä¿¡å·å¼•èµ·å­è¿›ç¨‹ç»“æŸï¼šè‹¥å‘é€çš„ä¿¡å·è¢«è¿›ç¨‹æ•è·,å°±ä¸ä¼šèµ·åˆ°ç»ˆæ­¢è¿›ç¨‹ä½œç”¨;è‹¥ä¿¡å·æ²¡æœ‰è¢«è¿›ç¨‹æ•è¯¯,åˆ™ä¼šä½¿è¿›ç¨‹éæ­£å¸¸ç»“æŸã€‚æ­¤æ—¶å‚æ•°statusè¿”å›çš„çŠ¶æ€å€¼ä¸ºæ¥æ”¶åˆ°çš„ä¿¡å· ,å­˜åœ¨æœ€åä¸€ä¸ªå­—èŠ‚ä¸­ã€‚</span><br><span class="line">ä¾‹å­ï¼š</span><br><span class="line"><span class="comment">#include&lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;sys/wait.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;stdlib.h&gt;</span></span><br><span class="line">void exit_s(int status)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(WIFEXITED(status)) </span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"normal exit,status=%d\n"</span>,WEXITSTATUS(status));</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(WIFSIGNALED(status))</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"signal exit!status=%d\n"</span>,WTERMSIG(status));</span><br><span class="line">&#125;</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	pid_t pid,pid1;</span><br><span class="line">	int status;</span><br><span class="line">	<span class="keyword">if</span>((pid=fork())&lt;0)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"child process error!\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(0);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(pid==0)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"the child process!\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(2);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">wait</span>(&amp;status)!=pid)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"this is a parent process!\nwait error!\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(0);</span><br><span class="line">	&#125;</span><br><span class="line">	exit_s(status);</span><br><span class="line">	<span class="keyword">if</span>((pid=fork())&lt;0)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"child process error!\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(0);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(pid==0)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"the child process!\n"</span>);</span><br><span class="line">		pid1=getpid();</span><br><span class="line">	//	<span class="built_in">kill</span>(pid1,9);//ç»“æŸ Â  ä¿¡å·é€€å‡º</span><br><span class="line">	//	<span class="built_in">kill</span>(pid1,17);//è¿›å…¥çˆ¶è¿›ç¨‹ Â <span class="built_in">wait</span> erro</span><br><span class="line">		<span class="built_in">kill</span>(pid1,19);//ç»ˆæ­¢ Â  ç›´æ¥é€€å‡º</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">wait</span>(&amp;status)!=pid)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"this is a parent process!\nwait error!\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(0);</span><br><span class="line">	&#125;</span><br><span class="line">	exit_s(status);</span><br><span class="line"><span class="built_in">exit</span>(0);</span><br><span class="line">&#125;</span><br><span class="line">æ‰©å±•ï¼š</span><br><span class="line">å®å®šä¹‰</span><br><span class="line">WIFEXITED(status)	å¦‚æœå­è¿›ç¨‹æ­£å¸¸ç»“æŸï¼Œè¿”å›ä¸€ä¸ªéé›¶å€¼</span><br><span class="line">WEXITSTATUS(status)	å¦‚æœWIFEXITEDéé›¶ï¼Œè¿”å›å­è¿›ç¨‹é€€å‡ºç </span><br><span class="line">WIFSIGNALED(status)	å­è¿›ç¨‹å› ä¸ºæ•è·ä¿¡å·è€Œç»ˆæ­¢ï¼Œè¿”å›éé›¶å€¼</span><br><span class="line">WTERMSIG(status)	å¦‚æœWIFSIGNALEDéé›¶ï¼Œè¿”å›ä¿¡å·ä»£ç </span><br><span class="line">WIFSTOPPED(status)	å¦‚æœå­è¿›ç¨‹è¢«æš‚åœï¼Œè¿”å›ä¸€ä¸ªéé›¶å€¼</span><br><span class="line">WSTOPSIG(status)	å¦‚æœWIFSTOPPEDéé›¶ï¼Œè¿”å›ä¸€ä¸ªä¿¡å·ä»£ç </span><br><span class="line">waitip()ä¹Ÿç”¨äºç­‰å¾…ç‰¹å®šè¿›ç¨‹ã€‚è°ƒç”¨<span class="built_in">wait</span>æˆ–è€…waitpidå‡½æ•°æŸ¥è¯¢å­è¿›ç¨‹é€€å‡ºçŠ¶æ€ï¼Œæ­¤æ–¹æ³•çˆ¶è¿›ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚</span><br><span class="line">å¦‚æœä¸æƒ³è®©çˆ¶è¿›ç¨‹æŒ‚èµ·ï¼Œå¯ä»¥åœ¨çˆ¶è¿›ç¨‹ä¸­åŠ å…¥ä¸€æ¡è¯­å¥ï¼š</span><br><span class="line">signal(SIGCHLD,SIG_IGN);è¡¨ç¤ºçˆ¶è¿›ç¨‹å¿½ç•¥SIGCHLDä¿¡å·ï¼Œè¯¥ä¿¡å·æ˜¯å­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™å‘çˆ¶è¿›ç¨‹å‘é€çš„ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="è¿›ç¨‹ç»“æŸ"><a href="#è¿›ç¨‹ç»“æŸ" class="headerlink" title="è¿›ç¨‹ç»“æŸ"></a>è¿›ç¨‹ç»“æŸ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exit</span> ä¸_exit()</span><br><span class="line">ç›¸åŒï¼šæ— è®ºè°ƒç”¨æˆåŠŸä¸å¦ï¼Œæ— è¿”å›ä¿¡æ¯ã€‚</span><br><span class="line"></span><br><span class="line">ä¸åŒç‚¹ï¼š</span><br><span class="line">1ï¼‰_exitæ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œ<span class="built_in">exit</span>æ˜¯ä¸€ä¸ªcåº“å‡½æ•°</span><br><span class="line">2ï¼‰<span class="built_in">exit</span>ä¼šæ‰§è¡Œæ¸…é™¤I/Oç¼“å­˜ï¼Œå¯èƒ½ä¼šä¸¢å¤±ä¸´æ—¶æ–‡ä»¶ï¼Œå»ºè®®ä¸ç”¨ã€‚ï¼ˆå‰é¢ä¾‹å­ï¼Œä¸åšè¯´æ˜ï¼‰</span><br><span class="line">3ï¼‰<span class="built_in">exit</span>ä¼šæ‰§è¡Œè°ƒç”¨ç»ˆæ­¢å¤„ç†ç¨‹åº</span><br><span class="line"></span><br><span class="line">æ‰©å±•ï¼šatexitï¼ˆï¼‰</span><br><span class="line">ä»£ç :</span><br><span class="line">void func1()</span><br><span class="line">&#123;</span><br><span class="line">puts(<span class="string">"hello1...\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line">void func2()</span><br><span class="line">&#123;</span><br><span class="line">puts(<span class="string">"hello2...\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">atexit(func1);//è¾“å‡ºfunc1</span><br><span class="line">atexit(func2);//è¾“å‡ºfunc2</span><br><span class="line">puts(<span class="string">"hello...\n"</span>);</span><br><span class="line"><span class="built_in">exit</span>(0);</span><br><span class="line">&#125;</span><br><span class="line">è¿è¡Œï¼š</span><br><span class="line">hello...</span><br><span class="line">hello2...</span><br><span class="line">hello1...</span><br></pre></td></tr></table></figure>


<h5 id="è¿›ç¨‹ç»ˆæ­¢"><a href="#è¿›ç¨‹ç»ˆæ­¢" class="headerlink" title="è¿›ç¨‹ç»ˆæ­¢"></a>è¿›ç¨‹ç»ˆæ­¢</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">è¿›ç¨‹ç»ˆæ­¢çš„5ç§æ–¹å¼</span><br><span class="line">æ­£å¸¸é€€å‡º</span><br><span class="line">1)ä»mainå‡½æ•°è¿”å›</span><br><span class="line">2)è°ƒç”¨<span class="built_in">exit</span></span><br><span class="line">3)è°ƒç”¨_exit</span><br><span class="line">å¼‚å¸¸é€€å‡º</span><br><span class="line">4)è°ƒç”¨abort   äº§ç”ŸSIGABOUTä¿¡å·</span><br><span class="line">5)ç”±ä¿¡å·ç»ˆæ­¢  ctrl+c SIGINT</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘</title>
    <url>/Data-Structure-and-Algorithms-Lover/d/</url>
    <content><![CDATA[<h5 id="LeetCode-æ€»ç»“"><a href="#LeetCode-æ€»ç»“" class="headerlink" title="LeetCode æ€»ç»“"></a>LeetCode æ€»ç»“</h5><h5 id="äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ"><a href="#äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ" class="headerlink" title="äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ"></a>äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct TreeNode &#123;</span><br><span class="line">	int data;</span><br><span class="line"> Â  Â TreeNode *left;</span><br><span class="line"> Â  Â TreeNode *right;</span><br><span class="line">&#125;;</span><br><span class="line">int OneSideMax(TreeNode *root) &#123;</span><br><span class="line">    <span class="keyword">if</span> (rootroot-&gt;left &amp;&amp; !root-&gt;right) &#123;</span><br><span class="line">        <span class="built_in">return</span> root-&gt;value + OneSideMax(root-&gt;left);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!root-&gt;left &amp;&amp; root-&gt;right) &#123;</span><br><span class="line">        <span class="built_in">return</span> root-&gt;value + OneSideMax(root-&gt;right);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (root-&gt;left &amp;&amp; root-&gt;right) &#123;</span><br><span class="line">        int a = OneSideMax(root-&gt;left);</span><br><span class="line">        int b = OneSideMax(root-&gt;right);</span><br><span class="line">        <span class="keyword">if</span> (a &gt; b) &#123;Â  Â  Â </span><br><span class="line">            <span class="built_in">return</span> root-&gt;value + a;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">return</span> root-&gt;value + b;</span><br><span class="line">        &#125;</span><br><span class="line">  		  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!root-&gt;left &amp;&amp; !root-&gt;right) &#123;</span><br><span class="line">        <span class="built_in">return</span> root-&gt;value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="äºŒå‰æ ‘é•œåƒ"><a href="#äºŒå‰æ ‘é•œåƒ" class="headerlink" title="äºŒå‰æ ‘é•œåƒ"></a>äºŒå‰æ ‘é•œåƒ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/*åˆ¤æ–­æ ‘æ˜¯å¦ä¸ºé•œåƒ,åˆ¤æ–­ä¼˜å…ˆè€ƒè™‘é€’å½’QAQ*/</span><br><span class="line">bool isSym(struct TreeNode *root1 ,struct TreeNode *root2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(root1 == NULL &amp;&amp; root2 == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">true</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(root1 ==NULL || root2 == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">false</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(root1-&gt;val != root2-&gt;val)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> isSym(root1-&gt;left,root2-&gt;right)&amp;&amp;isSym(root1-&gt;right,root2-&gt;left);</span><br><span class="line">&#125;</span><br><span class="line">bool isSymmetric(struct TreeNode* root)&#123;</span><br><span class="line">    <span class="keyword">if</span>(root == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> isSym(root-&gt;left,root-&gt;right);</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºé•œåƒæ ‘</span><br><span class="line">/**</span><br><span class="line"> * Definition <span class="keyword">for</span> a binary tree node.</span><br><span class="line"> * struct TreeNode &#123;</span><br><span class="line"> *     int val;</span><br><span class="line"> *     struct TreeNode *left;</span><br><span class="line"> *     struct TreeNode *right;</span><br><span class="line"> * &#125;;</span><br><span class="line"> */</span><br><span class="line">struct TreeNode* Swap(struct TreeNode* root)</span><br><span class="line">&#123;   </span><br><span class="line">     <span class="keyword">if</span>(root == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> NULL;</span><br><span class="line">    &#125;</span><br><span class="line">    Swap(root-&gt;left);</span><br><span class="line">    Swap(root-&gt;right);</span><br><span class="line">    struct TreeNode *tmp = root-&gt;left;</span><br><span class="line">    root-&gt;left  =  root-&gt;right ;</span><br><span class="line">    root-&gt;right = tmp;</span><br><span class="line">    <span class="built_in">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct TreeNode* mirrorTree(struct TreeNode* root)&#123;</span><br><span class="line">    <span class="keyword">if</span>(root == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> NULL;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="built_in">return</span>  Swap(root);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="äºŒå‰æ ‘è¿˜åŸ"><a href="#äºŒå‰æ ‘è¿˜åŸ" class="headerlink" title="äºŒå‰æ ‘è¿˜åŸ"></a>äºŒå‰æ ‘è¿˜åŸ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/*å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœè¿˜åŸä¸€æ£µäºŒå‰æ ‘*/</span><br></pre></td></tr></table></figure>
<h5 id="Næ ‘"><a href="#Næ ‘" class="headerlink" title="Næ ‘"></a>Næ ‘</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Data Structure and Algorithms Lover</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„æ¡†æ¶</title>
    <url>/Data-Structure-and-Algorithms-Lover/%E6%8D%AE%E7%BB%93%E6%9E%84%E6%A1%86%E6%9E%B6/</url>
    <content><![CDATA[<p>è®°è¨€ï¼šè¢«åä¸ºçš„ç¬”è¯•é¢˜å¼„æ™•äº†ï¼Œæ‰å‘ç°è‡ªå·±çš„æ•°æ®ç»“æ„å’Œç®—æ³•æ˜¯å¤šä¹ˆçš„è‹ç™½æ— åŠ›ï¼Œä½†æˆ‘ä¼šå˜å¼ºçš„QAQã€‚<br>2019-4-15 ming</p>
<p>èµ„æ–™å­¦ä¹ ï¼šåœ¨Githubä¸Šæœ‰ä»½èµ„æ–™å€¼å¾—æ¨èã€‚<br><a href="https://labuladong.gitbook.io/algo/" target="_blank" rel="noopener">https://labuladong.gitbook.io/algo/</a> å‘dalaoé€’èŒ¶.jpg</p>
<p>éå†æ¡†æ¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/*æ•°ç»„éå†*/</span><br><span class="line">void traverseï¼ˆint [] arrï¼‰</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span> (int i ; i &lt;arr.length ; i ++)</span><br><span class="line">	&#123;</span><br><span class="line">		//è¿­ä»£ arr[i]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*é“¾è¡¨éå†*/</span><br><span class="line">class ListNode&#123;</span><br><span class="line">	int data;</span><br><span class="line">    ListNode next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void traverse(ListNode head)&#123;</span><br><span class="line">	<span class="keyword">for</span> (ListNode p = head ; p != null ; p = p.next)&#123;</span><br><span class="line">    	</span><br><span class="line"> Â  Â  Â  Â //è¿­ä»£è®¿é—®p.data</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void traverse(ListNode head)&#123;</span><br><span class="line">	//é€’å½’head.data;</span><br><span class="line">	traverse(head.next);</span><br><span class="line">&#125;</span><br><span class="line">/*äºŒå‰æ ‘éå†*/</span><br><span class="line">class TreeNode&#123;</span><br><span class="line">	int data;</span><br><span class="line"> Â  Â TreeNode left ,right;</span><br><span class="line">&#125;</span><br><span class="line">void traverse (TreeNode root)&#123;</span><br><span class="line">	//é€’å½’root.data Â å…ˆåº</span><br><span class="line"> Â  Â //cout &lt;&lt; root.data &lt;&lt; endl;</span><br><span class="line">	traverse(root.left);</span><br><span class="line">    traverse(root.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*Nå‰æ ‘éå†*/</span><br><span class="line">class TreeNode &#123;</span><br><span class="line">	int data;</span><br><span class="line">    TreeNode [] children;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">void traverse(TreeNode root)&#123;</span><br><span class="line">	//c++ 11 æ ‡å‡†</span><br><span class="line">	<span class="keyword">for</span>(TreeNode clid : root.children)&#123;</span><br><span class="line">    	//cout &lt;&lt; child.data &lt;&lt; endl;</span><br><span class="line">    	traverse(child);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Data Structure and Algorithms Lover</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>PCBçš„åŸºæœ¬å¸¸è¯†</title>
    <url>/Circuit-Lover/PCB%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B8%B8%E8%AF%86/</url>
    <content><![CDATA[<h4 id="åŸºæœ¬å¸¸è¯†"><a href="#åŸºæœ¬å¸¸è¯†" class="headerlink" title="åŸºæœ¬å¸¸è¯†"></a>åŸºæœ¬å¸¸è¯†</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">é¢‘ç‡ï¼š10M-100M </span><br><span class="line">çº¿æ¡†ï¼š10mileï¼ˆ0.254mm=10milï¼‰</span><br><span class="line">ç”µæºï¼š20-30v //ç”µæºçº¿åŠ ç²—æŠ—å¹²æ‰°</span><br><span class="line">ä»·é’±ï¼š80-100å…ƒ</span><br><span class="line">DIP åŒç›´æ’å¼</span><br><span class="line">QFP æ–¹æ‰å°è£…</span><br><span class="line">å­”çš„ç±»å‹</span><br><span class="line">å­”æœ‰ä¸‰å¤§ç±»åˆ«ï¼šè¿‡å­”ï¼ˆVaiï¼‰ã€ æ’ä»¶å­”ï¼ˆPadå­”ï¼‰ ã€æ— é“œå®‰è£…å­”ï¼ˆNpthï¼‰</span><br><span class="line">è¿‡å­”ï¼ˆviaï¼‰ï¼šåªæ˜¯èµ·ç”µæ°”å¯¼é€šä½œç”¨ä¸ç”¨æ’å™¨ä»¶ç„Šæ¥ï¼Œå…¶è¡¨é¢å¯ä»¥åšå¼€çª—ï¼ˆç„Šç›˜è£¸éœ²ï¼‰ã€ç›–æ²¹æˆ–è€…å¡æ²¹ã€‚</span><br><span class="line">æ’ä»¶å­”ï¼ˆPadå­”ï¼‰ï¼šéœ€è¦æ’å™¨ä»¶ç„Šæ¥çš„å¼•è„šå­”ï¼Œç„Šç›˜è¡¨é¢å¿…é¡»è£¸éœ²å‡ºæ¥</span><br><span class="line">æ— é“œå®‰è£…å­”ï¼ˆNpthï¼‰:èºä¸å­”æˆ–å™¨ä»¶å¡‘æ–™å›ºå®šè„šï¼Œæ²¡æœ‰ç”µæ°”æ€§èƒ½ï¼Œèµ·å®šä½å›ºå®šä½œç”¨ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="ADè½¯ä»¶æ“ä½œ"><a href="#ADè½¯ä»¶æ“ä½œ" class="headerlink" title="ADè½¯ä»¶æ“ä½œ"></a>ADè½¯ä»¶æ“ä½œ</h4><h6 id="å¸¸ç”¨å¿«æ·é”®ï¼š"><a href="#å¸¸ç”¨å¿«æ·é”®ï¼š" class="headerlink" title="å¸¸ç”¨å¿«æ·é”®ï¼š"></a>å¸¸ç”¨å¿«æ·é”®ï¼š</h6><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Q  ç²¾åº¦è½¬åŒ–mile---mm</span><br><span class="line">1 ç”µè·¯è§„åˆ’ï¼ˆæ¿å­å¤§å°ï¼‰</span><br><span class="line">å¿«æ·é”®TVTæ‰“å®‰è£…å­”ï¼ˆåŒå‡»å±æ€§ï¼šBoard cutout æ¿å‰ªåˆ‡å—ï¼‰copperé•€é“œ  polygon cutoutå¤šè¾¹å½¢å‰ªåˆ‡</span><br><span class="line">2 äºŒç»´s</span><br><span class="line">3 ä¸‰ç»´</span><br><span class="line">shitf+å³é”®æ—‹è½¬</span><br><span class="line">ctrl+ä¸­é”®  æ”¾å¤§</span><br><span class="line">N +  S  +  A  æ˜¾ç¤ºé¢„æ‹‰çº¿</span><br><span class="line">N +  H +  A      éšè—é¢„æ‹‰çº¿ï¼ˆNé”®ï¼‰</span><br><span class="line">shitf +FæŸ¥æ‰¾ç±»ä¼¼</span><br><span class="line">å…ˆæŒ‰3åˆ‡æ¢åˆ°ä¸‰ç»´ç•Œé¢ï¼Œç„¶åæŒ‰ä½SHIFTä¸æ”¾ï¼ŒæŒ‰é¼ æ ‡å³é”®è°ƒæ•´è§†å›¾è§’åº¦</span><br></pre></td></tr></table></figure>
<h5 id="ä¸€å—PCBçš„ç”ŸæˆåŸºæœ¬è¿‡ç¨‹"><a href="#ä¸€å—PCBçš„ç”ŸæˆåŸºæœ¬è¿‡ç¨‹" class="headerlink" title="ä¸€å—PCBçš„ç”ŸæˆåŸºæœ¬è¿‡ç¨‹"></a>ä¸€å—PCBçš„ç”ŸæˆåŸºæœ¬è¿‡ç¨‹</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1.åŸç†å›¾ ï¼ˆæ»¡è¶³è¾“å…¥å·¦è¾¹ï¼Œè¾“å‡ºå³è¾¹ï¼‰</span><br><span class="line">2.ä¸€é”®ç”ŸæˆPCB</span><br><span class="line">3.è‡ªåŠ¨å¸ƒçº¿</span><br><span class="line">4.æ‰‹å·¥å¸ƒçº¿</span><br><span class="line">5.è§„åˆ™æ£€æŸ¥</span><br><span class="line">6.æ³ªæ»´</span><br><span class="line">7.æ•·é“œï¼ˆæ”¾ç½®å¤šè¾¹å½¢æ•·é“œï¼ˆGé”®ï¼‰ï¼‰</span><br><span class="line">8.è§„åˆ™æ£€æŸ¥</span><br><span class="line">9.ä¿¡å·æ£€æŸ¥</span><br><span class="line">10.ç”Ÿæˆç‰©æ–™æ¸…å•</span><br><span class="line">11.è”ç³»æ·˜å®å–å®¶ ï¼ˆå˜‰ç«‹åˆ›ï¼‰</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
  </entry>
  <entry>
    <title>è¶…å£°æ³¢ä¼ æ„Ÿå™¨</title>
    <url>/Circuit-Lover/%E8%B6%85%E5%A3%B0%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8/</url>
    <content><![CDATA[<p><strong>è¶…å£°æ³¢åˆ†ç±»</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æŒ¯åŠ¨åœ¨å¼¹æ€§ä»‹è´¨å†…çš„ä¼ æ’­ç§°ä¸ºæ³¢åŠ¨ï¼Œç®€ç§°æ³¢ã€‚</span><br><span class="line">ä½äº16 Hzçš„æœºæ¢°æ³¢ï¼Œç§°ä¸ºæ¬¡å£°æ³¢ï¼›</span><br><span class="line">åœ¨16~2Ã—10^4 Hzä¹‹é—´ï¼Œç§°ä¸ºå£°æ³¢ï¼›</span><br><span class="line">é«˜äº2Ã—10^4 Hzçš„æœºæ¢°æ³¢ï¼Œç§°ä¸ºè¶…å£°æ³¢,</span><br><span class="line">åœ¨3Ã—10^8~3Ã—10^11Hzä¹‹é—´çš„æ³¢ï¼Œç§°ä¸ºå¾®æ³¢ã€‚</span><br><span class="line">æ³¢ç±»å‹å’Œä¼ é€’ä»‹è´¨</span><br><span class="line">â‘  çºµæ³¢ï¼šè´¨ç‚¹æŒ¯åŠ¨æ–¹å‘ä¸æ³¢çš„ä¼ æ’­æ–¹å‘ä¸€è‡´çš„æ³¢ï¼Œå®ƒèƒ½åœ¨å›ºä½“ã€æ¶²ä½“å’Œæ°”ä½“ä»‹è´¨ä¸­ä¼ æ’­ï¼›</span><br><span class="line">â‘¡ æ¨ªæ³¢ï¼šè´¨ç‚¹æŒ¯åŠ¨æ–¹å‘å‚ç›´äºä¼ æ’­æ–¹å‘çš„æ³¢ï¼Œå®ƒåªèƒ½åœ¨å›ºä½“ä»‹è´¨ä¸­ä¼ æ’­ï¼› </span><br><span class="line">â‘¢ è¡¨é¢æ³¢ï¼šè´¨ç‚¹çš„æŒ¯åŠ¨ä»‹äºæ¨ªæ³¢ä¸çºµæ³¢ä¹‹é—´ï¼Œæ²¿ç€ä»‹è´¨è¡¨é¢ä¼ æ’­ï¼Œå…¶æŒ¯å¹…éšæ·±åº¦å¢åŠ è€Œè¿…é€Ÿè¡°å‡çš„æ³¢ï¼Œè¡¨é¢æ³¢åªåœ¨å›ºä½“çš„è¡¨é¢ä¼ æ’­ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>è¶…å£°æ³¢åº”ç”¨</strong><br>(1)è¶…å£°æ³¢ç”¨äºé«˜æ•ˆæ¸…æ´—<br>å½“å¼±çš„å£°æ³¢ä¿¡å·ä½œç”¨äºæ¶²ä½“ä¸­æ—¶ï¼Œä¼šå¯¹æ¶²ä½“äº§ç”Ÿä¸€å®šçš„è´Ÿå‹ï¼Œå³æ¶²ä½“ä½“ç§¯å¢åŠ ï¼Œæ¶²ä½“ä¸­åˆ†å­ç©ºéš™åŠ å¤§ï¼Œå½¢æˆè®¸å¤šå¾®å°çš„æ°”æ³¡ï¼›è€Œå½“å¼ºçš„å£°æ³¢ä¿¡å·ä½œç”¨äºæ¶²ä½“æ—¶ï¼Œåˆ™ä¼šå¯¹æ¶²ä½“äº§ç”Ÿä¸€å®šçš„æ­£å‹ï¼Œå³æ¶²ä½“ä½“ç§¯è¢«å‹ç¼©å‡å°ï¼Œæ¶²ä½“ä¸­å½¢æˆçš„å¾®å°æ°”æ³¡è¢«å‹ç¢ã€‚ç»ç ”ç©¶è¯æ˜ï¼šè¶…å£°æ³¢ä½œç”¨äºæ¶²ä½“ä¸­æ—¶ï¼Œæ¶²ä½“ä¸­æ¯ä¸ªæ°”æ³¡çš„ç ´è£‚ä¼šäº§ç”Ÿèƒ½é‡æå¤§çš„å†²å‡»æ³¢ï¼Œç›¸å½“äºç¬é—´äº§ç”Ÿå‡ ç™¾åº¦çš„é«˜æ¸©å’Œé«˜è¾¾ä¸Šåƒä¸ªå¤§æ°”å‹çš„å‹åŠ›ï¼Œè¿™ç§ç°è±¡è¢«ç§°ä¹‹ä¸ºâ€œç©ºåŒ–ä½œç”¨â€ï¼Œè¶…å£°æ³¢æ¸…æ´—æ­£æ˜¯åˆ©ç”¨æ¶²ä½“ä¸­æ°”æ³¡ç ´è£‚æ‰€äº§ç”Ÿçš„å†²å‡»æ³¢æ¥è¾¾åˆ°æ¸…æ´—å’Œå†²åˆ·å·¥ä»¶å†…å¤–è¡¨é¢çš„ä½œç”¨ã€‚è¶…å£°æ¸…æ´—å¤šç”¨äºåŠå¯¼ä½“ã€æœºæ¢°ã€ç»ç’ƒã€åŒ»ç–—ä»ªå™¨ç­‰è¡Œä¸šã€‚<br>(2)è¶…å£°æ³¢ç„Šæ¥(ä¸»è¦ä¸‰è¦ç´ ï¼šæ—¶é—´ã€å‹åŠ›ã€æŒ¯å¹…)<br>å‹ç”µé™¶ç“·æˆ–ç£è‡´ä¼¸ç¼©ææ–™åœ¨é«˜ç”µå‹çª„è„‰å†²ä½œç”¨ä¸‹ï¼Œå¯å¾—åˆ°è¾ƒå¤§åŠŸç‡çš„è¶…å£°æ³¢ï¼Œå¯ä»¥è¢«èšç„¦ï¼Œèƒ½ç”¨äºé›†æˆç”µè·¯åŠå¡‘æ–™çš„ç„Šæ¥ã€‚<br>æ³¨ï¼šé‡‘å±ä¹Ÿè¡Œã€‚<br>(3)è¶…å£°æ³¢åœ¨åŒ»å­¦æ£€æŸ¥ä¸­çš„åº”ç”¨<br>èƒå„¿çš„Bè¶…å½±åƒâ€¦</p>
<p><strong>è¶…å£°æ³¢ä¼ æ„Ÿå™¨</strong><br>è¶…å£°ç‰©ä½ä¼ æ„Ÿå™¨ï¼šå•æ¢èƒ½å™¨ã€åŒæ¢èƒ½å™¨<br>åªè¦æµ‹å¾—è¶…å£°æ³¢è„‰å†²ä»å‘å°„åˆ°æ¥æ”¶çš„æ—¶é—´é—´éš”ï¼Œä¾¿å¯ä»¥æ±‚å¾—å¾…æµ‹çš„ç‰©ä½ã€‚ </p>
<p><strong>è¶…å£°ä¾§åšä¼ æ„Ÿå™¨</strong><br>åŒæ™¶ç›´æ¢å¤´ä¸­çš„å‹ç”µæ™¶ç‰‡å‘å°„è¶…å£°æŒ¯åŠ¨è„‰å†²ï¼Œè¶…å£°è„‰å†²åˆ°è¾¾è¯•ä»¶åº•é¢æ—¶ï¼Œè¢«åå°„å›æ¥ï¼Œå¹¶è¢«å¦ä¸€åªå‹ç”µæ™¶ç‰‡æ‰€æ¥æ”¶ã€‚</p>
<p><strong>è¶…å£°æ³¢æµé‡ä¼ æ„Ÿå™¨</strong><br>ç›®å‰åº”ç”¨è¾ƒå¹¿çš„ä¸»è¦æ˜¯è¶…å£°æ³¢ä¼ æ’­æ—¶é—´å·®æ³•.è¶…å£°æ³¢åœ¨æµä½“ä¸­ä¼ æ’­æ—¶ï¼Œåœ¨é™æ­¢æµä½“å’ŒæµåŠ¨æµä½“ä¸­çš„ä¼ æ’­é€Ÿåº¦æ˜¯ä¸åŒçš„ï¼Œåˆ©ç”¨è¿™ä¸€ç‰¹ç‚¹å¯ä»¥æ±‚å‡ºæµä½“çš„é€Ÿåº¦ï¼Œå†æ ¹æ®ç®¡é“æµä½“çš„æˆªé¢ç§¯ï¼Œ ä¾¿å¯çŸ¥é“æµä½“çš„æµé‡ã€‚</p>
<img src="/Circuit-Lover/%E8%B6%85%E5%A3%B0%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8/%E8%B6%85%E5%A3%B0%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8.jpg" class title="è¶…å£°æ³¢ä¼ æ„Ÿå™¨">


<p><strong>è¶…å£°æ³¢ä¼ æ„Ÿå™¨çš„åº”ç”¨</strong><br>è¶…å£°æ³¢æµé‡è®¡<br>è¶…å£°æ³¢ä¾§åš<br>è¶…å£°æ³¢æ¢ä¼¤<br>è¶…å£°æ³¢æŠ¥è­¦å™¨</p>
]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxç¼–ç¨‹å¸¸è¯†</title>
    <url>/Linux-Lover/Linux%E7%BC%96%E7%A8%8B%E5%B8%B8%E8%AF%86/</url>
    <content><![CDATA[<h5 id="è®¡ç®—æœºå¸¸è¯†QAQ"><a href="#è®¡ç®—æœºå¸¸è¯†QAQ" class="headerlink" title="è®¡ç®—æœºå¸¸è¯†QAQ"></a>è®¡ç®—æœºå¸¸è¯†QAQ</h5><img src="/Linux-Lover/Linux%E7%BC%96%E7%A8%8B%E5%B8%B8%E8%AF%86/1.jpg" class title="è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶ç»„æˆï¼ˆlinuxç‹ä¿æ˜ï¼‰">
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">â–½è´¯ç©¿æ•´ä¸ªç³»ç»Ÿçš„ä¸€ç»„ç”µå­ç®¡é“ç§°ä¸ºæ€»çº¿</span><br><span class="line">ç‰‡å†…æ€»çº¿</span><br><span class="line">ç³»ç»Ÿæ€»çº¿ï¼šæ•°æ®æ€»çº¿DBã€åœ°å€æ€»çº¿CBã€æ§åˆ¶æ€»çº¿CB</span><br><span class="line">å¤–éƒ¨æ€»çº¿</span><br><span class="line"></span><br><span class="line">CPUï¼šè¿ç®—å¯„å­˜å™¨ALUã€æ§åˆ¶å™¨ã€å¯„å­˜å™¨ï¼ˆçŠ¶æ€å¯„å­˜å™¨ã€é€šç”¨å¯„å­˜å™¨ï¼‰</span><br><span class="line">å–æŒ‡ã€è¯‘ç ã€æ‰§è¡Œã€å†™å›ã€è·³è½¬ã€‚pcæŒ‡é’ˆå¤š32ä½ã€‚</span><br><span class="line"></span><br><span class="line">ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ</span><br><span class="line">æ“ä½œç³»ç»Ÿï¼šæœ‰æ•ˆåœ°ç®¡ç†è®¡ç®—æœºç³»ç»Ÿä¸­çš„èµ„æºï¼Œåˆç†åœ°ç®¡ç†è®¡ç®—æœºç³»ç»Ÿçš„å·¥ä½œæµç¨‹ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨çš„ç¨‹åºçš„é›†åˆã€‚</span><br><span class="line"></span><br><span class="line">æ“ä½œç³»ç»Ÿäº”å¤§ä»»åŠ¡</span><br><span class="line">(1)æ–‡ä»¶ç®¡ç†</span><br><span class="line">(2)å¤„ç†å™¨ç®¡ç†</span><br><span class="line">(3)å†…å­˜ç®¡ç†</span><br><span class="line">(4)è®¾å¤‡ç®¡ç†</span><br><span class="line">(5)ä½œä¸šç®¡ç†</span><br></pre></td></tr></table></figure>

<img src="/Linux-Lover/Linux%E7%BC%96%E7%A8%8B%E5%B8%B8%E8%AF%86/2.jpg" class>

<h5 id="linuxç³»ç»Ÿ"><a href="#linuxç³»ç»Ÿ" class="headerlink" title="linuxç³»ç»Ÿ"></a>linuxç³»ç»Ÿ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä½“ç³»ç»“æ„:linuxå†…æ ¸è¢«åˆ’åˆ†ä¸ºå¤šä¸ªå­ç³»ç»Ÿã€‚åŸºæœ¬æœåŠ¡éƒ½é›†æˆåˆ°å†…æ ¸ä¸­,ä¾‹å¦‚é€šä¿¡ã€I/Oã€å†…å­˜å’Œè¿›ç¨‹ç®¡ç†ï¼Œæ›´å…·ä½“çš„æœåŠ¡éƒ½æ˜¯æ’å…¥åˆ°å¾®å†…æ ¸å±‚ä¸­çš„ã€‚ï¼ˆæ”¶åŒ…å’Œå‘åŒ…äº§ç”Ÿå¤§é‡ä¸­æ–­ï¼Œæ”¾åœ¨å†…æ ¸æœ€æœ‰æ•ˆç‡ï¼‰ã€‚</span><br><span class="line">ä¸»è¦å­ç³»ç»Ÿï¼š</span><br><span class="line">ï¼ˆ1ï¼‰ç³»ç»Ÿè°ƒç”¨æ¥å£</span><br><span class="line">ï¼ˆ2ï¼‰è¿›ç¨‹ç®¡ç†</span><br><span class="line">ï¼ˆ3ï¼‰å†…å­˜ç®¡ç†ï¼šå…¶ä¸­ï¼Œä¸ºæ¯ä¸ªå­ç¨‹åºæä¾›äº†ä¸€ä¸ª2^32è™šæ‹Ÿå†…å­˜ã€‚</span><br><span class="line">ä¸ºnä¸ªè¿›ç¨‹æä¾›è®¿é—®çš„ç‰©ç†ç©ºé—´ã€æ®µå¼ç®¡ç†å’Œé¡µå¼ç®¡ç†å°±è¡Œäº†ã€‚linuxè¿›ç¨‹å¹¶å‘æ¨¡å‹.</span><br><span class="line">ï¼ˆ4ï¼‰è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰ï¼šè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ åœ¨ ç³»ç»Ÿè°ƒç”¨å±‚æ¥å£ï¼ˆSCI ï¼‰å’Œå†…æ ¸æ‰€æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿä¹‹é—´æä¾›äº†ä¸€ä¸ªäº¤æ¢å±‚ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ‰©å±•ï¼š Linux å¯ä»¥åœ¨ä¸€ä¸ªå…·æœ‰å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰çš„å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨é‚£äº›ä¸æä¾›MMUçš„å¤„ç†å™¨ä¸Šè¿è¡Œã€‚Linux å†…æ ¸çš„uClinuxç§»æ¤æä¾›äº†å¯¹é MMU çš„æ”¯æŒ</span><br></pre></td></tr></table></figure>
<img src="/Linux-Lover/Linux%E7%BC%96%E7%A8%8B%E5%B8%B8%E8%AF%86/3.jpg" class>


]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxåº”ç”¨ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>è”å‘ç§‘é¢è¯•</title>
    <url>/My-interview-Lover/%E5%8F%91%E7%A7%91%E9%9D%A2%E8%AF%95/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>My interview Lover</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>å®¹å™¨ä½¿ç”¨åº”ç”¨åœºæ™¯å°è®°ğŸ•µï¸</title>
    <url>/C-C-Lover/%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/</url>
    <content><![CDATA[<p>dequeçš„ä½¿ç”¨åœºæ™¯ï¼šæ¯”å¦‚æ’é˜Ÿè´­ç¥¨ç³»ç»Ÿï¼Œå¯¹æ’é˜Ÿè€…çš„å­˜å‚¨å¯ä»¥é‡‡ç”¨dequeï¼Œæ”¯æŒå¤´ç«¯çš„å¿«é€Ÿç§»é™¤ï¼Œå°¾ç«¯çš„å¿«é€Ÿæ·»åŠ ã€‚å¦‚æœé‡‡ç”¨vectorï¼Œåˆ™å¤´ç«¯ç§»é™¤æ—¶ï¼Œä¼šç§»åŠ¨å¤§é‡çš„æ•°æ®ï¼Œé€Ÿåº¦æ…¢ã€‚</p>
<p>vectorä¸dequeçš„æ¯”è¾ƒï¼š</p>
<p>ä¸€ï¼švector.at()æ¯”deque.at()æ•ˆç‡é«˜ï¼Œæ¯”å¦‚vector.at(0)æ˜¯å›ºå®šçš„ï¼Œdequeçš„å¼€å§‹ä½ç½®å´æ˜¯ä¸å›ºå®šçš„ã€‚</p>
<p>äºŒï¼šå¦‚æœæœ‰å¤§é‡é‡Šæ”¾æ“ä½œçš„è¯ï¼ŒvectorèŠ±çš„æ—¶é—´æ›´å°‘ï¼Œè¿™è·ŸäºŒè€…çš„å†…éƒ¨å®ç°æœ‰å…³ã€‚</p>
<p>ä¸‰ï¼šdequeæ”¯æŒå¤´éƒ¨çš„å¿«é€Ÿæ’å…¥ä¸å¿«é€Ÿç§»é™¤ï¼Œè¿™æ˜¯dequeçš„ä¼˜ç‚¹ã€‚</p>
<p>å››ï¼šlistçš„ä½¿ç”¨åœºæ™¯ï¼šæ¯”å¦‚å…¬äº¤è½¦ä¹˜å®¢çš„å­˜å‚¨ï¼Œéšæ—¶å¯èƒ½æœ‰ä¹˜å®¢ä¸‹è½¦ï¼Œæ”¯æŒé¢‘ç¹çš„ä¸ç¡®å®ä½ç½®å…ƒç´ çš„ç§»é™¤æ’å…¥ã€‚</p>
<p>äº”ï¼šsetçš„ä½¿ç”¨åœºæ™¯ï¼šæ¯”å¦‚å¯¹æ‰‹æœºæ¸¸æˆçš„ä¸ªäººå¾—åˆ†è®°å½•çš„å­˜å‚¨ï¼Œå­˜å‚¨è¦æ±‚ä»é«˜åˆ†åˆ°ä½åˆ†çš„é¡ºåºæ’åˆ—ã€‚</p>
<p>å…­ï¼šmapçš„ä½¿ç”¨åœºæ™¯ï¼šæ¯”å¦‚æŒ‰IDå·å­˜å‚¨åä¸‡ä¸ªç”¨æˆ·ï¼Œæƒ³è¦å¿«é€Ÿè¦é€šè¿‡IDæŸ¥æ‰¾å¯¹åº”çš„ç”¨æˆ·ã€‚äºŒå‰æ ‘çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œè¿™æ—¶å°±ä½“ç°å‡ºæ¥äº†ã€‚å¦‚æœæ˜¯vectorå®¹å™¨ï¼Œæœ€åçš„æƒ…å†µä¸‹å¯èƒ½è¦éå†å®Œæ•´ä¸ªå®¹å™¨æ‰èƒ½æ‰¾åˆ°è¯¥ç”¨æˆ·ã€‚</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>äº‹åŠ¡</title>
    <url>/MySql-Lover/%E5%8A%A1/</url>
    <content><![CDATA[<h5 id="äº‹åŠ¡ï¼š"><a href="#äº‹åŠ¡ï¼š" class="headerlink" title="äº‹åŠ¡ï¼š"></a>äº‹åŠ¡ï¼š</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å®šä¹‰ï¼šæ˜¯ç”¨æˆ·å®šä¹‰çš„ä¸€ä¸ªæ•°æ®åº“æ“ä½œåºåˆ—ï¼Œè¿™äº›æ“ä½œè¦ä¹ˆå…¨åšï¼Œè¦ä¹ˆå…¨ä¸åšï¼Œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ã€‚</span><br><span class="line">äº‹åŠ¡çš„ ACID ç‰¹æ€§ï¼šåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒç»­æ€§ã€‚</span><br><span class="line">äº‹åŠ¡æ˜¯å¹¶å‘æ§åˆ¶çš„åŸºæœ¬å•ä½ã€‚</span><br><span class="line">å¹¶å‘æ“ä½œå¸¦æ¥çš„æ•°æ®ä¸ä¸€è‡´æ€§åŒ…æ‹¬ï¼šä¸¢å¤±ä¿®æ”¹ã€ä¸å¯é‡å¤è¯»ã€è¯» â€œè„â€ æ•°æ®ã€‚</span><br><span class="line">è„è¯»ï¼šå°±æ˜¯æŒ‡å½“ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ä½†è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“æ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡è®¿é—®å¹¶ä½¿ç”¨äº†è¿™ä¸ªæ•°æ®ã€‚</span><br><span class="line">ä¸å¯é‡å¤è¯»ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¸¤æ¬¡è¯»æ•°æ®ä¹‹é—´ï¼Œç¬¬äºŒä¸ªäº‹åŠ¡è®¿é—®è¯¥æ•°æ®å¹¶è¿›è¡Œäº†ä¿®æ”¹ã€‚</span><br><span class="line">ä¸¢å¤±ä¿®æ”¹ï¼šä¸¤ä¸ªäº‹åŠ¡è¯»å…¥åŒä¸€æ•°æ®å¹¶ä¿®æ”¹ï¼ŒT2æäº¤çš„ç»“æœç ´åäº†T1æäº¤çš„ç»“æœã€‚ä¾‹å¦‚T1è¯»Aä¿®æ”¹ä¸ºA-1ï¼ŒT2ä¹Ÿè¯»Aä¿®æ”¹ä¸ºA-1ï¼ˆå®é™…ä¸Šåº”è¯¥æ˜¯è¯»A-1ï¼Œä¿®æ”¹ ä¸ºA-2ï¼‰</span><br><span class="line">&lt;éƒ¨åˆ†æ¥æºç‰›å®¢ç½‘&gt;</span><br></pre></td></tr></table></figure>

<p>SHOW ENGINES;#å¼€å¯äº‹åŠ¡<br>SET autocommit=0;<br>START TRANSACTIONï¼›<br>#å¤„ç†<br>UPDATA account set  balance =100 where usename = â€˜mingâ€™;<br>ROLLBACK ;</p>
<p>__savepointä¿å­˜å›æ»š</p>
<p>SET autocommit=0;<br>START TRANSACTION;<br>DELETE FROM account WHERE id=25;<br>SAVEPOINT a;#è®¾ç½®ä¿å­˜ç‚¹<br>DELETE FROM account WHERE id=28;<br>ROLLBACK TO a;#å›æ»šåˆ°ä¿å­˜ç‚¹S<br>ELECT * FROM account;</p>
<p>æ‰©å±•çŸ¥è¯†ç‚¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ¢å¤çš„å®ç°æŠ€æœ¯:å»ºç«‹å†—ä½™æ•°æ®,åˆ©ç”¨å†—ä½™æ•°æ®å®æ–½æ•°æ®åº“æ¢å¤ã€‚</span><br><span class="line">å»ºç«‹å†—ä½™æ•°æ®å¸¸ç”¨æŠ€æœ¯ï¼šæ•°æ®è½¬å‚¨ï¼ˆåŠ¨æ€æµ·é‡è½¬å‚¨ã€åŠ¨æ€å¢é‡è½¬å‚¨ã€é™æ€æµ·é‡è½¬å‚¨ã€é™æ€å¢é‡è½¬å‚¨ï¼‰ã€ç™»è®°æ—¥å¿—æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>MySql Lover</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>å°‘ç”¨å…¨å±€å˜é‡</title>
    <url>/C-C-Lover/%E5%B0%91%E7%94%A8%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>å…¨å±€å˜é‡</td>
<td>åœ¨æ•´ä¸ªå·¥ç¨‹æ–‡ä»¶å†…éƒ½æœ‰æ•ˆï¼›â€œåœ¨å‡½æ•°å¤–å®šä¹‰çš„å˜é‡â€ï¼Œå³ä»å®šä¹‰å˜é‡çš„ä½ç½®åˆ°æœ¬æºæ–‡ä»¶ç»“æŸéƒ½æœ‰æ•ˆã€‚ç”±äºåŒä¸€æ–‡ä»¶ä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½èƒ½å¼•ç”¨å…¨å±€å˜é‡çš„å€¼ï¼Œå› æ­¤å¦‚æœåœ¨ä¸€ä¸ªå‡½æ•°ä¸­æ”¹å˜äº†å…¨å±€å˜é‡çš„å€¼ï¼Œ å°±èƒ½å½±å“åˆ°å…¶ä»–å‡½æ•°ä¸­å…¨å±€å˜é‡çš„å€¼ã€‚</td>
</tr>
<tr>
<td>é™æ€å…¨å±€å˜é‡</td>
<td>åªåœ¨å®šä¹‰å®ƒçš„æ–‡ä»¶å†…æœ‰æ•ˆï¼Œæ•ˆæœå’Œå…¨å±€å˜é‡ä¸€æ ·ï¼Œä¸è¿‡å°±åœ¨æœ¬æ–‡ä»¶å†…éƒ¨ï¼›</td>
</tr>
<tr>
<td>é™æ€å±€éƒ¨å˜é‡</td>
<td>åªåœ¨å®šä¹‰å®ƒçš„å‡½æ•°å†…æœ‰æ•ˆï¼Œåªæ˜¯ç¨‹åºä»…åˆ†é…ä¸€æ¬¡å†…å­˜ï¼Œå‡½æ•°è¿”å›åï¼Œè¯¥å˜é‡ä¸ä¼šæ¶ˆå¤±ï¼›é™æ€å±€éƒ¨å˜é‡çš„ç”Ÿå­˜æœŸè™½ç„¶ä¸ºæ•´ä¸ªå·¥ç¨‹ï¼Œä½†æ˜¯å…¶ä½œç”¨ä»ä¸å±€éƒ¨å˜é‡ç›¸åŒï¼Œå³åªèƒ½åœ¨å®šä¹‰è¯¥å˜é‡çš„å‡½æ•°å†…ä½¿ç”¨è¯¥å˜é‡ã€‚é€€å‡ºè¯¥å‡½æ•°åï¼Œ å°½ç®¡è¯¥å˜é‡è¿˜ç»§ç»­å­˜åœ¨ï¼Œä½†ä¸èƒ½ä½¿ç”¨å®ƒã€‚</td>
</tr>
<tr>
<td>å±€éƒ¨å˜é‡</td>
<td>åœ¨å®šä¹‰å®ƒçš„å‡½æ•°å†…æœ‰æ•ˆï¼Œä½†æ˜¯å‡½æ•°è¿”å›åå¤±æ•ˆã€‚â€œåœ¨å‡½æ•°å†…å®šä¹‰çš„å˜é‡â€ï¼Œå³åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼Œåªåœ¨æœ¬å‡½æ•°èŒƒå›´å†…æœ‰æ•ˆã€‚</td>
</tr>
</tbody></table>
<p>__æ³¨æ„</p>
<p>å…¨å±€å˜é‡å’Œé™æ€å˜é‡å¦‚æœæ²¡æœ‰æ‰‹å·¥åˆå§‹åŒ–ï¼Œåˆ™ç”±ç¼–è¯‘å™¨åˆå§‹åŒ–ä¸º0ã€‚å±€éƒ¨å˜é‡çš„å€¼ä¸å¯çŸ¥ã€‚é™æ€å±€éƒ¨å˜é‡ä¸å…¨å±€å˜é‡æœ€æ˜æ˜¾çš„åŒºåˆ«å°±åœ¨äºï¼šå…¨å±€å˜é‡åœ¨å…¶å®šä¹‰åæ‰€æœ‰å‡½æ•°éƒ½èƒ½ç”¨ï¼Œä½†æ˜¯é™æ€å±€éƒ¨å˜é‡åªèƒ½åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢ç”¨ã€‚<br>æ»¥ç”¨å…¨å±€å˜é‡ä¼šé€ æˆä¸å¿…è¦çš„å¸¸é‡é¢‘ç¹ä½¿ç”¨ï¼Œç‰¹åˆ«å½“è¿™ä¸ªå¸¸é‡æ²¡æœ‰ç”¨å®å®šä¹‰â€œæ­£åâ€æ—¶ï¼Œä»£ç é˜…è¯»èµ·æ¥å°†ä¸‡åˆ†åƒåŠ›ã€‚</p>
<p>__æœ‰ä»€ä¹ˆå¯¹ç­–ï¼Ÿ</p>
<ol>
<li>èƒ½ä¸ç”¨å…¨å±€å˜é‡å°½é‡ä¸ç”¨ã€‚</li>
<li>å¦‚æœä¸å¯é¿å…éœ€è¦ç”¨åˆ°ï¼Œé‚£èƒ½è—å¤šæ·±å°±è—å¤šæ·±ã€‚<br>1)å¦‚æœåªæœ‰æŸ.cæ–‡ä»¶ç”¨ï¼Œå°±staticåˆ°è¯¥æ–‡ä»¶ä¸­ï¼Œé¡ºä¾¿æŠŠç»“æ„ä½“å®šä¹‰ä¹Ÿæ”¶è¿›æ¥ï¼›<br>2)å¦‚æœåªæœ‰ä¸€ä¸ªå‡½æ•°ç”¨ï¼Œé‚£å°±staticåˆ°å‡½æ•°é‡Œé¢å»ï¼›<br>3)å¦‚æœéè¦å¼€æ”¾å‡ºå»è®©äººè¯»å–ï¼Œé‚£å°±ç”¨å‡½æ•°returnå‡ºå»ï¼Œè¿™æ ·å°±æ˜¯åªè¯»å±æ€§äº†ï¼›<br>4)å¦‚æœéè¦é­äººè¹‚èºèµ‹å€¼ï¼Œå¥½å§ï¼Œæˆ‘å¼€æ”¾å‡½æ•°æ¥å£è®©ä½ ä¼ å‚èµ‹å€¼<br>5)å®åœ¨éè¦externæˆ‘ï¼Œæˆ‘è¿˜å¯ä»¥ä¸¥æ ¼æ§åˆ¶åŒ…å«æˆ‘.hæ¡£çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ”¾åˆ°å…¬å…±çš„includes.hä¸­è¢«äººå›´è§‚ï¼Œä¸¢äººç°çœ¼ã€‚<br>6ï¼‰å½“ä¸€ä¸ªæ¨¡å—é‡Œé¢çš„å…¨å±€å˜é‡è¶…è¿‡3ä¸ª(å«)æ—¶ï¼Œå°±ç”¨ç»“æ„ä½“åŒ…èµ·æ¥å§ã€‚è¦å½’0ä¾¿ä¸€èµ·å½’0ï¼Œçœå¾—ä¸¢ä¸‰è½å››çš„ã€‚</li>
</ol>
<p>å…¬ä¼—å·ï¼šC/C++æŠ€æœ¯æ–‡ç« <br>å‚è€ƒèµ„æ–™ï¼š<br>ã€1ã€‘ä½šå. å…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡ã€é™æ€å…¨å±€å˜é‡ã€é™æ€å±€éƒ¨å˜é‡çš„åŒºåˆ«<br>ã€2ã€‘ä½šå. åµŒå…¥å¼Cç¼–ç¨‹ç»éªŒä¹‹å…¨å±€å˜é‡çŒ›äºè™<br>ã€3ã€‘ã€ŠC11æ ‡å‡†æ–‡æ¡£ã€‹</p>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>åä¸ºé¢è¯•</title>
    <url>/My-interview-Lover/%E5%8D%8E%E4%B8%BA%E9%9D%A2%E8%AF%95/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>My interview Lover</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªæŒ¯è¡äº§ç”Ÿæ­£å¼¦æ³¢ã€æ–¹æ³¢ã€ä¸‰è§’æ³¢</title>
    <url>/Circuit-Lover/%E8%87%AA%E6%8C%AF%E8%8D%A1%E4%BA%A7%E7%94%9F%E6%AD%A3%E5%BC%A6%E6%B3%A2%E3%80%81%E6%96%B9%E6%B3%A2%E3%80%81%E4%B8%89%E8%A7%92%E6%B3%A2/</url>
    <content><![CDATA[<h4 id="æŒ¯è¡ç”µè·¯çŸ¥è¯†"><a href="#æŒ¯è¡ç”µè·¯çŸ¥è¯†" class="headerlink" title="æŒ¯è¡ç”µè·¯çŸ¥è¯†"></a>æŒ¯è¡ç”µè·¯çŸ¥è¯†</h4><h5 id="1ã€æŒ¯è¡æ¡ä»¶"><a href="#1ã€æŒ¯è¡æ¡ä»¶" class="headerlink" title="1ã€æŒ¯è¡æ¡ä»¶"></a>1ã€æŒ¯è¡æ¡ä»¶</h5><img src="/Circuit-Lover/%E8%87%AA%E6%8C%AF%E8%8D%A1%E4%BA%A7%E7%94%9F%E6%AD%A3%E5%BC%A6%E6%B3%A2%E3%80%81%E6%96%B9%E6%B3%A2%E3%80%81%E4%B8%89%E8%A7%92%E6%B3%A2/t1.jpg" class>
<h5 id="2ã€èµ·æŒ¯ã€ç¨³å¹…"><a href="#2ã€èµ·æŒ¯ã€ç¨³å¹…" class="headerlink" title="2ã€èµ·æŒ¯ã€ç¨³å¹…"></a>2ã€èµ·æŒ¯ã€ç¨³å¹…</h5><img src="/Circuit-Lover/%E8%87%AA%E6%8C%AF%E8%8D%A1%E4%BA%A7%E7%94%9F%E6%AD%A3%E5%BC%A6%E6%B3%A2%E3%80%81%E6%96%B9%E6%B3%A2%E3%80%81%E4%B8%89%E8%A7%92%E6%B3%A2/t2.jpg" class>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(1)æ— è¾“å…¥æºï¼Œèµ·æŒ¯ä¿¡å·æºæ¥è‡ªå“ªé‡Œï¼Ÿ</span><br><span class="line">ç­”ï¼šç”µå™¨å†…éƒ¨å™ªå£°ä»¥åŠç”µæºæ¥é€šæ‰°åŠ¨ã€‚</span><br><span class="line">(2)ç¨³å¹…ä½œç”¨ï¼Ÿ</span><br><span class="line">ç­”ï¼šä¿¡å·è¾“å‡ºå¹…åº¦è¾¾åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œä¼šå¤±çœŸã€‚å¿…é¡»é€šè¿‡è°ƒå¹…é™åˆ¶ï¼Œä½¿å¾—æŒ¯å¹…å¹³è¡¡å›åˆ°AF = 1ã€‚</span><br></pre></td></tr></table></figure>
<p>3ã€åŸºæœ¬ç»„æˆéƒ¨åˆ†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">â–½æ”¾å¤§ç”µè·¯</span><br><span class="line">â–½åé¦ˆç”µè·¯</span><br><span class="line">â–½é€‰é¢‘ç½‘ç»œ</span><br><span class="line">â–½ç¨³å¹…ç¯èŠ‚</span><br></pre></td></tr></table></figure>
<p>ç§»ç›¸å¼æ­£å¼¦æŒ¯è¡ç”µè·¯</p>
<img src="/Circuit-Lover/%E8%87%AA%E6%8C%AF%E8%8D%A1%E4%BA%A7%E7%94%9F%E6%AD%A3%E5%BC%A6%E6%B3%A2%E3%80%81%E6%96%B9%E6%B3%A2%E3%80%81%E4%B8%89%E8%A7%92%E6%B3%A2/t4.jpg" class>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ‰©å±•çŸ¥è¯†ç‚¹ï¼š</span><br><span class="line">1. ç”µé˜»ä¸Šçš„ç”µå‹ç”µæµåŒç›¸ä½</span><br><span class="line">2. ç”µæ„Ÿä¸Šçš„ç”µæµè½åç”µå‹90Â°ç›¸ä½</span><br><span class="line">3. ç”µå®¹ä¸Šçš„ç”µæµè¶…å‰ç”µå‹90Â°ç›¸ä½</span><br></pre></td></tr></table></figure>
<p>RCæŒ¯è¡ç”µè·¯</p>
<img src="/Circuit-Lover/%E8%87%AA%E6%8C%AF%E8%8D%A1%E4%BA%A7%E7%94%9F%E6%AD%A3%E5%BC%A6%E6%B3%A2%E3%80%81%E6%96%B9%E6%B3%A2%E3%80%81%E4%B8%89%E8%A7%92%E6%B3%A2/t3.jpg" class>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ³¨ï¼šRfä¸ºçƒ­æ•ç”µé˜»ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="è¯¾è®¾è®¾è®¡ï¼š100Hzä¸5000Hz"><a href="#è¯¾è®¾è®¾è®¡ï¼š100Hzä¸5000Hz" class="headerlink" title="è¯¾è®¾è®¾è®¡ï¼š100Hzä¸5000Hz"></a>è¯¾è®¾è®¾è®¡ï¼š100Hzä¸5000Hz</h4><h5 id="åŸç†è®¾è®¡"><a href="#åŸç†è®¾è®¡" class="headerlink" title="åŸç†è®¾è®¡"></a>åŸç†è®¾è®¡</h5><p>æ­£å¼¦æ³¢å‘ç”Ÿ</p>
<img src="/Circuit-Lover/%E8%87%AA%E6%8C%AF%E8%8D%A1%E4%BA%A7%E7%94%9F%E6%AD%A3%E5%BC%A6%E6%B3%A2%E3%80%81%E6%96%B9%E6%B3%A2%E3%80%81%E4%B8%89%E8%A7%92%E6%B3%A2/t6.jpg" class>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">f0=1/(2Ï€âˆšR1R2C1C2)  </span><br><span class="line">â‘ å¯ä»¥ä¿®æ”¹ R1 R2 C1 C2 æ¥äº§ç”Ÿ100Hz å’Œ 5000Hz</span><br><span class="line">é€šè¿‡è°ƒèŠ‚R1ï¼ŒR2ï¼ŒC1ï¼ŒC2çš„å€¼ï¼Œä½¿å¾—f0=100Hzã€‚å…ˆå–C1=100nFï¼ŒC2=100nFï¼Œç„¶åå†ç¡®å®šR1ï¼ŒR2ï¼Œè€ƒè™‘åˆ°è¦å¾—åˆ°ç²¾ç¡®çš„è¾“å‡ºå€¼ï¼Œè®¡ç®—å¾—å‡ºR1=16K,R2=16Kã€‚</span><br><span class="line">ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œ16ké‡‡ç”¨20kæ»‘åŠ¨å˜é˜»å™¨ã€‚</span><br><span class="line">â‘¡é€šè¿‡è°ƒèŠ‚R1ï¼ŒR2ï¼ŒC1ï¼ŒC2çš„å€¼ï¼Œä½¿å¾—f0=5000Hzã€‚å…ˆå–C1=1nFï¼ŒC2=1nFï¼Œç„¶åå†ç¡®å®šR1ï¼ŒR2ï¼Œè€ƒè™‘åˆ°è¦å¾—åˆ°ç²¾ç¡®çš„è¾“å‡ºå€¼ï¼Œè®¡ç®—å¾—å‡ºR1=1K,R2â‰ˆ640Î©ã€‚</span><br><span class="line">ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œ 640Î©é‡‡ç”¨1kæ»‘åŠ¨å˜é˜»å™¨</span><br></pre></td></tr></table></figure>
<p>æ­£å¼¦æ³¢è½¬æ–¹æ³¢ã€ä¸‰è§’æ³¢</p>
<img src="/Circuit-Lover/%E8%87%AA%E6%8C%AF%E8%8D%A1%E4%BA%A7%E7%94%9F%E6%AD%A3%E5%BC%A6%E6%B3%A2%E3%80%81%E6%96%B9%E6%B3%A2%E3%80%81%E4%B8%89%E8%A7%92%E6%B3%A2/t7.jpg" class>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ­£å¼¦æ³¢è½¬æ–¹æ³¢ï¼šè¿‡é›¶æ¯”è¾ƒå™¨</span><br><span class="line">æ–¹æ³¢è½¬ä¸‰è§’æ³¢: ç§¯åˆ†æ”¾å¤§å™¨</span><br></pre></td></tr></table></figure>
<h5 id="proteusä»¿çœŸ"><a href="#proteusä»¿çœŸ" class="headerlink" title="proteusä»¿çœŸ"></a>proteusä»¿çœŸ</h5><img src="/Circuit-Lover/%E8%87%AA%E6%8C%AF%E8%8D%A1%E4%BA%A7%E7%94%9F%E6%AD%A3%E5%BC%A6%E6%B3%A2%E3%80%81%E6%96%B9%E6%B3%A2%E3%80%81%E4%B8%89%E8%A7%92%E6%B3%A2/t8.jpg" class>

<h5 id="å®ç‰©æ¼”ç¤º"><a href="#å®ç‰©æ¼”ç¤º" class="headerlink" title="å®ç‰©æ¼”ç¤º"></a>å®ç‰©æ¼”ç¤º</h5><img src="/Circuit-Lover/%E8%87%AA%E6%8C%AF%E8%8D%A1%E4%BA%A7%E7%94%9F%E6%AD%A3%E5%BC%A6%E6%B3%A2%E3%80%81%E6%96%B9%E6%B3%A2%E3%80%81%E4%B8%89%E8%A7%92%E6%B3%A2/t9.jpg" class>

<h5 id="è¯¾è®¾æ€»ç»“"><a href="#è¯¾è®¾æ€»ç»“" class="headerlink" title="è¯¾è®¾æ€»ç»“"></a>è¯¾è®¾æ€»ç»“</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æˆ‘åœ¨è¿™æ¬¡è¯¾ç¨‹è®¾è®¡ä¸­é‡åˆ°ï¼Œä¸€ç›´éƒ½è°ƒä¸å‡ºç†æƒ³çš„æ³¢å½¢ï¼Œæ£€æŸ¥äº†å¾ˆå¤šä¸œè¥¿ï¼Œåƒæ¥çº¿é—®é¢˜ã€ç”µè·¯é—®é¢˜ã€ç”µæºé—®é¢˜ã€ç¤ºæ³¢å™¨é—®é¢˜åœ°çº¿é—®é¢˜ç­‰ç­‰ï¼Œæ‰€ä»¥æˆ‘æ€»ç»“å‡ºï¼Œå¯¹äºè¦æ±‚ç²¾åº¦å¾ˆé«˜çš„ç”µè·¯ï¼Œä¸€æ—¦å‡ºç°å®é™…é—®é¢˜æ—¶ï¼Œåº”è¯¥å…·å¤‡ä»¥ä¸‹ä¸‰ä¸ªç‚¹ï¼š</span><br><span class="line">1.é‡æ–°å®¡æŸ¥ç”µè·¯åŸç†å›¾ï¼Œè®¡ç®—ç›¸å…³æ•°æ®ï¼Œè¿è¡Œä»¿çœŸç»“æœã€‚</span><br><span class="line">2.å…ƒä»¶å™¨ä»¶çš„æŸåæˆ–æ€§èƒ½çš„å½±å“ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ”¾å¤§ç”µè·¯ä¸­ç¨æœ‰åå·®ï¼Œç»“æœå°±ä¼šç›¸å·®å¾ˆå¤§ï¼Œæ­¤æ¬¡ä¸ªäººè§‰å¾—æ—¶é—´è¾ƒä¸ºç´§è¿«ï¼Œé€‰æ‹©é™„è¿‘çš„å…ƒä»¶å–å®¶ï¼Œç»“æœæ€§èƒ½è¿œè¿œè¾¾ä¸åˆ°æ‰€éœ€çš„è¦æ±‚ã€‚</span><br><span class="line">3.è¦æœ‰è¶³å¤Ÿçš„è€å¿ƒå’Œå†·é™çš„æ€è€ƒï¼Œå½“å›¾å½¢å‡ºç°å·®å¼‚æ—¶ï¼Œå†·é™çš„æ€è€ƒæ˜¯å¿…ä¸å¯å°‘çš„ã€‚</span><br><span class="line">é€šè¿‡è¿™æ¬¡è¯¾ç¨‹è®¾è®¡,æˆ‘æ‡‚å¾—äº†è¦å®Œæˆä¸€ä¸ªç”µè·¯çš„è®¾è®¡,ç†è®ºåŸºç¡€æ˜¯æ ¹åŸº,å®è·µæ“ä½œæ˜¯å®Œæˆå®ç‰©çš„é‡è¦éƒ¨åˆ†,è€Œåˆ›æ–°èƒ½åŠ›åˆ™å†³å®šäº†ä¸€ä¸ªç”µè·¯çš„ä»·å€¼,å› ä¸ºè®¾è®¡ä¸€ä¸ªç”µè·¯,å†³ä¸æ˜¯ç®€å•åœ°æŒ‰è¯¾æœ¬çš„ç”µè·¯å›¾è¿›è¡Œç„Šæ¥æˆå‹,æˆ‘ä»¬è¦è¿›è¡Œç”µè·¯å„ä¸ªå…ƒä»¶å‚æ•°çš„è®¡ç®—,è¿™ä¸ªæ¶‰åŠæˆ‘ä»¬æ‰€æŒæ¡çš„ç†è®ºçŸ¥è¯†,å…ƒä»¶çš„è®¡ç®—æ˜¯è®¾è®¡ä¸­è¾ƒä¸ºé‡è¦çš„ä¸€éƒ¨åˆ†,è®¡ç®—å‡†äº†,åˆ™è®¾è®¡å‡ºæ¥çš„ç”µè·¯è¯¯å·®ä¸å¤§,å¦åˆ™,è®¾è®¡å‡ºæ¥çš„ç”µè·¯æ€§èƒ½æŒ‡æ ‡è·Ÿè¦æ±‚ç›¸å·®ç”šè¿œã€‚</span><br><span class="line">æœ€å›°éš¾çš„æ˜¯å½“ç”µè·¯å‡ºç°é”™è¯¯æ˜¯,å¦‚ä½•æ£€æµ‹å‡ºé”™è¯¯ä¹‹å¤„,å¦‚ä½•æ’é™¤é”™è¯¯,å®ƒè€ƒéªŒäº†æˆ‘ä»¬å¦‚ä½•è¿ç”¨ç†è®ºçŸ¥è¯†å’Œå®é™…çš„è°ƒè¯•çš„èƒ½åŠ›, è¿™ä¹Ÿæ˜¯æˆ‘å¤§ä¸‰è¿™ä¸€å¹´æœ€éœ€è¦æ³¨é‡å’Œæé«˜çš„åœ°æ–¹ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
  </entry>
  <entry>
    <title>ä¼ æ„Ÿå™¨çš„ç‰¹ç‚¹</title>
    <url>/Circuit-Lover/%E5%99%A8%E7%9A%84%E7%89%B9%E7%82%B9/</url>
    <content><![CDATA[<p>1.ä»€ä¹ˆå«ä¼ æ„Ÿå™¨? </p>
<p>èƒ½å¤Ÿæ„Ÿå—è§„å®šçš„è¢«æµ‹é‡å¹¶æŒ‰ç…§ä¸€å®šè§„å¾‹è½¬åŒ–æˆå¯ç”¨è¾“å‡ºä¿¡å·çš„å™¨ä»¶æˆ–è£…ç½®ã€‚</p>
<p>2ã€ä¼ æ„Ÿå™¨å…±æ€§æ˜¯ä»€ä¹ˆï¼Ÿ<br>ä¼ æ„Ÿå™¨çš„å…±æ€§å°±æ˜¯åˆ©ç”¨ç‰©ç†è§„å¾‹æˆ–ç‰©è´¨çš„ç‰©ç†ã€ç”Ÿç‰©ã€åŒ–å­¦ç‰¹æ€§ï¼Œå°†éç”µé‡ä¿¡å·ï¼ˆä½ç§»ã€é€Ÿåº¦ã€åŠ›ç­‰ï¼‰è¾“å…¥è½¬æ¢æˆç”µé‡ï¼ˆç”µå‹ã€ç”µæµã€ç”µå®¹ç­‰ï¼‰è¾“å‡ºã€‚</p>
<p>3ã€ä¼ æ„Ÿå™¨ç”±å“ªäº›éƒ¨åˆ†ç»„æˆï¼Ÿ<br>ä¼ æ„Ÿå™¨ä¸€èˆ¬æ˜¯ç”±æ•æ„Ÿå…ƒä»¶ã€è½¬åŒ–å…ƒä»¶å’Œå˜æ¢ç”µè·¯ä¸‰éƒ¨åˆ†ç»„æˆã€‚</p>
<p>4ã€æ”¹å–„ä¼ æ„Ÿå™¨ï¼Ÿ<br>ï¼ˆ1ï¼‰å·®åŠ¨æŠ€æœ¯<br>ï¼ˆ2ï¼‰å¹³å‡æŠ€æœ¯<br>ï¼ˆ3ï¼‰è¡¥å¿ä¸ä¿®æ­£<br>ï¼ˆ4ï¼‰å¹²æ‰°æŠ‘åˆ¶<br>ï¼ˆ5ï¼‰ç¨³å®šæ€§å¤„ç†</p>
]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>cvteé¢è¯•</title>
    <url>/My-interview-Lover/te%E9%9D%A2%E8%AF%95/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>My interview Lover</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–‡ä»¶å¤¹ç³»ç»Ÿç›®å½•</title>
    <url>/Linux-Lover/%E5%A4%B9%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95/</url>
    <content><![CDATA[<p><strong>æ–‡ä»¶å¤¹ç³»ç»Ÿç›®å½•</strong></p>
<table>
<thead>
<tr>
<th>æ–‡ä»¶ç›®å½•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>/bin</td>
<td>å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™äº›å‘½ä»¤åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸‹ä¹Ÿèƒ½å¤Ÿä½¿ç”¨ã€‚å¯ä»¥è¢«rootå’Œä¸€èˆ¬çš„è´¦å·ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td>/boot</td>
<td>Ubuntuå†…æ ¸å’Œå¯åŠ¨æ–‡ä»¶ï¼Œæ¯”å¦‚vmlinuz-xxxã€‚grubå¼•å¯¼è£…è½½ç¨‹åºã€‚</td>
</tr>
<tr>
<td>/cdrom</td>
<td>å…‰ç›˜</td>
</tr>
<tr>
<td>/dev</td>
<td>è®¾å¤‡é©±åŠ¨æ–‡ä»¶  sda *ç£ç›˜é©±åŠ¨æ–‡ä»¶</td>
</tr>
<tr>
<td>/etc</td>
<td>å­˜æ”¾ä¸€äº›ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚ç”¨æˆ·è´¦å·å’Œå¯†ç æ–‡ä»¶ï¼Œå„ç§æœåŠ¡çš„èµ·å§‹åœ°å€ã€‚</td>
</tr>
<tr>
<td>/home</td>
<td>ç³»ç»Ÿé»˜è®¤çš„ç”¨æˆ·ä¸»æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬åˆ›å»ºç”¨æˆ·è´¦æˆ·çš„æ—¶å€™ï¼Œé»˜è®¤çš„ç”¨æˆ·ä¸»æ–‡ä»¶å¤¹éƒ½ä¼šæ”¾åˆ°æ­¤ç›®å½•ä¸‹ã€‚</td>
</tr>
<tr>
<td>/lib</td>
<td>å­˜æ”¾åº“æ–‡ä»¶</td>
</tr>
<tr>
<td>/media</td>
<td>æ­¤ç›®å½•ä¸‹æ”¾ç½®å¯æ’æ‹”è®¾å¤‡ï¼Œæ¯”å¦‚SDå¡ï¼Œæˆ–è€…Uç›˜å°±æ˜¯æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸­ã€‚</td>
</tr>
<tr>
<td>/mnt</td>
<td>ç”¨æˆ·å¯ä½¿ç”¨çš„æŒ‚è½½ç‚¹ï¼Œå¦‚æœè¦æŒ‚è½½ä¸€äº›é¢å¤–çš„è®¾å¤‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŒ‚è½½åˆ°æ­¤å¤„ã€‚</td>
</tr>
<tr>
<td>/opt</td>
<td>å¯é€‰çš„æ–‡ä»¶å’Œç¨‹åºå­˜æ”¾ç›®å½•ï¼Œç»™ç¬¬ä¸‰æ–¹è½¯ä»¶æ”¾ç½®çš„ç›®å½•ã€‚</td>
</tr>
<tr>
<td>/root</td>
<td>rootç”¨æˆ·ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ç›®å½•ã€‚</td>
</tr>
<tr>
<td>/sbin</td>
<td>å’Œ/binç±»ä¼¼ï¼Œä¹Ÿæ˜¯å­˜æ”¾ä¸€äº›äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚sbinä¸‹é¢çš„ä¸€èˆ¬æ˜¯ç³»ç»Ÿå¼€æœºè¿‡ç¨‹ä¸­æ‰€éœ€è¦çš„å‘½ä»¤ã€‚</td>
</tr>
<tr>
<td>/run</td>
<td>è¿è¡Œæœ‰å…³çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>/snap</td>
<td>åŒ…ç®¡ç†å·¥å…·</td>
</tr>
<tr>
<td>/srv</td>
<td>æœåŠ¡ç›¸å…³ç›®å½•ã€‚æ¯”å¦‚ç½‘ç»œæœåŠ¡ã€‚</td>
</tr>
<tr>
<td>/sys</td>
<td>è®°å½•å†…æ ¸ä¿¡æ¯ï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚</td>
</tr>
<tr>
<td>/tmp</td>
<td>ä¸´æ—¶ç›®å½•</td>
</tr>
<tr>
<td>/var</td>
<td>å­˜æ”¾ä¸€äº›å˜åŒ–çš„æ–‡ä»¶ï¼Œæ¯”å¦‚æ—¥å¿—æ–‡ä»¶</td>
</tr>
<tr>
<td>/usr</td>
<td>usrä¸æ˜¯userçš„ç¼©å†™ï¼Œè€Œæ˜¯UNIX Software Resourceçš„ç¼©å†™ï¼Œå­˜æ”¾äºç³»ç»Ÿç”¨æˆ·æœ‰å…³çš„æ–‡ä»¶ï¼Œä¼šå ç”¨å¾ˆå¤§çš„å­˜å‚¨ç©ºé—´ï¼  du -sh</td>
</tr>
<tr>
<td>/proc</td>
<td>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œæ•°æ®æ”¾ç½®åˆ°å†…å­˜ä¸­ï¼Œå­˜æ”¾ç³»ç»Ÿè¿è¡Œä¿¡æ¯</td>
</tr>
</tbody></table>
<p>__ å…¶ä»–:__<br> Cat /proc/cpuinfo   cpuä¿¡æ¯<br> ls /sys/bus/platform  è®¾å¤‡æ ‘ï¼ˆdevice ã€ driverï¼‰<br>æ­£å¸¸æƒ…å†µï¼Œåº”è¯¥æ˜¯Ownerå¯ä»¥è¯»å†™ï¼Œallå¯è¯»ï¼Œrootå¯ä»¥ä¿®æ”¹å¯æ‰§è¡Œæƒé™æ‰å¯¹ã€‚<br>æ­£å¸¸æƒ…å†µï¼Œå¯¹äºç›®å½•ï¼Œåº”è¯¥æƒé™è®¾å®šä¸º744ï¼Œå¯¹äºæ–‡ä»¶é»˜è®¤æƒé™åº”è¯¥è®¾å®šä¸º644ã€‚<br>ç”¨æˆ·ç§æœ‰æ–‡ä»¶ï¼Œæƒé™åº”è¯¥è®¾å®šä¸º600ã€‚</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>ç£ç›˜æ–‡ä»¶ã€å†…å­˜å‘½ä»¤</title>
    <url>/Linux-Lover/%E5%86%85%E5%AD%98%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>ls /dev/sd*</p>
<p>dfï¼šåˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿçš„æ•´ä½“ç£ç›˜ä½¿ç”¨é‡ã€‚ä¸»è¦æŸ¥çœ‹ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ä½¿ç”¨é‡ï¼Œ<br>du:è¯„ä¼°æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨é‡ï¼Œä¸»è¦æŸ¥çœ‹å•ä¸ªæ–‡ä»¶çš„å¤§å°ã€‚<br>eg:du -h â€“max-depth=1  æ˜¾ç¤ºä¸€å±‚</p>
<p>ç£ç›˜çš„æŒ‚è½½å’Œå¸è½½mountå’Œumountå‘½ä»¤</p>
<p>sudo umount media/ming/MING    </p>
<p>mkdir udisk</p>
<p>sudo mount /dev/sdb1  /media/ming/udisk</p>
<p>sudo mount -o iocharset=utf8  /dev/sdb1 /media/ming/udisk //ä¸­æ–‡æ˜¾ç¤º</p>
<p>åˆ†åŒºæŒ‚è½½ä¸èƒ½è¿›è¡Œåˆ†åŒºæ“ä½œ<br>sudo fdisk /dev/sdb</p>
<p>ç£ç›˜æ ¼å¼åŒ–<br>mkfs -t vfat /dev/sdx</p>
<p>3ã€ç£ç›˜æ ¼å¼åŒ–</p>
<p>   ç£ç›˜åˆ†åŒºåˆ›å»ºå¥½ä»¥åå°±å¯ä»¥æ ¼å¼åŒ–ç£ç›˜ï¼Œä½¿ç”¨å‘½ä»¤mkfsã€‚å¦‚ï¼š<br>sudo mkfs -t vfat/dev/sdx<br>   æŠŠUç›˜æ‹”äº†é‡æ’ä¸Šå»ï¼Œé˜²æ­¢æŠ¥é”™</p>
<p>4ã€free  -h æŸ¥çœ‹å†…å­˜ </p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>Cå­—ç¬¦ä¸²å¸¸ç”¨å‡½æ•°</title>
    <url>/C-C-Lover/%E7%AC%A6%E4%B8%B2%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<p>å­—ç¬¦ä¸²è¿æ¥å‡½æ•° strcatã€strncat</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">char  a[10] = <span class="string">"123"</span>;</span><br><span class="line">char b[] = <span class="string">"456"</span>;</span><br><span class="line"></span><br><span class="line">strcat(a,b);//123456</span><br><span class="line">strncat(a,b,2);//1235</span><br></pre></td></tr></table></figure>

<p>å­—ç¬¦ä¸²å¤åˆ¶å‡½æ•° strcpyã€strncpy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">strcpy(a,b);//123456</span><br><span class="line">strncpy(a,b,2);//1235</span><br></pre></td></tr></table></figure>
<p>å­—ç¬¦ä¸²æ¯”è¾ƒstrcmp</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">strcmp(str1,str2);</span><br></pre></td></tr></table></figure>
<p>å­—ç¬¦é•¿åº¦strlen</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">strlen(str);</span><br></pre></td></tr></table></figure>
<p>å­—ç¬¦åˆ†è§£strtok</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">strtokå‡½æ•°çš„ä½œç”¨æ˜¯æŠŠå­—ç¬¦ä¸²ä»¥è§„å®šçš„å­—ç¬¦åˆ†å‰²å¼€ï¼š</span><br><span class="line">p &#x3D; strtok(buf, &quot;@&quot;);Â </span><br><span class="line">pä¸ºæŒ‡é’ˆï¼Œbufä¹Ÿæ˜¯æŒ‡é’ˆï¼Œè¿™å¥ä»£ç çš„æ„æ€å°±æ˜¯æŠŠbufä¸­çš„å­—ç¬¦ä¸²ä»¥&quot;@&quot;ä¸ºåˆ†éš”ç¬¦åˆ†å‰²ä¿å­˜åˆ°æŒ‡é’ˆpä¸­ã€‚</span><br><span class="line">å†æ¬¡è°ƒç”¨strtokå‡½æ•°æ—¶ï¼Œä¸éœ€è¦å†å†™bufã€‚å³ï¼š</span><br><span class="line">p &#x3D; strtok(NULL, &quot;@&quot;);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C/C++ Lover</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>vim æ“ä½œéšè®°</title>
    <url>/Linux-Lover/vim%20%E6%93%8D%E4%BD%9C%E9%9A%8F%E8%AE%B0/</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å‘½ä»¤æ¨¡å¼</span><br><span class="line"></span><br><span class="line">ç§»åŠ¨ï¼šé¦–è¡Œgg æœ«è¡ŒG</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ï¼šyy  ç²˜è´´p</span><br><span class="line"></span><br><span class="line">å‰ªåˆ‡ï¼šdd      ç•™ç©ºå‰ªåˆ‡ï¼šD</span><br><span class="line"></span><br><span class="line">æ’¤é”€ï¼šu   æ¢å¤ï¼šcrtl +  r</span><br><span class="line"></span><br><span class="line">ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥æ¨¡å¼ï¼‰</span><br><span class="line"></span><br><span class="line">i a     esc</span><br><span class="line"></span><br><span class="line">æœ«è¡Œæ¨¡å¼ï¼ˆå°¾è¡Œæ¨¡å¼ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">:w</span><br><span class="line"></span><br><span class="line">:q</span><br><span class="line"></span><br><span class="line">:wq</span><br><span class="line"></span><br><span class="line">:qï¼</span><br><span class="line"></span><br><span class="line">ï¼šx   ä¿å­˜é€€å‡ºï¼ï¼ï¼ï¼</span><br><span class="line"></span><br><span class="line">/ æŸ¥æ‰¾</span><br><span class="line"></span><br><span class="line">ï¼šs/     g</span><br><span class="line"></span><br><span class="line">:%s/    g</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹å½“å‰å·²ç»æ‰“å¼€çš„æ–‡ä»¶åç§°ï¼šâ€œ:filesâ€</span><br><span class="line">ï¼š esc    è¿›å…¥ é€€å‡º</span><br></pre></td></tr></table></figure>
<img src="/Linux-Lover/vim%20%E6%93%8D%E4%BD%9C%E9%9A%8F%E8%AE%B0/vim.jpg" class>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxéšè®°å‘½ä»¤(1)</title>
    <url>/Linux-Lover/%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ctrl +C    ç»ˆæ­¢ <span class="built_in">cd</span> `</span><br><span class="line"></span><br><span class="line">df  -h      ç£ç›˜å¤§å°</span><br><span class="line"></span><br><span class="line">free -m     å†…å­˜å¤§å°</span><br><span class="line"></span><br><span class="line">head -n  **.txt  æ–‡ä»¶å¤´å‡ è¡Œ   é»˜è®¤10</span><br><span class="line"></span><br><span class="line">tail - n <span class="comment">##  ** .txt æ–‡ä»¶æœ«å°¾ä¸¤è¡Œ</span></span><br><span class="line"></span><br><span class="line">less æŸ¥çœ‹æ–‡ä»¶     ï¼šqé€€å‡º</span><br><span class="line"></span><br><span class="line"><span class="comment">#wc -lwc ç»Ÿè®¡æ–‡ä»¶å†…å®¹ä¿¡æ¯ï¼ˆåŒ…å«è¡Œæ•°ã€å•è¯æ•°ã€å­—èŠ‚æ•°ï¼‰</span></span><br><span class="line"></span><br><span class="line">         -lï¼šè¡¨ç¤ºlinesï¼Œè¡Œæ•°</span><br><span class="line"></span><br><span class="line">         -wï¼šè¡¨ç¤ºwordsï¼Œå•è¯æ•°  ä¾ç…§ç©ºæ ¼æ¥åˆ¤æ–­å•è¯æ•°é‡</span><br><span class="line"></span><br><span class="line">         -cï¼šè¡¨ç¤ºbytesï¼Œå­—èŠ‚æ•°</span><br><span class="line"></span><br><span class="line">date è¾“å‡ºçš„å½¢å¼ï¼š2018å¹´3æœˆ24æ—¥æ˜ŸæœŸå…­15:54:28</span><br><span class="line"></span><br><span class="line">date +%F è¾“å‡ºå½¢å¼ï¼š2018-03-24</span><br><span class="line"></span><br><span class="line">date <span class="string">"+%F %T"</span>  ==è¾“å‡ºçš„å½¢å¼ï¼š2018-03-24 16:01:00</span><br><span class="line"></span><br><span class="line">==<span class="comment">#date â€œ+%Y-%m-%d %H:%M:%Sâ€</span></span><br><span class="line"></span><br><span class="line">date -d   <span class="string">"-1 day"</span>  <span class="string">"+%Y-%m-%d %H:%M:%S"</span></span><br><span class="line"></span><br><span class="line">å‰å¤© -  åå¤© +</span><br><span class="line"></span><br><span class="line">cal  ä½œç”¨ï¼šç”¨æ¥æ“ä½œæ—¥å†çš„</span><br><span class="line"></span><br><span class="line">cal -1 æœ¬æœˆ</span><br><span class="line"></span><br><span class="line">cal -3 ä¸Š ä¸­ ä¸‹</span><br><span class="line"></span><br><span class="line">cal   -y  2019 å¹´ä»½æœˆå†</span><br><span class="line"></span><br><span class="line">clear     / ctrl +L  æ¸…é™¤ç»ˆç«¯</span><br><span class="line"></span><br><span class="line">ls   /  | wc<span class="_">-l</span>   ç®¡é“çš„è¿‡æ»¤ä½¿ç”¨</span><br><span class="line"></span><br><span class="line"><span class="comment">#ls / |grep y</span></span><br><span class="line"></span><br><span class="line">hostname -f </span><br><span class="line"></span><br><span class="line">id  ï¼ˆåŒ…å«ç”¨æˆ·idï¼Œç”¨æˆ·ç»„idï¼Œé™„åŠ ç»„idâ€¦ï¼‰</span><br><span class="line"></span><br><span class="line">whoami   æŸ¥çœ‹å½“å‰ç”¨æˆ·</span><br><span class="line"></span><br><span class="line">ps -ef æœåŠ¡å™¨è¿›ç¨‹   ps -ef  |grep http</span><br><span class="line"></span><br><span class="line">top å¤„ç†æœºèµ„æºå ç”¨æƒ…å†µ</span><br><span class="line"></span><br><span class="line">du -sh ç›®å½• æŸ¥çœ‹ç›®å½•å¤§å°</span><br><span class="line"></span><br><span class="line">service æœåŠ¡åç§°  start stop  restart</span><br><span class="line"></span><br><span class="line">find  / -name      http    æŸ¥æ‰¾</span><br><span class="line"></span><br><span class="line">find  / -name      *.cof </span><br><span class="line"></span><br><span class="line"><span class="built_in">kill</span> 2986   killall åç§°   æ€æ­»è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">ifconfig      inet addrå°±æ˜¯ç½‘å¡çš„ipåœ°å€ã€‚</span><br><span class="line"></span><br><span class="line">reboot  å¯åŠ¨</span><br><span class="line"></span><br><span class="line">shutdown   é‡å¯</span><br><span class="line"></span><br><span class="line">uptime è®¡ç®—å¼€æœºåˆ°ç°åœ¨çš„é¢æ—¶é—´</span><br><span class="line"></span><br><span class="line">uname  æ“ä½œç³»ç»Ÿåç§°</span><br><span class="line"></span><br><span class="line">netstat -tnlp</span><br><span class="line"></span><br><span class="line">       -tï¼šè¡¨ç¤ºåªåˆ—å‡ºtcpåè®®çš„è¿æ¥ï¼›</span><br><span class="line"></span><br><span class="line">       -nï¼šè¡¨ç¤ºå°†åœ°å€ä»å­—æ¯ç»„åˆè½¬åŒ–æˆipåœ°å€ï¼Œå°†åè®®è½¬åŒ–æˆç«¯å£å·æ¥æ˜¾ç¤ºï¼›</span><br><span class="line"></span><br><span class="line">       -lï¼šè¡¨ç¤ºè¿‡æ»¤å‡ºâ€œstateï¼ˆçŠ¶æ€ï¼‰â€åˆ—ä¸­å…¶å€¼ä¸ºLISTENï¼ˆç›‘å¬ï¼‰çš„è¿æ¥ï¼›</span><br><span class="line"></span><br><span class="line">       -pï¼šè¡¨ç¤ºæ˜¾ç¤ºå‘èµ·è¿æ¥çš„è¿›ç¨‹pidå’Œè¿›ç¨‹åç§°ï¼›</span><br><span class="line"></span><br><span class="line">man   cp æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</span><br><span class="line"></span><br><span class="line">è½¯é“¾æ¥ ï¼ˆç¬¦å·é“¾æ¥ï¼‰ ln -s   <span class="built_in">source</span>  target  </span><br><span class="line"></span><br><span class="line">ç¡¬é“¾æ¥ ï¼ˆå®ä½“é“¾æ¥ï¼‰ln       <span class="built_in">source</span>  target</span><br><span class="line"></span><br><span class="line">Ctrl+s  é˜»æ­¢è¾“å…¥</span><br><span class="line"></span><br><span class="line">Ctrl+q  å…è®¸è¾“å…¥</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>cron /crontab è®¡åˆ’ä»»åŠ¡</title>
    <url>/Linux-Lover/ron-crontab-%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/</url>
    <content><![CDATA[<p>åˆ† æ—¶ æ—¥  æœˆ  æ˜ŸæœŸ</p>
<p>å››ä¸ªç¬¦å·ï¼š</p>
<p>*ï¼šè¡¨ç¤ºå–å€¼èŒƒå›´ä¸­çš„æ¯ä¸€ä¸ªæ•°å­—</p>
<p>-ï¼šåšè¿ç»­åŒºé—´è¡¨è¾¾å¼çš„ï¼Œè¦æƒ³è¡¨ç¤º1~7ï¼Œåˆ™å¯ä»¥å†™æˆï¼š1-7</p>
<p>/ï¼šè¡¨ç¤ºæ¯å¤šå°‘ä¸ªï¼Œä¾‹å¦‚ï¼šæƒ³æ¯10åˆ†é’Ÿä¸€æ¬¡ï¼Œåˆ™å¯ä»¥åœ¨åˆ†çš„ä½ç½®å†™ï¼š*/10</p>
<p>,ï¼šè¡¨ç¤ºå¤šä¸ªå–å€¼ï¼Œæ¯”å¦‚æƒ³åœ¨1ç‚¹ï¼Œ2ç‚¹6ç‚¹æ‰§è¡Œï¼Œåˆ™å¯ä»¥åœ¨æ—¶çš„ä½ç½®å†™ï¼š1,2,6</p>
<p>é—®é¢˜1ï¼šæ¯æœˆ1ã€10ã€22æ—¥çš„4:45é‡å¯networkæœåŠ¡</p>
<p>45 4  1,10,22  * *  service network restart</p>
<p>é—®é¢˜2ï¼šæ¯å‘¨å…­ã€å‘¨æ—¥çš„1:10é‡å¯networkæœåŠ¡</p>
<p>10 1  *  * 6,0   service network restart</p>
<p>é—®é¢˜3ï¼šæ¯å¤©18:00è‡³23:00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯networkæœåŠ¡</p>
<p>*/30 18-23  *  * *   service network restart</p>
<p>é—®é¢˜4ï¼šæ¯éš”ä¸¤å¤©çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡é‡å¯</p>
<p>3,15 8-11  */2  * *   reboot</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å‹ç£ç›˜</title>
    <url>/Linux-Lover/%E7%A3%81%E7%9B%98/</url>
    <content><![CDATA[<p>bzip2</p>
<p>bzip2 -z xxx</p>
<p>bzip2 -d xxx.gz</p>
<p>tar</p>
<p>tar -vcjf xxx xxx   bz2</p>
<p>tar -vxjf xxxx</p>
<p>tar -vczf xxx xxx  å‹ç¼©gz</p>
<p>tar -vxzf xxxx  è§£å‹</p>
<p>tar -vxzf xxxxï¼ˆç›®å½•ï¼‰ -C xxx(è·¯å¾„)</p>
<p>rar</p>
<p>rar -a xxx.rar xxx   å‹ç¼©</p>
<p>rar -x xxx.rar   è§£å‹</p>
<p>zip</p>
<p>zip -rv xxx.zip xxx   å‹ç¼©</p>
<p>uzip -v xxx.zip   è§£å‹</p>
<p><strong>æ‰©å±•ç¡¬ç›˜</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">df -h</span><br><span class="line">sudo fdisk - l</span><br><span class="line">sudo fdisk /dev/sda</span><br><span class="line">åˆ é™¤ åˆ†åŒºï¼šd</span><br><span class="line">æ–°å¢ åˆ†åŒºï¼šn</span><br><span class="line">ä¿å­˜æ“ä½œï¼šw</span><br><span class="line">é‡å¯ï¼šreboot</span><br><span class="line">æŒ‚è½½ç£ç›˜</span><br><span class="line">åœ¨ home ä¸‹æ–°å»ºworkä½œä¸ºè¿™å—ç£ç›˜æŒ‚è½½ç‚¹</span><br><span class="line"><span class="comment"># mkdir  sda2</span></span><br><span class="line"><span class="comment"># sudo mount   /dev/sda2    /home/sda2</span></span><br><span class="line">è®¾ç½®å¼€æœºç£ç›˜è‡ªåŠ¨æŒ‚è½½</span><br><span class="line"><span class="comment"># vi /etc/fstab</span></span><br><span class="line">æ·»åŠ è¡Œ  /dev/sda2     /home/work   ext4   defaults, 0 1</span><br><span class="line">æ­¤æ—¶ï¼Œç£ç›˜å·²ç»æŒ‚å¥½ï¼ŒæŸ¥çœ‹æŒ‚å¥½çš„ç£ç›˜</span><br><span class="line">å‚è€ƒï¼šhttps://blog.csdn.net/u010801439/article/details/77676668</span><br></pre></td></tr></table></figure>
<p><strong>/dev/sda ç£ç›˜ä¸è¶³</strong></p>
<p>#sudo apt-get autoclean<br> #sudo apt-get clean<br>#sudo apt-get autoremove<br>æ‰§è¡Œå®Œåç›´æ¥å°†/usrä¸‹é‡Šæ”¾äº†1Gå·¦å³çš„ç©ºé—´ã€‚<br>æ•´åˆç¢ç‰‡ä½¿ç”¨<br>å‚è€ƒï¼š<a href="https://blog.csdn.net/itas109/article/details/83341149" target="_blank" rel="noopener">https://blog.csdn.net/itas109/article/details/83341149</a></p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾å¤‡åœ°å€</title>
    <url>/Linux-Lover/%E5%A4%87%E5%9C%B0%E5%9D%80/</url>
    <content><![CDATA[<p>ç”µè„‘ä¸æ¿å­è¿æ¥è·¯ç”±ï¼ˆç”µè„‘è¿æ¥Wifiï¼‰</p>
<p>192.168.0.128</p>
<p>192.168.0.255</p>
<p>255.255.255.0</p>
<p>00:0c:29:e3:61:25</p>
<p>æ¿å­</p>
<p>setenv ipaddr 192.168.0.50</p>
<p>setenv ethaddr 00:04:9f:04:d2:35</p>
<p>setenv gatewayip 192.168.0.1</p>
<p>setenv netmask 255.255.255.0</p>
<p>setenv serverip 192.168.0.128</p>
<p>saveenv</p>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxé©±åŠ¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘çš„å¸¸ç”¨ç½‘ç«™</title>
    <url>/Mechanic-Lover/%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99/</url>
    <content><![CDATA[<p>ç±³æ€ç±³ï¼š<a href="https://www.misumi.com.cn/" target="_blank" rel="noopener">https://www.misumi.com.cn/</a></p>
<p>GABCAD:<a href="https://grabcad.com/" target="_blank" rel="noopener">https://grabcad.com/</a></p>
]]></content>
      <categories>
        <category>Mechanic Lover</category>
      </categories>
      <tags>
        <tag>3Då»ºæ¨¡</tag>
      </tags>
  </entry>
  <entry>
    <title>manæ‰‹å†Œ</title>
    <url>/Linux-Lover/an%E6%89%8B%E5%86%8C/</url>
    <content><![CDATA[<h5 id="man"><a href="#man" class="headerlink" title="man"></a>man</h5><table>
<thead>
<tr>
<th align="center">ä»£å·</th>
<th align="center">å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">Standard commands (æ ‡å‡†å‘½ä»¤)</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">System calls (ç³»ç»Ÿè°ƒç”¨)</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">Libary functions ï¼ˆåº“å‡½æ•°ï¼‰</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">Special device (è®¾å¤‡è¯´æ˜)</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">File formats (æ–‡ä»¶æ ¼å¼)</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">Game and toys (æ¸¸æˆå¨±ä¹)</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">Miscellaneous (æ‚é¡¹)</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">Administrative commands(ç®¡ç†å‘˜å‘½ä»¤)</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">other  (å­˜æ”¾å†…æ ¸æ–‡æ¡£)</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>stm32ç³»ç»Ÿæ¶æ„</title>
    <url>/MCU-Lover/m32%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/</url>
    <content><![CDATA[<p>æˆªå›¾æ”¾åšå®¢ï¼Œæ‡’å¾—ç¿»æ–‡æ¡£ Q_Q</p>
<img src="/MCU-Lover/m32%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/stm32.jpg" class>

<p>ICode æ€»çº¿<br>DCode æ€»çº¿ï¼šè¯¥æ€»çº¿å°†Cortexâ„¢-M3å†…æ ¸çš„DCodeæ€»çº¿ä¸é—ªå­˜å­˜å‚¨å™¨çš„æ•°æ®æ¥å£ç›¸è¿æ¥(å¸¸é‡åŠ è½½å’Œè°ƒè¯•è®¿é—®)ã€‚<br>ç³»ç»Ÿæ€»çº¿<br>DMA æ€»çº¿<br>æ€»çº¿çŸ©é˜µ<br>AHB/APB æ¡¥(APB)ï¼šä¸¤ä¸ªAHB/APBæ¡¥åœ¨AHBå’Œ2ä¸ªAPBæ€»çº¿é—´æä¾›åŒæ­¥è¿æ¥ã€‚APB1æ“ä½œé€Ÿåº¦é™äº36MHzï¼ŒAPB2æ“ä½œäºå…¨é€Ÿ(æœ€é«˜72MHz)ã€‚</p>
]]></content>
      <categories>
        <category>MCU Lover</category>
      </categories>
      <tags>
        <tag>å•ç‰‡æœº</tag>
      </tags>
  </entry>
  <entry>
    <title>stm32æœ€å°ç³»ç»Ÿ</title>
    <url>/MCU-Lover/stm32%E6%9C%80%E5%B0%8F%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<p>å€¼å¾—å‚è€ƒï¼š<a href="https://www.21ic.com/jichuzhishi/mcu/questions/2017-06-07/723582.html" target="_blank" rel="noopener">https://www.21ic.com/jichuzhishi/mcu/questions/2017-06-07/723582.html</a></p>
<img src="/MCU-Lover/stm32%E6%9C%80%E5%B0%8F%E7%B3%BB%E7%BB%9F/stm32.jpg" class>

<p>stm32ä½ç”µå¹³å¤ä½</p>
<p>PA9 PA10å¯¹åº”è¿æ¥RXD TXD<br>çƒ§å½•ï¼š æœ€å°ç³»ç»Ÿæ¿boot0 ç½®1 boot1ç½®0<br>å¯åŠ¨ï¼šæœ€å°ç³»ç»Ÿæ¿boot0 ç½®0 boot1ç½®0</p>
]]></content>
      <categories>
        <category>MCU Lover</category>
      </categories>
      <tags>
        <tag>å•ç‰‡æœº</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/uncategorized/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>555æ¦‚å¿µåŠä½¿ç”¨</title>
    <url>/Circuit-Lover/555%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h5 id="å¸¸è§æ³¢å½¢"><a href="#å¸¸è§æ³¢å½¢" class="headerlink" title="å¸¸è§æ³¢å½¢"></a>å¸¸è§æ³¢å½¢</h5><img src="/Circuit-Lover/555%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%BF%E7%94%A8/555-2.jpg" class>
<h5 id="å•ç¨³æ€è§¦å‘å™¨"><a href="#å•ç¨³æ€è§¦å‘å™¨" class="headerlink" title="å•ç¨³æ€è§¦å‘å™¨"></a>å•ç¨³æ€è§¦å‘å™¨</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å•ç¨³æ€è§¦å‘å™¨----ç”¨äºè„‰å†²æ³¢å½¢çš„å˜æ¢å’Œå®šæ—¶ã€å»¶æ—¶ (74121ã€MC14528)</span><br><span class="line">Tw = 0.7 RC</span><br></pre></td></tr></table></figure>
<img src="/Circuit-Lover/555%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%BF%E7%94%A8/3.jpg" class title="æ³¢å½¢å˜æ¢">
<img src="/Circuit-Lover/555%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%BF%E7%94%A8/4.jpg" class title="å®šæ—¶">
<h5 id="å¤šè°æŒ¯è¡å™¨"><a href="#å¤šè°æŒ¯è¡å™¨" class="headerlink" title="å¤šè°æŒ¯è¡å™¨"></a>å¤šè°æŒ¯è¡å™¨</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å¤šè°æŒ¯è¡å™¨----ç”¨äºäº§ç”Ÿè„‰å†²ï¼Œæ²¡æœ‰ç¨³å®šçŠ¶æ€ï¼Œåªæœ‰ä¸¤ä¸ªæš‚ç¨³æ€ï¼Œä»è€Œäº§ç”Ÿè‡ªæ¿€æŒ¯è¡ï¼Œæ— éœ€å¤–è§¦å‘ã€‚</span><br><span class="line">T=0.7(R1C1+R2C2)</span><br></pre></td></tr></table></figure>

<h5 id="æ–½å¯†ç‰¹è§¦å‘å™¨"><a href="#æ–½å¯†ç‰¹è§¦å‘å™¨" class="headerlink" title="æ–½å¯†ç‰¹è§¦å‘å™¨"></a>æ–½å¯†ç‰¹è§¦å‘å™¨</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ–½å¯†ç‰¹è§¦å‘å™¨----ç”¨äºè„‰å†²æ³¢å½¢çš„å˜æ¢ï¼Œå°¤å…¶æ˜¯å°†æ¨¡æ‹Ÿé‡è½¬æ¢æˆæ•°å­—æ³¢å½¢</span><br><span class="line">å…·æœ‰å›å·®ï¼šæœ‰ä¸¤ä¸ªè§¦å‘ç¿»è½¬ç”µå¹³ã€‚è¾“å…¥ä¿¡å·å¢åŠ æ—¶ï¼Œåœ¨VT+å¤„ç¿»è½¬ï¼›è¾“å…¥ä¿¡å·å‡å°æ—¶ï¼Œåœ¨VT- å¤„ç¿»è½¬ã€‚VT+-VT-ç§°ä¸ºå›å·®ç”µå‹ï¼Œç”¨Î”VTè¡¨ç¤ºï¼Œæ‰€ä»¥å…¶ä¼ è¾“ç‰¹æ€§å‘ˆå›çº¿çŠ¶ã€‚</span><br><span class="line">æ— è®°å¿†åŠŸèƒ½ï¼šæ–½å¯†ç‰¹è§¦å‘å™¨çš„ç¨³æ€è¦é å¤–åŠ è§¦å‘ç”µå‹ç»´æŒï¼Œä¿¡å·æ’¤é™¤ä¼šå¯¼è‡´ç”µè·¯çŠ¶æ€çš„æ”¹å˜ã€‚</span><br></pre></td></tr></table></figure>
<img src="/Circuit-Lover/555%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%BF%E7%94%A8/5.jpg" class>
<h5 id="555å®šæ—¶å™¨"><a href="#555å®šæ—¶å™¨" class="headerlink" title="555å®šæ—¶å™¨"></a>555å®šæ—¶å™¨</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å¯ä»¥ç»è¿‡å†…éƒ¨é“¾æ¥æ„æˆæ–½å¯†ç‰¹è§¦å‘å™¨ã€‚</span><br><span class="line">å®ƒçš„ä½œç”¨å¯ä»¥æ•´æµï¼Œæ•´å¹…ï¼Œä»¥åŠæ•´æ³¢ã€‚</span><br></pre></td></tr></table></figure>
<img src="/Circuit-Lover/555%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%BF%E7%94%A8/1.jpg" class>

<table>
<thead>
<tr>
<th align="center">å¼•è„š</th>
<th align="left">åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1è„š</td>
<td align="left">å¤–æ¥ç”µæºè´Ÿç«¯VSSæˆ–æ¥åœ°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ¥åœ°ã€‚</td>
</tr>
<tr>
<td align="center">2è„š</td>
<td align="left">ä½è§¦å‘ç«¯TLï¼Œè¯¥è„šç”µå‹å°äº1/3 VCCæ—¶æœ‰æ•ˆã€‚</td>
</tr>
<tr>
<td align="center">3è„š</td>
<td align="left">è¾“å‡ºç«¯OUTã€‚</td>
</tr>
<tr>
<td align="center">4è„š</td>
<td align="left">ç›´æ¥æ¸…é›¶ç«¯RSTã€‚å½“æ­¤ç«¯æ¥ä½ç”µå¹³æ—¶ï¼Œåˆ™æ—¶åŸºç”µè·¯ä¸å·¥ä½œ</td>
</tr>
<tr>
<td align="center">5è„š</td>
<td align="left">COä¸ºæ§åˆ¶ç”µå‹ç«¯ã€‚è‹¥æ­¤è„šå¤–æ¥ç”µå‹ï¼Œåˆ™å¯æ”¹å˜å†…éƒ¨ä¸¤ä¸ªæ¯”è¾ƒå™¨çš„åŸºå‡†ç”µå‹ï¼Œå½“è¯¥è„šä¸ç”¨æ—¶ï¼Œåº”å°†è¯¥è„šä¸²å…¥ä¸€åª0.01Î¼Fï¼ˆ103ï¼‰ç“·ç‰‡ç”µå®¹æ¥åœ°ï¼Œä»¥é˜²å¼•å…¥é«˜é¢‘å¹²æ‰°ã€‚</td>
</tr>
<tr>
<td align="center">6è„š</td>
<td align="left">é«˜è§¦å‘ç«¯THï¼Œè¯¥è„šç”µå‹å¤§äº2/3 VCCæ—¶æœ‰æ•ˆã€‚</td>
</tr>
<tr>
<td align="center">7è„š</td>
<td align="left">æ”¾ç”µç«¯ã€‚è¯¥ç«¯ä¸æ”¾ç”µç®¡Tçš„é›†ç”µæç›¸è¿</td>
</tr>
<tr>
<td align="center">8è„š</td>
<td align="left">åŒæå‹æ—¶åŸºç”µè·¯VCCçš„èŒƒå›´æ˜¯4.5 -16Vï¼ŒCMOSå‹æ—¶åŸºç”µè·¯VCCçš„èŒƒå›´ä¸º3-18Vï¼Œä¸€èˆ¬ç”¨5Vã€‚</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
  </entry>
  <entry>
    <title>Solidworksä¸PCBçš„ç»“åˆ</title>
    <url>/Mechanic-Lover/Solidworks%E4%B8%8EPCB%E7%9A%84%E7%BB%93%E5%90%88/</url>
    <content><![CDATA[<p>å¶ç„¶çš„ä¸€æ¬¡å‘ç°QAQ</p>
<p>PCBç”µè·¯æ¿ä¸solidworksçš„å®Œç¾ç»“åˆ</p>
<img src="/Mechanic-Lover/Solidworks%E4%B8%8EPCB%E7%9A%84%E7%BB%93%E5%90%88/solidworks.jpg" class>


<p>è½¬è½½[<a href="https://wenku.baidu.com/view/138bd7b9700abb68a982fbca.html]" target="_blank" rel="noopener">https://wenku.baidu.com/view/138bd7b9700abb68a982fbca.html]</a></p>
]]></content>
      <categories>
        <category>Mechanic Lover</category>
      </categories>
      <tags>
        <tag>3Då»ºæ¨¡</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç”µæ¦‚å¿µ</title>
    <url>/Circuit-Lover/%E6%A6%82%E5%BF%B5/</url>
    <content><![CDATA[<h5 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å•ç‰‡æœº51ã€32ã€åˆæ³°èŠ¯ç‰‡åŸºæœ¬äº†è§£ä¹‹åï¼Ÿä»¥å‰è§‰å¾—æ²¡æ€ä¹ˆåœ¨æ„ï¼Œä¸ºä»€ä¹ˆ32èŠ¯ç‰‡å’Œåˆæ³°ï¼Œä½¿ç”¨æ—¶è¦ä½¿èƒ½ç›¸åº”çš„æ—¶é’Ÿï¼Ÿè€Œ51å´ä¸ç”¨ï¼Ÿ</span><br><span class="line"></span><br><span class="line">å¯æ˜¯éšç€ç”µå­äº§å“é›†æˆåº¦è¶Šæ¥è¶Šé«˜ï¼ŒåŠŸè€—å’Œå‘çƒ­è¶Šæ¥è¶Šä¸¥é‡</span><br><span class="line">èŠ¯ç‰‡å‚å•†éå¸¸æ— å¥ˆä¹Ÿåœ¨å¼€å§‹æƒ³åŠæ³•é¿å…è¿™ä¸ªé—®é¢˜ï¼Œè€Œæœ€ç›´æ¥</span><br><span class="line">çš„æ€è·¯å½“ç„¶å°±æ˜¯ç”¨å¤šå°‘åŠŸèƒ½å°±ä½¿èƒ½å¤šå°‘åŠŸèƒ½ï¼Œå¯¹æ¯ä¸ªå¤–è®¾çš„</span><br><span class="line">æ—¶é’Ÿéƒ½è®¾ç½®äº†å¼€å…³ï¼Œè®©ç”¨æˆ·å¯ä»¥ç²¾ç¡®åœ°æ§åˆ¶ï¼Œå…³é—­ä¸éœ€è¦çš„è®¾å¤‡</span><br><span class="line">ï¼Œè¾¾åˆ°èŠ‚çœä¾›ç”µçš„ç›®çš„ã€‚</span><br><span class="line">å…¶å®è¿™æ ·è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œä¸æ˜¯æ¯ä¸ªå¤–è®¾éƒ½éœ€è¦ç³»ç»Ÿæ—¶é’Ÿé‚£ä¹ˆé«˜çš„é¢‘ç‡ã€‚</span><br><span class="line"></span><br><span class="line">ä»…ä»…ç†è§£ä¸ºèŠ‚çœèµ„æºçš„æ–¹å¼æ„Ÿè§‰è¿˜ä¸å¤Ÿï¼Œåæ¥æ€è€ƒä¸‹ï¼Œæ‰å‘ç°ç­”æ¡ˆå°±æ¥è‡ªæ•°ç”µä¸­çš„é”å­˜å™¨å’Œè§¦å‘å™¨ï¼Œç„¶åï¼Œåˆå¼€å§‹å¤ä¹ äº†ã€‚ã€‚ã€‚QAQ</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
  </entry>
  <entry>
    <title>ç»§SolidWorksä¹‹åå¦ä¸€æ¬¾3Dè½¯ä»¶çš„preoç®€å•çš„å­¦ä¹ </title>
    <url>/Mechanic-Lover/%E7%BB%A7SolidWorks%E4%B9%8B%E5%90%8E%E5%8F%A6%E4%B8%80%E6%AC%BE3D%E8%BD%AF%E4%BB%B6%E7%9A%84preo%E7%AE%80%E5%8D%95%E7%9A%84%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p>1.ç»„ä»¶ä¸­é›¶ä»¶æ¿€æ´»äº†ä¹‹åè¦å–æ¶ˆï¼Œç›´æ¥ctrl+Aå³å¯ã€‚</p>
<p>2.é¢œè‰²RGB</p>
<p>255  0  0  çº¢è‰²</p>
<p>248  255  247  ç™½è‰²</p>
<p>0     0    0  é»‘è‰²</p>
<p>é“¶ç™½è‰²  çº¢(192) ç»¿(192) è“(192)ã€‚</p>
<p>æŸ“è‰²è¿‡ç¨‹ä¸­ï¼Œé«˜çº§çš„å±‚æ¬¡ä¼šè¦†ç›–æ‰ä½çº§çš„é¢œè‰²</p>
<p>ä¾‹å¦‚ï¼šæ€»è£…é…ä½“&gt;å­è£…é…ä½“&gt;é›¶ä»¶</p>
<p>3.é€šè¿‡ä¸å®šå‘ï¼Œæ¨ªæˆªé¢çš„è®¾ç½®è·å–â€œæ­£è§†äºçš„æ•ˆæœâ€ï¼Œé…åˆå‚è€ƒé€‰å–è§†å›¾ã€‚</p>
<p>4.ä»¿çœŸçœ‹ç€å¾ˆå•è°ƒï¼Œä¸è¿‡å¯ä»¥é€šè¿‡æ•°æ®æˆ–è€…æ•°å­¦æ–¹ç¨‹å¼é©±åŠ¨è¿åŠ¨çš„è½¨è¿¹ï¼Œå­˜åœ¨ä¸€ä¸ªæ•°æ®æ–‡æ¡£é‡Œï¼›</p>
<p>é’£é‡‘åŠ å·¥å·¥è‰ºï¼ˆç»¼åˆå†·åŠ å·¥å·¥è‰ºï¼‰</p>
<p>ä¸‹æ–™ ã€æˆå‹ã€å‹é“†ï¼Œæ”»ç‰™ã€ç„Šæ¥ç­‰</p>
<p>è¡¨é¢å¤„ç†ï¼šå–·ç²‰ï¼Œç”µé•€ç­‰ï¼›</p>
<p>æœºåºŠçš„çŸ¥è¯†<br>NCï¼šæ•°å­—æ§åˆ¶ï¼Œç®€ç§°æ•°æ§ã€‚<br>CNCï¼šè®¡ç®—æœºæ•°å­—æ§åˆ¶ï¼Œç®€ç§°ä¹Ÿæ˜¯æ•°æ§ã€‚NCæ˜¯ä»¥å‰çš„æ•°æ§ï¼ŒCNCæ˜¯ç›®å‰çš„æ•°æ§ï¼ŒNCå·²ç»æ·˜æ±°ã€‚å¦å¤–ï¼Œäººä»¬ç»å¸¸æŠŠåŠ å·¥ä¸­å¿ƒå«åšCNCã€‚<br>DNCï¼šåœ¨çº¿åŠ å·¥ã€‚ä¹Ÿå°±æ˜¯ä¸€è¾¹ä¼ è¾“ç¨‹åºï¼Œä¸€è¾¹åŠ å·¥ï¼Œç”¨ç”µè„‘æ§åˆ¶æ•°æ§æœºåºŠåœ¨çº¿åŠ å·¥ã€‚<br>2019-1-9 ming</p>
]]></content>
      <categories>
        <category>Mechanic Lover</category>
      </categories>
      <tags>
        <tag>3Då»ºæ¨¡</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxç³»ç»Ÿåˆ†ç±»</title>
    <url>/Linux-Lover/Linux%E7%B3%BB%E7%BB%9F%E5%88%86%E7%B1%BB/</url>
    <content><![CDATA[<h4 id="Linuxç³»ç»Ÿåˆ†ç±»"><a href="#Linuxç³»ç»Ÿåˆ†ç±»" class="headerlink" title="Linuxç³»ç»Ÿåˆ†ç±»"></a>Linuxç³»ç»Ÿåˆ†ç±»</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¸€èˆ¬æ¥è¯´ï¼Œlinuxç³»ç»ŸåŸºæœ¬åˆ†ä¸ºä¸¤å¤§ç±»</span><br><span class="line">Redhatç³»åˆ—:Redhatã€Centosã€Fedoraç­‰</span><br><span class="line">Debianç³»åˆ—:Debianã€Ubuntuç­‰</span><br></pre></td></tr></table></figure>

<h5 id="Redhatç³»åˆ—"><a href="#Redhatç³»åˆ—" class="headerlink" title="Redhatç³»åˆ—"></a>Redhatç³»åˆ—</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å•†ä¸šç”¨é€”ï¼Œä¼ä¸šç‰ˆï¼Œä¸€èˆ¬ä»˜è´¹ã€‚</span><br><span class="line">rmp:åŒ…å®‰è£…å·¥å…·</span><br><span class="line">yum:ç¨‹åºä¸ç¨‹åºä¹‹é—´å­˜åœ¨éå¸¸å¤æ‚çš„ä¾èµ–å…³ç³»ã€‚RPMæ— æ³•è§£å†³è½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="Debianç³»åˆ—"><a href="#Debianç³»åˆ—" class="headerlink" title="Debianç³»åˆ—"></a>Debianç³»åˆ—</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ç¤¾åŒºç»´æŠ¤ï¼Œæ¡Œé¢ç‰ˆï¼Œä¸€èˆ¬å…è´¹ã€‚</span><br><span class="line">dpkg:åŒ…å®‰è£…å·¥å…·</span><br><span class="line">apt-get:ä¼šè§£å†³å’Œå®‰è£…æ¨¡å—çš„ä¾èµ–é—®é¢˜</span><br></pre></td></tr></table></figure>
<h5 id="åŒºåˆ«å¯¹æ¯”"><a href="#åŒºåˆ«å¯¹æ¯”" class="headerlink" title="åŒºåˆ«å¯¹æ¯”"></a>åŒºåˆ«å¯¹æ¯”</h5><img src="/Linux-Lover/Linux%E7%B3%BB%E7%BB%9F%E5%88%86%E7%B1%BB/example.jpg" class>]]></content>
      <categories>
        <category>Linux Lover</category>
      </categories>
      <tags>
        <tag>Linuxç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¨¡ç”µæ¦‚å¿µ</title>
    <url>/Circuit-Lover/3157%E6%A8%A1%E6%8B%9F%E5%BC%80%E5%85%B3/</url>
    <content><![CDATA[<h6 id="æ”¾å¤§ç”µè·¯"><a href="#æ”¾å¤§ç”µè·¯" class="headerlink" title="æ”¾å¤§ç”µè·¯"></a>æ”¾å¤§ç”µè·¯</h6><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ”¾å¤§ç”µè·¯æ¨¡å‹:ç”µå‹æ”¾å¤§ç”µè·¯ã€ç”µæµæ”¾å¤§ç”µè·¯</span><br><span class="line">æ”¾å¤§ç”µè·¯çš„æ€§èƒ½ï¼šè¾“å…¥ç”µé˜»ã€è¾“å‡ºç”µé˜»ã€å¢ç›Šã€é¢‘ç‡å“åº”åŠå¸¦å®½ã€‚</span><br></pre></td></tr></table></figure>
<h6 id="è¿ç®—æ”¾å¤§å™¨"><a href="#è¿ç®—æ”¾å¤§å™¨" class="headerlink" title="è¿ç®—æ”¾å¤§å™¨"></a>è¿ç®—æ”¾å¤§å™¨</h6><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">åŒç›¸ç”µè·¯</span><br><span class="line">åç›¸ç”µè·¯</span><br><span class="line">æ±‚å’Œç”µè·¯</span><br><span class="line">æ±‚å·®ç”µè·¯</span><br><span class="line">å·®åˆ†ç”µè·¯</span><br><span class="line">ç§¯åˆ†ç”µè·¯</span><br><span class="line">å¾®åˆ†ç”µè·¯</span><br><span class="line">Â·Â·Â·Â·Â·</span><br></pre></td></tr></table></figure>
<h5 id="æ™¶ä½“ä¸‰æç®¡åŠå…¶åŸºæœ¬æ”¾å¤§ç”µè·¯ï¼ˆBJTï¼‰"><a href="#æ™¶ä½“ä¸‰æç®¡åŠå…¶åŸºæœ¬æ”¾å¤§ç”µè·¯ï¼ˆBJTï¼‰" class="headerlink" title="æ™¶ä½“ä¸‰æç®¡åŠå…¶åŸºæœ¬æ”¾å¤§ç”µè·¯ï¼ˆBJTï¼‰"></a>æ™¶ä½“ä¸‰æç®¡åŠå…¶åŸºæœ¬æ”¾å¤§ç”µè·¯ï¼ˆBJTï¼‰</h5><img src="/Circuit-Lover/3157%E6%A8%A1%E6%8B%9F%E5%BC%80%E5%85%B3/4.jpg" class>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å¤–éƒ¨æ¡ä»¶ï¼šå‘å°„ç»“æ­£åï¼Œé›†ç”µç»“åå</span><br><span class="line">å…±å‘å°„æã€å…±åŸºæã€å…±é›†ç”µæ</span><br></pre></td></tr></table></figure>
<h5 id="åœºæ•ˆåº”ä¸‰æç®¡åŠå…¶æ”¾å¤§ç”µè·¯"><a href="#åœºæ•ˆåº”ä¸‰æç®¡åŠå…¶æ”¾å¤§ç”µè·¯" class="headerlink" title="åœºæ•ˆåº”ä¸‰æç®¡åŠå…¶æ”¾å¤§ç”µè·¯"></a>åœºæ•ˆåº”ä¸‰æç®¡åŠå…¶æ”¾å¤§ç”µè·¯</h5><img src="/Circuit-Lover/3157%E6%A8%A1%E6%8B%9F%E5%BC%80%E5%85%B3/3.jpg" class>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ²Ÿé“ä¸­åªæœ‰ä¸€ç§ç±»å‹çš„è½½æµå­å‚ä¸å¯¼ç”µï¼Œæ‰€ä»¥åœºæ•ˆåº”ç®¡ä¹Ÿç§°ä¸ºå•æå‹ä¸‰æç®¡ã€‚</span><br><span class="line">å…±æºæã€å…±æ …æã€å…±æºæ</span><br></pre></td></tr></table></figure>
<h4 id="æ¨¡æ‹Ÿå¼€å…³ä¸å¤šè·¯å¤ç”¨å™¨åŒºåˆ«"><a href="#æ¨¡æ‹Ÿå¼€å…³ä¸å¤šè·¯å¤ç”¨å™¨åŒºåˆ«" class="headerlink" title="æ¨¡æ‹Ÿå¼€å…³ä¸å¤šè·¯å¤ç”¨å™¨åŒºåˆ«"></a>æ¨¡æ‹Ÿå¼€å…³ä¸å¤šè·¯å¤ç”¨å™¨åŒºåˆ«</h4><p>å¯¹ä¿¡å·é€šè·¯è¿›è¡Œé€‰æ‹©ï¼Œæˆ–è€…æ¡£ä½åˆ‡æ¢ï¼Œæƒ³é—®æ¨¡æ‹Ÿé€šé“å¼€å…³å’Œå¤šè·¯å¤ç”¨å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ¨¡æ‹Ÿå¼€å…³å’Œå¤šè·¯å¤ç”¨å™¨ä»¶å…¶å®åœ¨ç”µæ°”ä¸Šï¼Œæˆ–è€…æ¶æ„ä¸Šï¼ŒåŸç†ä¸Šæ²¡ä»€ä¹ˆåŒºåˆ«ã€‚</span><br><span class="line">å¤šè·¯å¤ç”¨çš„è¯ä¸»è¦ç”¨åœ¨é€šé“æ•°æ¯”è¾ƒå¤šçš„åœºåˆï¼Œä¾‹å¦‚ï¼š4è¾“å…¥1è¾“å‡ºï¼Œ16è¾“å…¥1è¾“å‡ºã€‚</span><br><span class="line">æ¨¡æ‹Ÿ/æ•°å­—å¼€å…³ä¸»è¦ç”¨äºé€šé“æ•°ç›®æ¯”è¾ƒå°çš„ã€‚ä½å¯¼é€šç”µé˜»ï¼Œæ ¹æ®åº”ç”¨éœ€æ±‚ä¸åŒï¼›æ¨¡æ‹Ÿå¼€å…³å¯ä»¥åˆ†ä¸ºéŸ³é¢‘æ¨¡æ‹Ÿå¼€å…³ã€è§†é¢‘æ¨¡æ‹Ÿå¼€å…³ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="æ‰©å±•çŸ¥è¯†"><a href="#æ‰©å±•çŸ¥è¯†" class="headerlink" title="æ‰©å±•çŸ¥è¯†"></a>æ‰©å±•çŸ¥è¯†</h4><h5 id="MOSã€NMOSã€PMOSã€COMSæ¦‚å¿µ"><a href="#MOSã€NMOSã€PMOSã€COMSæ¦‚å¿µ" class="headerlink" title="MOSã€NMOSã€PMOSã€COMSæ¦‚å¿µ"></a>MOSã€NMOSã€PMOSã€COMSæ¦‚å¿µ</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">MOSç®¡å¯¼é€šç‰¹æ€§ï¼Œç›¸å½“äºå¼€å…³é—­åˆã€‚</span><br><span class="line">NMOSçš„ç‰¹æ€§ï¼ŒVgså¤§äºä¸€å®šçš„å€¼å°±ä¼šå¯¼é€šï¼Œé€‚åˆç”¨äºæºææ¥åœ°æ—¶çš„æƒ…å†µï¼Œåªè¦æ …æç”µå‹è¾¾åˆ°4Væˆ–10Vå°±å¯ä»¥äº†ã€‚å¯¼é€šç”µé˜»å°ï¼Œä¸”å®¹æ˜“åˆ¶é€ ï¼Œå¸‚åœºå¹¿æ³›åº”ç”¨ã€‚</span><br><span class="line">PMOSçš„ç‰¹æ€§ï¼ŒVgså°äºä¸€å®šçš„å€¼å°±ä¼šå¯¼é€šï¼Œé€‚åˆç”¨äºæºææ¥VCCæ—¶çš„æƒ…å†µã€‚å¯¼é€šç”µé˜»å¤§ï¼Œä»·æ ¼è´µï¼Œæ›¿æ¢ç§ç±»å°‘ï¼Œé€šå¸¸è¿˜æ˜¯ä½¿ç”¨NMOSã€‚</span><br><span class="line">CMOSçš„äº§ç”Ÿï¼Ÿ</span><br><span class="line">ä¸€ã€é˜ˆå€¼æŸ</span><br><span class="line">NMOS ä¼ è¾“é«˜ç”µå¹³æœ‰é˜ˆå€¼æŸï¼ˆVtnï¼‰ï¼Œä½ç”µå¹³åˆ™æ²¡æœ‰ï¼›</span><br><span class="line">PMOS ä¼ è¾“ä½ç”µå¹³æœ‰é˜ˆå€¼æŸï¼ˆVtpï¼‰ï¼Œé«˜ç”µå¹³åˆ™æ²¡æœ‰ã€‚</span><br><span class="line">CMOS äº’è¡¥ç»“æ„åˆ™åˆ©ç”¨äº†ä¸Šè¿°â€œäº’è¡¥â€ç‰¹æ€§ï¼Œä¼ è¾“é«˜ä½ç”µå¹³æ—¶éƒ½æ²¡æœ‰é˜ˆå€¼æŸã€‚</span><br><span class="line">äºŒã€çº¿æ€§</span><br><span class="line">NMOS æˆ– PMOS å•ç®¡ã€‚</span><br><span class="line">åˆ©ç”¨ä¸¤ç®¡å¯¼é€šç”µæµçš„â€œäº’è¡¥â€ç‰¹æ€§ï¼Œä½¿å¾—å¯¼é€šç”µæµç‰¹æ€§å‘ˆâ€œé«˜çº¿æ€§â€ã€‚</span><br><span class="line">ä¸‰ã€åŠŸè€—</span><br><span class="line">ä¸»è¦å·®åˆ«åœ¨åŠŸè€—ä¸Šï¼ŒNMOSå’ŒPMOSå·¥ä½œæ—¶è‡³å°‘æœ‰ä¸€ä¸ªå¯¼é€šï¼Œè€ŒCMOSå¯¼é€šçš„æ—¶é—´å¾ˆçŸ­ï¼ŒåŠŸè€—æ˜æ˜¾é™ä½</span><br></pre></td></tr></table></figure>
<h4 id="CMOS-ä¸-TTL"><a href="#CMOS-ä¸-TTL" class="headerlink" title="CMOS ä¸ TTL"></a>CMOS ä¸ TTL</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CMOSæ˜¯åœºæ•ˆåº”æ™¶ä½“ç®¡ï¼ŒTTLæ˜¯åŒææ™¶ä½“ç®¡2ã€‚</span><br><span class="line">COMSå…·æœ‰è¾ƒå®½çš„é€»è¾‘ç”µå¹³èŒƒå›´ï¼ˆ5-15Vï¼‰ï¼ŒTTLåªèƒ½åœ¨5Vä¸‹å·¥ä½œã€‚</span><br><span class="line">CMOSçš„é«˜ä½ç”µå¹³å·®å¼‚è¾ƒå¤§ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›å¼ºï¼ŒTTLå·®å°ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›å·®ã€‚</span><br><span class="line">CMOSåŠŸè€—å¾ˆå°ï¼ŒTTLåŠŸè€—å¤§ï¼ˆ1-5mA/é—¨ï¼‰</span><br><span class="line">CMOSçš„å·¥ä½œé¢‘ç‡ç•¥ä½äºTTLï¼Œä½†å…¶é«˜é€ŸCMOSå‡ ä¹ä¸TTLç›¸åŒã€‚</span><br><span class="line">TTLé«˜ç”µå¹³3.6~5Vï¼Œä½ç”µå¹³0V~2.4V_</span><br><span class="line">CMOSç”µå¹³VCCå¯è¾¾åˆ°12V_</span><br><span class="line">CMOSç”µè·¯çš„é«˜ç”µå¹³è¾“å‡ºçº¦ä¸º0.9VCCï¼Œä½ç”µå¹³è¾“å‡ºçº¦ä¸º0.1VCCã€‚</span><br><span class="line">CMOSç”µè·¯ä¸ä½¿ç”¨çš„è¾“å…¥ç«¯ä¸èƒ½æŒ‚èµ·ï¼Œä¼šå¼•èµ·é€»è¾‘æ··ä¹±ã€‚</span><br><span class="line">TTLç”µè·¯ä¸ä½¿ç”¨çš„è¾“å…¥ç«¯ç©ºæ—·ä¸ºé«˜ç”µå¹³_</span><br><span class="line">å¦å¤–ï¼Œç”±äºCMOSé›†æˆç”µè·¯çš„ç”µæºç”µå‹å˜åŒ–èŒƒå›´å¤§ï¼Œå¯¹ç”µæºçš„è¦æ±‚ä¸å¦‚TTLé›†æˆç”µè·¯ä¸¥æ ¼ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Circuit Lover</category>
      </categories>
  </entry>
</search>
